"use strict";(self.webpackChunkPortal=self.webpackChunkPortal||[]).push([[51],{5051:(qt,I,a)=>{a.r(I),a.d(I,{CustomerModule:()=>Nt});var d=a(9808),Q=a(224),E=a(4253),p=a(9826),A=a(655),T=a(520),u=a(4987),Z=a(2062),t=a(5e3),m=a(3038),R=a(2802),f=a(7093),w=a(3322),F=a(4623),O=a(4834),S=a(5245),D=a(2354);function $(i,e){if(1&i&&(t.TgZ(0,"div",10)(1,"span",11),t._uU(2),t.qZA()()),2&i){const n=t.oxw();t.xp6(2),t.Oqu(n.name)}}function k(i,e){1&i&&t._UZ(0,"mat-divider")}let C=class{constructor(e,n,r,o,s){this.actionService=e,this.activatedRoute=n,this.router=r,this.sessionService=o,this.httpService=s,this.id="",this.name="",this.isMaintanance=!0,this.isNew=!1,this.isToggleNewButton=!0}ngOnInit(){this.routerSubscription=this.activatedRoute.queryParams.pipe((0,u.t)(this)).subscribe(s=>{if(this.id=s.id||"",0===this.id.length||this.id===Z.i.empty)return this.isMaintanance=this.isNew=!0,void this.router.navigate(["/invoicemanagement/customer/maintenance"])});let o=this.router.parseUrl(this.router.url).root.children[p.eC].segments.join("/");(-1!==o.indexOf("invoicemanagement/customer/customerstatement")||-1!==o.indexOf("invoicemanagement/customer/customeranalysis"))&&this.id.length>0&&this.id!==Z.i.empty&&(this.isMaintanance=this.isNew=!1,this.get()),this.subscription=this.actionService.toggleDataEvent.pipe((0,u.t)(this)).subscribe(s=>{this.update(s)})}ngOnDestroy(){this.subscription.unsubscribe()}optionsEvent(e){}get(){const e=(new T.LE).set("id",this.id);this.httpService.HttpGetWithParams(this.sessionService.urlSetting.invoiceManagementWebApiUrl+"customer/get",e).subscribe(r=>{this.getSuccess(r)},r=>this.getFailed(r))}getSuccess(e){this.name!==e.entity.name&&(this.name=e.entity.name),this.id=e.entity.id}getFailed(e){}update(e){if(this.isNew=!1,"new"===(e?e.status:"new"))return this.name="",this.isNew=!0,void(this.id="");this.id=e.id,e.name!==this.name&&(this.name=e.name)}maintenance(){this.isMaintanance=this.isToggleNewButton=!0,this.router.navigate(["/invoicemanagement/customer/maintenance"],{queryParams:{id:this.id}})}statement(){this.isToggleNewButton=!0,!this.isNew&&(this.isMaintanance=!1,this.router.navigate(["/invoicemanagement/customer/customerstatement"],{queryParams:{id:this.id}}))}analysis(){this.isToggleNewButton=!0,!this.isNew&&(this.isMaintanance=!1,this.router.navigate(["/invoicemanagement/customer/customeranalysis"],{queryParams:{id:this.id}}))}};C.\u0275fac=function(e){return new(e||C)(t.Y36(m.cw),t.Y36(p.gz),t.Y36(p.F0),t.Y36(m.mj),t.Y36(m.OE))},C.\u0275cmp=t.Xpm({type:C,selectors:[["app-customer-layout"]],decls:28,vars:2,consts:[["fxLayout","row wrap",2,"height","calc(100% - 50px)"],["fxFlex","15","fxFlex.xs","100","fxFlex.sm","25","fxFlex.md","25",2,"background-color","#cecece"],["fxLayout","column"],["fxLayout","column","fxLayoutAlign","center center","ngClass.xs","min-h-80","ngClass","min-h-150",4,"ngIf"],[4,"ngIf"],["mat-list-item","",2,"padding","0 20px",3,"click"],[1,"icon-18","m-r-8"],[1,"f-s-14","f-w-100"],["fxFlex","85","fxFlex.xs","100","fxFlex.sm","75","fxFlex.md","75"],[3,"optionsEvent"],["fxLayout","column","fxLayoutAlign","center center","ngClass.xs","min-h-80","ngClass","min-h-150"],[1,"f-s-16","f-w-600"]],template:function(e,n){1&e&&(t._UZ(0,"app-page-header"),t.TgZ(1,"div",0)(2,"div",1)(3,"div",2),t.YNc(4,$,3,1,"div",3),t.TgZ(5,"mat-nav-list"),t.YNc(6,k,1,0,"mat-divider",4),t.TgZ(7,"a",5),t.NdJ("click",function(){return n.maintenance()}),t.TgZ(8,"mat-icon",6),t._uU(9,"account_circle"),t.qZA(),t.TgZ(10,"p",7),t._uU(11,"Profile"),t.qZA()(),t._UZ(12,"mat-divider"),t.TgZ(13,"a",5),t.NdJ("click",function(){return n.statement()}),t.TgZ(14,"mat-icon",6),t._uU(15,"payment"),t.qZA(),t.TgZ(16,"p",7),t._uU(17,"Statement"),t.qZA()(),t._UZ(18,"mat-divider"),t.TgZ(19,"a",5),t.NdJ("click",function(){return n.analysis()}),t.TgZ(20,"mat-icon",6),t._uU(21,"bar_chart"),t.qZA(),t.TgZ(22,"p",7),t._uU(23,"Analysis"),t.qZA()(),t._UZ(24,"mat-divider"),t.qZA()()(),t.TgZ(25,"div",8),t._UZ(26,"router-outlet"),t.qZA()(),t.TgZ(27,"app-float-button",9),t.NdJ("optionsEvent",function(o){return n.optionsEvent(o)}),t.qZA()),2&e&&(t.xp6(4),t.Q6J("ngIf",!n.isNew),t.xp6(2),t.Q6J("ngIf",!n.isNew))},directives:[R.q,f.xw,f.yH,d.O5,f.Wh,w.oO,d.mk,F.Hk,O.d,F.Tg,S.Hw,p.lC,D.u],styles:[""]}),C=(0,A.gn)([(0,u.c)()],C);var U=a(5101),c=a(3075),j=a(8372);class N{constructor(){this.id=Z.i.empty,this.code="",this.name="",this.billAddress="",this.billCity="",this.billRegion="",this.billPostalCode="",this.billPhoneNumber="",this.billCountryId=null,this.billCountry="",this.shipAddress="",this.shipCity="",this.shipRegion="",this.shipPostalCode="",this.shipPhoneNumber="",this.shipCountryId=null,this.shipCountry="",this.contactPerson="",this.phoneNumber="",this.webSiteUrl="",this.currencyId="",this.currency="",this.paymentTerm=0}}var M=a(9256),P=a(5518),x=a(3489),B=a(8833),L=a(1079),H=a(7423),Y=a(508),J=a(9814),W=a(9285);function z(i,e){if(1&i&&(t.ynx(0),t._uU(1),t._UZ(2,"br"),t.BQk()),2&i){const n=e.$implicit;t.xp6(1),t.hij(" ",n," ")}}function G(i,e){if(1&i&&(t.TgZ(0,"mat-error"),t.YNc(1,z,3,1,"ng-container",44),t.ALo(2,"matError"),t.qZA()),2&i){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,n.form.get("code").errors,"code"))}}function V(i,e){if(1&i&&(t.ynx(0),t._uU(1),t._UZ(2,"br"),t.BQk()),2&i){const n=e.$implicit;t.xp6(1),t.hij(" ",n," ")}}function X(i,e){if(1&i&&(t.TgZ(0,"mat-error"),t.YNc(1,V,3,1,"ng-container",44),t.ALo(2,"matError"),t.qZA()),2&i){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,n.form.get("name").errors,"name"))}}function K(i,e){if(1&i){const n=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(o){t.CHM(n);const s=t.oxw(),l=t.MAs(32);return s.clearInput(o,"billCountry",l)}),t.TgZ(1,"mat-icon"),t._uU(2,"clear"),t.qZA()()}}function tt(i,e){if(1&i&&(t.TgZ(0,"mat-option",45),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&i){const n=e.$implicit;t.Q6J("value",n),t.xp6(1),t.hij(" ",t.lcZ(2,2,n.description)," ")}}function et(i,e){if(1&i){const n=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(o){t.CHM(n);const s=t.oxw(),l=t.MAs(71);return s.clearInput(o,"shipCountry",l)}),t.TgZ(1,"mat-icon"),t._uU(2,"clear"),t.qZA()()}}function nt(i,e){if(1&i&&(t.TgZ(0,"mat-option",45),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&i){const n=e.$implicit;t.Q6J("value",n),t.xp6(1),t.hij(" ",t.lcZ(2,2,n.description)," ")}}function it(i,e){if(1&i){const n=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(o){t.CHM(n);const s=t.oxw(),l=t.MAs(106);return s.clearInput(o,"currency",l)}),t.TgZ(1,"mat-icon"),t._uU(2,"clear"),t.qZA()()}}function ot(i,e){if(1&i&&(t.TgZ(0,"mat-option",45),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&i){const n=e.$implicit;t.Q6J("value",n),t.xp6(1),t.hij(" ",t.lcZ(2,2,n.description)," ")}}let g=class{constructor(e,n,r,o,s,l,b,_,Mt){this.fb=e,this.httpService=n,this.sessionService=r,this.router=o,this.activatedRoute=s,this.reactiveformService=l,this.actionService=b,this.lookupService=_,this.toastrService=Mt,this.title="Customer Maintenance",this.billCountryAutoComplete$=null,this.shipCountryAutoComplete$=null,this.currencyAutoComplete$=null,this.selectedBillCountry=null,this.selectedShipCountry=null,this.selectedCurrency=null,this.minTripDate=new Date,this.maxTripDate=new Date(Date.now()+3122064e6),this.startTripDate=new Date(Date.now()+26784e5),this.id="",this.createMode=!1}ngOnInit(){this.initialize(),this.initializeToolbar(),this.initializeForm(new N),this.routerSubscription=this.activatedRoute.queryParams.pipe((0,u.t)(this)).subscribe(e=>{this.id=e.id||"",this.id.length>0&&this.get()}),this.updateEventSubscription=this.actionService.toggleUpdateEvent.pipe((0,u.t)(this)).subscribe(e=>this.update(e)),this.createNewEventSubscription=this.actionService.toggleCreateEvent.pipe((0,u.t)(this)).subscribe(e=>this.create(e)),this.getEventSubscription=this.actionService.toggleGetEvent.pipe((0,u.t)(this)).subscribe(e=>{this.id=e||"",this.get()}),this.form.valueChanges.pipe((0,u.t)(this),(0,j.b)(500),(0,P.Lr)()).subscribe(e=>{this.actionService.formDirty=!(!this.form.valid||!this.form.touched&&!this.form.dirty)})}ngOnDestroy(){}ngAfterViewInit(){this.initReferences()}initialize(){this.inquiry=new U.U,this.currencyArrow=this.billCountryArrow=this.shipCountryArrow="arrow_drop_down",this.currencyObs=this.billCountryObs=this.shipCountryObs=!1}initializeForm(e){this.form=this.fb.group({id:[e.id],code:[e.code,[c.kI.required,c.kI.maxLength(50)]],name:[e.name,[c.kI.required,c.kI.maxLength(200)]],billAddress:[e.billAddress],billCity:[e.billCity],billRegion:[e.billRegion],billPostalCode:[e.billPostalCode],billCountryId:[e.billCountryId],billCountry:[e.billCountry],billPhoneNumber:[e.billPhoneNumber],shipAddress:[e.shipAddress],shipCity:[e.shipCity],shipRegion:[e.shipRegion],shipPostalCode:[e.shipPostalCode],shipCountryId:[e.shipCountryId],shipCountry:[e.shipCountry],shipPhoneNumber:[e.shipPhoneNumber],contactPerson:[e.contactPerson],phoneNumber:[e.phoneNumber],webSiteUrl:[e.webSiteUrl],currencyId:[e.currencyId,c.kI.required],currency:[e.currency,c.kI.required],paymentTerm:[e.paymentTerm&&0!==e.paymentTerm?e.paymentTerm.toString():"30",c.kI.required]})}initializeToolbar(){const e=new M.P;e.showNavigatebefore=!0,e.showSave=!0,e.title=this.title,e.navigatebeforeUrl="/invoicemanagement/customer/inquiry",this.actionService.setToolbarSettings(e)}get(){const e=(new T.LE).set("id",this.id);this.httpService.HttpGetWithParams(this.sessionService.urlSetting.invoiceManagementWebApiUrl+"customer/get",e).subscribe(r=>{this.getSuccess(r)},r=>this.getFailed(r))}getSuccess(e){this.id=e.entity.id,this.createMode=!1,this.reactiveformService.setReactiveFormObject(this.form,e.entity),this.patchAutoComplete(e.entity),this.actionService.toggleDataEvent.emit({status:"get",id:e.entity.id,name:e.entity.name})}getFailed(e){}create(e){this.id="",this.createMode=!0,this.reactiveformService.setValueReactiveFormObject(this.form,new N),this.patchAutoComplete(null),this.currencyObs=this.billCountryObs=this.shipCountryObs=!0,this.actionService.toggleDataEvent.emit(null)}update(e){let n=new N;n=this.reactiveformService.getReactiveFormObject(this.form),delete n.currency,delete n.billCountry,delete n.shipCountry;let r="";n.id===Z.i.empty||""===n.id?(n.id=""===n.id?Z.i.empty:n.id,r=this.sessionService.urlSetting.invoiceManagementWebApiUrl+"customer/create"):r=this.sessionService.urlSetting.invoiceManagementWebApiUrl+"customer/update",this.httpService.HttpPost(r,n).subscribe(o=>{this.updateSuccess(o)},o=>this.updateFailed(o))}updateSuccess(e){this.id=e.entity.id,this.createMode=!1,this.toastrService.ShowSuccessMessage(e.returnMessage[0]);let n={status:"update",id:e.entity.id,name:this.form.get("name").value};this.actionService.toggleDataEvent.emit(n)}updateFailed(e){}paymentTermChange(e){Number(e.value)}optionSelected(e,n,r,o){const s=e.option.value?e.option.value:null;"object"==typeof s&&(this[n]=s,o.controls[r].patchValue(s.description))}validateSelected(e,n,r,o){setTimeout(()=>{this[e]&&this[e].description===o.controls[r].value?o.controls[n].patchValue(this[e].id):(o.controls[r].patchValue(""),o.controls[n].patchValue(""),this[e]="")},300)}clearInput(e,n,r){e.stopPropagation(),this.form.get(n).patchValue(""),r.openPanel()}openOrClosePanel(e,n,r){e.stopPropagation(),n.panelOpen?n.closePanel():(this.obs(r),n.openPanel())}initReferences(){this.billCountryAutoComplete$=this.lookupService.autoCompleteSkipOneObs(this.form,"billCountry",this.sessionService.urlSetting.invoiceManagementWebApiUrl+"references/GetCoutries","description","billCountryObs"),this.shipCountryAutoComplete$=this.lookupService.autoCompleteSkipOneObs(this.form,"shipCountry",this.sessionService.urlSetting.invoiceManagementWebApiUrl+"references/GetCoutries","description","shipCountryObs"),this.currencyAutoComplete$=this.lookupService.autoCompleteSkipOneObs(this.form,"currency",this.sessionService.urlSetting.invoiceManagementWebApiUrl+"references/GetCurrecies","description","currencyObs")}patchAutoComplete(e){if(null===e)return this.selectedBillCountry=null,this.selectedShipCountry=null,void(this.selectedCurrency=null);this.selectedBillCountry={id:e.billCountryId,description:e.billCountry},this.selectedShipCountry={id:e.shipCountryId,description:e.shipCountry},this.selectedCurrency={id:e.currencyId,description:e.currency}}obs(e){(new U.U).sortExpression="description",this[e]||"currencyObs"!==e?this[e]||"shipCountryObs"!==e?!this[e]&&"billCountryObs"===e&&(this.billCountryAutoComplete$=this.lookupService.autoCompleteObs(this.form,"billCountry",this.sessionService.urlSetting.invoiceManagementWebApiUrl+"references/GetCoutries","description","billCountryObs")):this.shipCountryAutoComplete$=this.lookupService.autoCompleteObs(this.form,"shipCountry",this.sessionService.urlSetting.invoiceManagementWebApiUrl+"references/GetCoutries","description","shipCountryObs"):this.currencyAutoComplete$=this.lookupService.autoCompleteObs(this.form,"currency",this.sessionService.urlSetting.invoiceManagementWebApiUrl+"references/GetCurrecies","description","currencyObs"),this[e]=!0}currencyclick(){}formclick(){}};g.\u0275fac=function(e){return new(e||g)(t.Y36(c.qu),t.Y36(m.OE),t.Y36(m.mj),t.Y36(p.F0),t.Y36(p.gz),t.Y36(m.xd),t.Y36(m.cw),t.Y36(m.WO),t.Y36(m._W))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-customer-maintenance"]],decls:129,vars:29,consts:[[2,"overflow","hidden",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","10px grid",1,"matero-mat-form-field"],["fxFlex","40","fxFlex.lt-sm","100","fxFlex.lt-md","100"],["matInput","","formControlName","code"],[4,"ngIf"],["fxFlex","60","fxFlex.lt-sm","100","fxFlex.lt-md","100"],["matInput","","formControlName","name"],["fxFlex","50","fxFlex.lt-md","100"],["fxLayout","row wrap",2,"border","1px solid #e0e0e0","padding","8px","border-radius","3%"],["fxFlex","100","fxFlex.lt-md","100"],["matInput","","formControlName","billAddress","rows","3"],["matInput","","formControlName","billCity"],["matInput","","formControlName","billRegion"],["formControlName","billCountry","matInput","",3,"matAutocomplete","blur"],["billCountryTrigger","matAutocompleteTrigger"],["matSuffix","",2,"display","flex"],["mat-icon-button","","type","button",3,"click",4,"ngIf"],["mat-icon-button","","type","button",3,"click"],[3,"closed","opened","optionSelected"],["billCountryId","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row wrap","fxLayoutGap","5px 0px grid",2,"width","100%"],["fxFlex","40","fxFlex.lg","40","fxFlex.md","100","fxFlex.sm","100","fxFlex.xs","100"],["matInput","","formControlName","billPostalCode"],["fxFlex","60","fxFlex.lg","60","fxFlex.md","100","fxFlex.sm","100","fxFlex.xs","100"],["matInput","","formControlName","billPhoneNumber"],["matInput","","formControlName","shipAddress","rows","3"],["matInput","","formControlName","shipCity"],["matInput","","formControlName","shipRegion"],["formControlName","shipCountry","matInput","",3,"matAutocomplete","blur"],["shipCountryTrigger","matAutocompleteTrigger"],["shipCountryId","matAutocomplete"],["matInput","","formControlName","shipPostalCode"],["matInput","","formControlName","shipPhoneNumber"],["fxFlex","50","fxFlex.md","100"],["matInput","","formControlName","contactPerson"],["matInput","","formControlName","phoneNumber"],["matInput","","formControlName","webSiteUrl"],["formControlName","currency","matInput","",3,"matAutocomplete","blur"],["currencyTrigger","matAutocompleteTrigger"],["currencyId","matAutocomplete"],["fxLayout","row wrap",1,"f-s-14"],["formControlName","paymentTerm",2,"margin-left","8px",3,"change"],[2,"margin-right","10px",3,"value","checked"],[4,"ngFor","ngForOf"],[3,"value"]],template:function(e,n){if(1&e){const r=t.EpF();t.TgZ(0,"form",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),t._uU(4,"Code"),t.qZA(),t._UZ(5,"input",3),t.YNc(6,G,3,4,"mat-error",4),t.qZA(),t.TgZ(7,"mat-form-field",5)(8,"mat-label"),t._uU(9,"Name"),t.qZA(),t._UZ(10,"input",6),t.YNc(11,X,3,4,"mat-error",4),t.qZA(),t.TgZ(12,"div",7)(13,"div",8)(14,"div"),t._uU(15," Billing Address"),t.qZA(),t.TgZ(16,"mat-form-field",9)(17,"mat-label"),t._uU(18,"Address"),t.qZA(),t._UZ(19,"textarea",10),t.qZA(),t.TgZ(20,"mat-form-field",9)(21,"mat-label"),t._uU(22,"City"),t.qZA(),t._UZ(23,"input",11),t.qZA(),t.TgZ(24,"mat-form-field",9)(25,"mat-label"),t._uU(26,"Region"),t.qZA(),t._UZ(27,"input",12),t.qZA(),t.TgZ(28,"mat-form-field",9)(29,"mat-label"),t._uU(30,"Country"),t.qZA(),t.TgZ(31,"input",13,14),t.NdJ("blur",function(){return n.validateSelected("selectedBillCountry","billCountryId","billCountry",n.form)}),t.qZA(),t.TgZ(33,"div",15),t.YNc(34,K,3,0,"button",16),t.TgZ(35,"button",17),t.NdJ("click",function(s){t.CHM(r);const l=t.MAs(32);return n.openOrClosePanel(s,l,"billCountryObs")}),t.TgZ(36,"mat-icon"),t._uU(37),t.qZA()()(),t.TgZ(38,"mat-autocomplete",18,19),t.NdJ("closed",function(){return n.billCountryArrow="arrow_drop_down"})("opened",function(){return n.billCountryArrow="arrow_drop_up"})("optionSelected",function(s){return n.optionSelected(s,"selectedBillCountry","billCountry",n.form)}),t.YNc(40,tt,3,4,"mat-option",20),t.ALo(41,"async"),t.qZA()(),t.TgZ(42,"div",21)(43,"mat-form-field",22)(44,"mat-label"),t._uU(45,"PostalCode"),t.qZA(),t._UZ(46,"input",23),t.qZA(),t.TgZ(47,"mat-form-field",24)(48,"mat-label"),t._uU(49,"Tel."),t.qZA(),t._UZ(50,"input",25),t.qZA()()()(),t.TgZ(51,"div",7)(52,"div",8)(53,"div"),t._uU(54," Shipping Address"),t.qZA(),t.TgZ(55,"mat-form-field",9)(56,"mat-label"),t._uU(57,"Address"),t.qZA(),t._UZ(58,"textarea",26),t.qZA(),t.TgZ(59,"mat-form-field",9)(60,"mat-label"),t._uU(61,"City"),t.qZA(),t._UZ(62,"input",27),t.qZA(),t.TgZ(63,"mat-form-field",9)(64,"mat-label"),t._uU(65,"Region"),t.qZA(),t._UZ(66,"input",28),t.qZA(),t.TgZ(67,"mat-form-field",9)(68,"mat-label"),t._uU(69,"Country"),t.qZA(),t.TgZ(70,"input",29,30),t.NdJ("blur",function(){return n.validateSelected("selectedShipCountry","shipCountryId","shipCountry",n.form)}),t.qZA(),t.TgZ(72,"div",15),t.YNc(73,et,3,0,"button",16),t.TgZ(74,"button",17),t.NdJ("click",function(s){t.CHM(r);const l=t.MAs(71);return n.openOrClosePanel(s,l,"shipCountryObs")}),t.TgZ(75,"mat-icon"),t._uU(76),t.qZA()()(),t.TgZ(77,"mat-autocomplete",18,31),t.NdJ("closed",function(){return n.shipCountryArrow="arrow_drop_down"})("opened",function(){return n.shipCountryArrow="arrow_drop_up"})("optionSelected",function(s){return n.optionSelected(s,"selectedShipCountry","shipCountry",n.form)}),t.YNc(79,nt,3,4,"mat-option",20),t.ALo(80,"async"),t.qZA()(),t.TgZ(81,"div",21)(82,"mat-form-field",22)(83,"mat-label"),t._uU(84,"PostalCode"),t.qZA(),t._UZ(85,"input",32),t.qZA(),t.TgZ(86,"mat-form-field",24)(87,"mat-label"),t._uU(88,"Tel."),t.qZA(),t._UZ(89,"input",33),t.qZA()()()(),t.TgZ(90,"mat-form-field",34)(91,"mat-label"),t._uU(92,"Contact Person"),t.qZA(),t._UZ(93,"input",35),t.qZA(),t.TgZ(94,"mat-form-field",7)(95,"mat-label"),t._uU(96,"Phone #"),t.qZA(),t._UZ(97,"input",36),t.qZA(),t.TgZ(98,"mat-form-field",7)(99,"mat-label"),t._uU(100,"WebSite"),t.qZA(),t._UZ(101,"input",37),t.qZA(),t.TgZ(102,"mat-form-field",7)(103,"mat-label"),t._uU(104,"Currency"),t.qZA(),t.TgZ(105,"input",38,39),t.NdJ("blur",function(){return n.validateSelected("selectedCurrency","currencyId","currency",n.form)}),t.qZA(),t.TgZ(107,"div",15),t.YNc(108,it,3,0,"button",16),t.TgZ(109,"button",17),t.NdJ("click",function(s){t.CHM(r);const l=t.MAs(106);return n.openOrClosePanel(s,l,"currencyObs")}),t.TgZ(110,"mat-icon"),t._uU(111),t.qZA()()(),t.TgZ(112,"mat-autocomplete",18,40),t.NdJ("closed",function(){return n.currencyArrow="arrow_drop_down"})("opened",function(){return n.currencyArrow="arrow_drop_up"})("optionSelected",function(s){return n.optionSelected(s,"selectedCurrency","currency",n.form)}),t.YNc(114,ot,3,4,"mat-option",20),t.ALo(115,"async"),t.qZA()(),t.TgZ(116,"div",7)(117,"div",41)(118,"mat-label"),t._uU(119,"Payment Term (days)"),t.qZA(),t.TgZ(120,"mat-radio-group",42),t.NdJ("change",function(s){return n.paymentTermChange(s)}),t.TgZ(121,"mat-radio-button",43),t._uU(122,"30"),t.qZA(),t.TgZ(123,"mat-radio-button",43),t._uU(124,"60"),t.qZA(),t.TgZ(125,"mat-radio-button",43),t._uU(126,"90"),t.qZA(),t.TgZ(127,"mat-radio-button",43),t._uU(128,"120"),t.qZA()()()()()()}if(2&e){const r=t.MAs(39),o=t.MAs(78),s=t.MAs(113);let l,b,_;t.Q6J("formGroup",n.form),t.xp6(6),t.Q6J("ngIf",n.form.get("code").invalid&&(n.form.get("code").dirty||n.form.get("code").touched)),t.xp6(5),t.Q6J("ngIf",n.form.get("name").invalid&&(n.form.get("name").dirty||n.form.get("name").touched)),t.xp6(20),t.Q6J("matAutocomplete",r),t.xp6(3),t.Q6J("ngIf",null!==(null==(l=n.form.get("billCountry"))?null:l.value)&&""!==(null==(l=n.form.get("billCountry"))?null:l.value)),t.xp6(3),t.Oqu(n.billCountryArrow),t.xp6(3),t.Q6J("ngForOf",t.lcZ(41,23,n.billCountryAutoComplete$)),t.xp6(30),t.Q6J("matAutocomplete",o),t.xp6(3),t.Q6J("ngIf",null!==(null==(b=n.form.get("shipCountry"))?null:b.value)&&""!==(null==(b=n.form.get("shipCountry"))?null:b.value)),t.xp6(3),t.Oqu(n.shipCountryArrow),t.xp6(3),t.Q6J("ngForOf",t.lcZ(80,25,n.shipCountryAutoComplete$)),t.xp6(26),t.Q6J("matAutocomplete",s),t.xp6(3),t.Q6J("ngIf",null!==(null==(_=n.form.get("currency"))?null:_.value)&&""!==(null==(_=n.form.get("currency"))?null:_.value)),t.xp6(3),t.Oqu(n.currencyArrow),t.xp6(3),t.Q6J("ngForOf",t.lcZ(115,27,n.currencyAutoComplete$)),t.xp6(7),t.Q6J("value",30)("checked",30===n.form.get("paymentTerm").value),t.xp6(2),t.Q6J("value",60)("checked",60===n.form.get("paymentTerm").value),t.xp6(2),t.Q6J("value",90)("checked",90===n.form.get("paymentTerm").value),t.xp6(2),t.Q6J("value",120)("checked",120===n.form.get("paymentTerm").value)}},directives:[c._Y,c.JL,c.sg,f.xw,f.SQ,x.KE,f.yH,x.hX,B.Nt,c.Fj,c.JJ,c.u,d.O5,x.TO,d.sg,L.ZL,x.R9,H.lW,S.Hw,L.XC,Y.ey,J.VQ,J.U0],pipes:[W.h,d.Ov,d.rS],styles:[""]}),g=(0,A.gn)([(0,u.c)()],g);var h=a(4999),rt=a(2003),at=a(2046);function st(i,e){1&i&&(t.TgZ(0,"th",13),t._uU(1," date "),t.qZA())}function lt(i,e){if(1&i&&(t.TgZ(0,"td",14),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const n=e.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,n.date)," ")}}function ut(i,e){1&i&&(t.TgZ(0,"th",15),t._uU(1," Reference Number "),t.qZA())}function mt(i,e){if(1&i&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&i){const n=e.$implicit;t.xp6(1),t.hij(" ",n.referenceNumber," ")}}function ct(i,e){1&i&&(t.TgZ(0,"th",13),t._uU(1," Debit($) "),t.qZA())}function pt(i,e){if(1&i&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&i){const n=e.$implicit;t.xp6(1),t.hij(" ",n.debit," ")}}function dt(i,e){1&i&&(t.TgZ(0,"th",13),t._uU(1," Credit($) "),t.qZA())}function ht(i,e){if(1&i&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&i){const n=e.$implicit;t.xp6(1),t.hij(" ",n.credit," ")}}function ft(i,e){1&i&&(t.TgZ(0,"th",13),t._uU(1," Balance($) "),t.qZA())}function gt(i,e){if(1&i&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&i){const n=e.$implicit;t.xp6(1),t.hij(" ",n.balance," ")}}function Ct(i,e){1&i&&t._UZ(0,"tr",16)}function yt(i,e){1&i&&t._UZ(0,"tr",17)}let y=class{constructor(e,n,r,o,s){this.sessionService=e,this.httpService=n,this.activatedRoute=r,this.actionService=o,this.router=s,this.id="",this.lastRowIndex=-1,this.title="Statement Of Account"}ngOnInit(){this.inquiry=new U.U,this.inquiry.displayedColumns=["date","referenceNumber","debit","credit","balance"],this.dataSource=new h.by,this.initializeToolbar(),this.routerSubscription=this.activatedRoute.queryParams.pipe((0,u.t)(this)).subscribe(e=>{this.id=e.id||"",this.id.length>0&&this.getStatementOfAccount()}),this.actionService.toggleCreateEvent.pipe((0,u.t)(this)).subscribe(e=>this.create(e))}initializeToolbar(){const e=new M.P;e.showNavigatebefore=!0,e.title=this.title,e.navigatebeforeUrl="/invoicemanagement/customer/inquiry",this.actionService.setToolbarSettings(e)}getStatementOfAccount(){let e=new Date((new Date).getFullYear(),0,1),n=(new T.LE).set("date",e.toDateString()).set("customerId",this.id);return this.httpService.HttpGetWithParams(this.sessionService.urlSetting.invoiceManagementWebApiUrl+"analysis/getStatementOfAccount",n).subscribe(o=>{this.getStatementOfAccountSuccess(o)},o=>this.getStatementOfAccountFailed())}getStatementOfAccountSuccess(e){e.entity.length>0&&(e.entity[0].date=null),this.dataSource.data=e.entity,this.lastRowIndex=e.entity.length,this.dataSource._updateChangeSubscription()}getStatementOfAccountFailed(){this.lastRowIndex=0}create(e){this.actionService.toggleDataEvent.emit(null),this.router.navigate(["/invoicemanagement/customer/maintenance"],{queryParams:{id:""}})}};y.\u0275fac=function(e){return new(e||y)(t.Y36(m.mj),t.Y36(m.OE),t.Y36(p.gz),t.Y36(rt.c),t.Y36(p.F0))},y.\u0275cmp=t.Xpm({type:y,selectors:[["app-customer-statement"]],decls:20,vars:6,consts:[[3,"lastRowIndex","title","message"],[1,"matero-table-container"],["mat-table","",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","","style","width:15%",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","referenceNumber"],["mat-header-cell","","style","width:40%",4,"matHeaderCellDef"],["matColumnDef","debit"],["matColumnDef","credit"],["matColumnDef","balance"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",2,"width","15%"],["mat-cell",""],["mat-header-cell","",2,"width","40%"],["mat-header-row",""],["mat-row",""]],template:function(e,n){1&e&&(t._UZ(0,"app-empty-layout",0),t.TgZ(1,"div",1)(2,"table",2),t.ynx(3,3),t.YNc(4,st,2,0,"th",4),t.YNc(5,lt,3,3,"td",5),t.BQk(),t.ynx(6,6),t.YNc(7,ut,2,0,"th",7),t.YNc(8,mt,2,1,"td",5),t.BQk(),t.ynx(9,8),t.YNc(10,ct,2,0,"th",4),t.YNc(11,pt,2,1,"td",5),t.BQk(),t.ynx(12,9),t.YNc(13,dt,2,0,"th",4),t.YNc(14,ht,2,1,"td",5),t.BQk(),t.ynx(15,10),t.YNc(16,ft,2,0,"th",4),t.YNc(17,gt,2,1,"td",5),t.BQk(),t.YNc(18,Ct,1,0,"tr",11),t.YNc(19,yt,1,0,"tr",12),t.qZA()()),2&e&&(t.Q6J("lastRowIndex",n.lastRowIndex)("title","No record found")("message",""),t.xp6(2),t.Q6J("dataSource",n.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",n.inquiry.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.inquiry.displayedColumns))},directives:[at.B,h.BZ,h.w1,h.fO,h.ge,h.Dz,h.ev,h.as,h.XQ,h.nj,h.Gk],pipes:[d.uU],styles:[""]}),y=(0,A.gn)([(0,u.c)()],y);var vt=a(9646),q=a(9224);const bt=function(i){return["text-white",i]};function _t(i,e){if(1&i&&(t.TgZ(0,"div",3)(1,"mat-card",4)(2,"mat-card-title",5),t._uU(3),t.qZA(),t.TgZ(4,"mat-card-content")(5,"p",6)(6,"span",5),t._uU(7,"Total amount "),t.qZA(),t.TgZ(8,"span",7),t._uU(9),t.qZA()(),t._UZ(10,"mat-divider"),t.TgZ(11,"p",8)(12,"mat-icon"),t._uU(13,"arrow_forward"),t.qZA(),t.TgZ(14,"small",9),t._uU(15),t.ALo(16,"date"),t.ALo(17,"date"),t.qZA()()()()()),2&i){const n=e.$implicit,r=e.index,o=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(9,bt,o.color[r])),t.xp6(2),t.hij("Total Invoice Amount as ",n.yearQuarter,""),t.xp6(6),t.hij("",n.amount," "),t.xp6(6),t.AsE("From ",t.lcZ(16,5,n.quarterStart)," To ",t.lcZ(17,7,n.quarterEnd)," ")}}let v=class{constructor(e,n,r,o,s){this.sessionService=e,this.httpService=n,this.activatedRoute=r,this.actionService=o,this.router=s,this.title="Analysis",this.id="",this.color=["bg-cyan-500","bg-blue-500","bg-green-500","bg-teal-500"]}ngOnInit(){this.initializeToolbar(),this.quarterlyInvoice=[],this.routerSubscription=this.activatedRoute.queryParams.pipe((0,u.t)(this)).subscribe(e=>{this.id=e.id||"",this.id.length>0&&this.getQuarterlyInvoice()}),this.actionService.toggleCreateEvent.pipe((0,u.t)(this)).subscribe(e=>this.create(e))}initializeToolbar(){const e=new M.P;e.showNavigatebefore=!0,e.title=this.title,e.navigatebeforeUrl="/invoicemanagement/customer/inquiry",this.actionService.setToolbarSettings(e)}getQuarterlyInvoice(){let e=new Date,n=(new T.LE).set("date",e.toDateString()).set("customerId",this.id);return this.httpService.HttpGetWithParams(this.sessionService.urlSetting.invoiceManagementWebApiUrl+"analysis/getQuarterlyInvoiceByCustomer",n).subscribe(o=>{this.getQuarterlyInvoiceSuccess(o)},o=>(0,vt.of)(null))}getQuarterlyInvoiceSuccess(e){this.quarterlyInvoice=e.entity}create(e){this.actionService.toggleDataEvent.emit(null),this.router.navigate(["/invoicemanagement/customer/maintenance"],{queryParams:{id:""}})}};v.\u0275fac=function(e){return new(e||v)(t.Y36(m.mj),t.Y36(m.OE),t.Y36(p.gz),t.Y36(m.cw),t.Y36(p.F0))},v.\u0275cmp=t.Xpm({type:v,selectors:[["app-customer-analysis"]],decls:3,vars:1,consts:[[2,"padding","16px"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex.gt-md","25","fxFlex.gt-xs","50","fxFlex","100","fxLayout","column",4,"ngFor","ngForOf"],["fxFlex.gt-md","25","fxFlex.gt-xs","50","fxFlex","100","fxLayout","column"],[1,"flexible",3,"ngClass"],[1,"f-s-12","f-w-100"],["matLine","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"f-s-16","f-w-600",2,"margin-left","2px"],["matLine","","fxLayout","row","fxLayoutAlign","start center",2,"padding-top","5px"],[1,"text-muted"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,_t,18,11,"div",2),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("ngForOf",n.quarterlyInvoice))},directives:[f.xw,f.SQ,d.sg,f.yH,q.a8,d.mk,w.oO,q.n5,q.dn,Y.X2,f.Wh,O.d,S.Hw],pipes:[d.uU],styles:[""]}),v=(0,A.gn)([(0,u.c)()],v);const Zt=[{path:"",component:C,children:[{path:"",redirectTo:"maintenance",pathMatch:"full"},{path:"maintenance:/id",component:g},{path:"maintenance",component:g},{path:"customerstatement",component:y},{path:"customeranalysis",component:v}]}];let At=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[p.Bz.forChild(Zt)],p.Bz]}),i})();a(4241);var xt=a(9112),St=a(1470);const Ut=[At,Q.m,E.O,xt.I$,St.yI.forRoot(P.ik)];let Nt=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[d.ez,...Ut]]}),i})()}}]);