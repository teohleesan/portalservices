"use strict";(self.webpackChunkPortal=self.webpackChunkPortal||[]).push([[489],{489:(Ne,V,c)=>{c.r(V),c.d(V,{TenantModule:()=>Le});var p=c(9808),M=c(9826),D=c(655),L=c(449),m=c(4999),k=c(5101),U=c(520),x=c(8966),H=c(13),N=c(4241),_=c(5439),d=c(2062);class B extends k.U{constructor(){super(),this.categoryId=d.i.empty,this.category="",this.currencyId=d.i.empty,this.currency="",this.locationId=d.i.empty,this.location="",this.dateFrom=null,this.dateTo=null,this.fullAddress="",this.customerId=d.i.empty,this.customer="",this.tenantId=d.i.empty,this.tenantNumber="",this.tenantDate=new Date,this.totalPrice=0,this.totalUnit=0,this.totalBedCount=0,this.selectedRooms=new Array,this.exceptedRooms=new Array,this.selection=""}}var rt=c(1555),g=c(4987),S=c(1742),J=c(4652),t=c(5e3),l=c(3075),h=c(3038),f=c(7093),R=c(7423),O=c(5245),C=c(3489),Z=c(6856),$=c(8833),z=c(6744),q=c(1079),E=c(508),j=c(6087),G=c(7067),W=c(7446),F=c(3322);function st(o,n){if(1&o&&(t.TgZ(0,"mat-option",41),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",t.lcZ(2,2,e.description)," ")}}function ct(o,n){if(1&o&&(t.TgZ(0,"mat-option",41),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",t.lcZ(2,2,e.description)," ")}}function lt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"th",42)(1,"mat-checkbox",43),t.NdJ("change",function(a){t.CHM(e);const r=t.oxw(2);return a?r.toggleAllRows():null}),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())}}function mt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",44)(1,"mat-checkbox",45),t.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const s=t.CHM(e).$implicit,u=t.oxw(2);return a?u.selection.toggle(s):null}),t.qZA()()}if(2&o){const e=n.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("checked",i.selection.isSelected(e))}}function ut(o,n){1&o&&(t.TgZ(0,"th",42),t._uU(1," Unit "),t.qZA())}function dt(o,n){if(1&o&&(t.TgZ(0,"td",46),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.fullAddress," ")}}function pt(o,n){1&o&&(t.TgZ(0,"th",42),t._uU(1," Category & Location"),t.qZA())}function ht(o,n){if(1&o&&(t.TgZ(0,"td",47)(1,"div",48)(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA()()()),2&o){const e=n.$implicit;t.xp6(3),t.Oqu(e.category),t.xp6(2),t.Oqu(e.location)}}function _t(o,n){1&o&&(t.TgZ(0,"th",42),t._uU(1,"Rental/Month"),t.qZA())}function gt(o,n){if(1&o&&(t.TgZ(0,"td",47)(1,"div",48)(2,"span"),t._uU(3),t.ALo(4,"currency"),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.qZA()()()),2&o){const e=n.$implicit;t.xp6(3),t.hij("",t.lcZ(4,2,e.price)," "),t.xp6(3),t.hij("",e.bedCount," bed")}}function ft(o,n){1&o&&(t.TgZ(0,"th",42),t._uU(1,"Available Tenant Period"),t.qZA())}function xt(o,n){if(1&o&&(t.TgZ(0,"td",47),t._uU(1),t.ALo(2,"date"),t.ALo(3,"date"),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.AsE(" ",t.lcZ(2,2,e.dateFrom)," - ",t.lcZ(3,4,e.dateTo)," ")}}function vt(o,n){1&o&&t._UZ(0,"tr",49)}function Ct(o,n){1&o&&t._UZ(0,"tr",50)}function yt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"form",9)(2,"div",10)(3,"mat-form-field",11)(4,"mat-label"),t._uU(5,"Enter a date range"),t.qZA(),t.TgZ(6,"mat-date-range-input",12),t._UZ(7,"input",13)(8,"input",14),t.qZA(),t.TgZ(9,"mat-hint"),t._uU(10,"MM/DD/YYYY \u2013 MM/DD/YYYY"),t.qZA(),t._UZ(11,"mat-datepicker-toggle",15)(12,"mat-date-range-picker",null,16),t.qZA(),t.TgZ(14,"mat-form-field",11)(15,"mat-label"),t._uU(16,"Unit"),t.qZA(),t._UZ(17,"input",17),t.qZA(),t.TgZ(18,"mat-form-field",18)(19,"mat-label"),t._uU(20," Category"),t.qZA(),t.TgZ(21,"input",19),t.NdJ("blur",function(){t.CHM(e);const a=t.oxw();return a.validateSelected("selectedCategory","categoryId","category",a.form,"description")}),t.qZA(),t.TgZ(22,"mat-autocomplete",20,21),t.NdJ("optionSelected",function(a){t.CHM(e);const r=t.oxw();return r.optionSelected(a,"selectedCategory","category",r.form,"description")}),t.YNc(24,st,3,4,"mat-option",22),t.ALo(25,"async"),t.qZA()(),t.TgZ(26,"mat-form-field",18)(27,"mat-label"),t._uU(28," Location"),t.qZA(),t.TgZ(29,"input",23),t.NdJ("blur",function(){t.CHM(e);const a=t.oxw();return a.validateSelected("selectedLocation","locationId","location",a.form,"description")}),t.qZA(),t.TgZ(30,"mat-autocomplete",20,24),t.NdJ("optionSelected",function(a){t.CHM(e);const r=t.oxw();return r.optionSelected(a,"selectedLocation","location",r.form,"description")}),t.YNc(32,ct,3,4,"mat-option",22),t.ALo(33,"async"),t.qZA()(),t.TgZ(34,"span",25)(35,"button",26),t.NdJ("click",function(){return t.CHM(e),t.oxw().executeSearch()}),t.TgZ(36,"mat-icon"),t._uU(37,"search"),t.qZA()()()()(),t.TgZ(38,"mat-paginator",27),t.NdJ("page",function(a){return t.CHM(e),t.oxw().onPaginateChange(a)}),t.qZA(),t.TgZ(39,"div",28)(40,"table",29),t.ynx(41,30),t.YNc(42,lt,2,2,"th",31),t.YNc(43,mt,2,1,"td",32),t.BQk(),t.ynx(44,33),t.YNc(45,ut,2,0,"th",31),t.YNc(46,dt,2,1,"td",34),t.BQk(),t.ynx(47,35),t.YNc(48,pt,2,0,"th",31),t.YNc(49,ht,6,2,"td",36),t.BQk(),t.ynx(50,37),t.YNc(51,_t,2,0,"th",31),t.YNc(52,gt,7,4,"td",36),t.BQk(),t.ynx(53,38),t.YNc(54,ft,2,0,"th",31),t.YNc(55,xt,4,6,"td",36),t.BQk(),t.YNc(56,vt,1,0,"tr",39),t.YNc(57,Ct,1,0,"tr",40),t.qZA()()()}if(2&o){const e=t.MAs(13),i=t.MAs(23),a=t.MAs(31),r=t.oxw();t.xp6(1),t.Q6J("formGroup",r.form),t.xp6(5),t.Q6J("rangePicker",e),t.xp6(1),t.Q6J("min",r.minTripDate)("max",r.maxTripDate),t.xp6(1),t.Q6J("min",r.minTripDate)("max",r.maxTripDate),t.xp6(3),t.Q6J("for",e),t.xp6(10),t.Q6J("matAutocomplete",i),t.xp6(3),t.Q6J("ngForOf",t.lcZ(25,21,r.categoryAutoComplete)),t.xp6(5),t.Q6J("matAutocomplete",a),t.xp6(3),t.Q6J("ngForOf",t.lcZ(33,23,r.locationAutoComplete)),t.xp6(3),t.Q6J("disabled",r.form.invalid),t.xp6(3),t.Q6J("length",r.inquiry.totalRows)("showFirstLastButtons",!0)("pageIndex",r.inquiry.currentPageIndex)("pageSize",r.inquiry.pageSize)("pageSizeOptions",r.inquiry.pageSizeOptions),t.xp6(1),t.Q6J("defaultElevation",2),t.xp6(1),t.Q6J("dataSource",r.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",r.inquiry.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.inquiry.displayedColumns)}}function Tt(o,n){1&o&&(t.TgZ(0,"th",62),t._uU(1,"Unit"),t.qZA())}function bt(o,n){if(1&o&&(t.TgZ(0,"td",46),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.fullAddress," ")}}function St(o,n){1&o&&(t.TgZ(0,"th",63),t._uU(1,"Available Tenant Period & Rental"),t.qZA())}function Zt(o,n){if(1&o&&(t.TgZ(0,"td",47)(1,"div",48)(2,"span"),t._uU(3),t.ALo(4,"date"),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"currency"),t.qZA()()()),2&o){const e=n.$implicit;t.xp6(3),t.AsE("",t.xi3(4,4,e.dateFrom,"dd/MM/yyyy")," - ",t.xi3(5,7,e.dateTo,"dd/MM/yyyy"),""),t.xp6(4),t.AsE("",t.lcZ(8,10,e.price),"/",e.bedCount," bed")}}function At(o,n){1&o&&(t.TgZ(0,"th",62),t._uU(1,"Tenant Period & Rental"),t.qZA())}function Mt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",47)(1,"div",64)(2,"mat-form-field")(3,"mat-date-range-input",12)(4,"input",65),t.NdJ("ngModelChange",function(a){return t.CHM(e).$implicit.dateFromSet=a}),t.qZA(),t.TgZ(5,"input",66),t.NdJ("ngModelChange",function(a){return t.CHM(e).$implicit.dateToSet=a}),t.qZA()(),t._UZ(6,"mat-datepicker-toggle",15)(7,"mat-date-range-picker",null,16),t.qZA()()()}if(2&o){const e=n.$implicit,i=t.MAs(8);t.xp6(3),t.Q6J("rangePicker",i),t.xp6(1),t.Q6J("ngModel",e.dateFromSet),t.xp6(1),t.Q6J("ngModel",e.dateToSet),t.xp6(1),t.Q6J("for",i)}}function It(o,n){1&o&&(t.TgZ(0,"th",67),t._uU(1,"Bed Count"),t.qZA())}function wt(o,n){1&o&&(t.TgZ(0,"mat-label"),t._uU(1,"Invalid value"),t.qZA())}const X=function(){return{color:"red"}};function kt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",68)(1,"div",64)(2,"mat-form-field",69),t.YNc(3,wt,2,0,"mat-label",70),t.TgZ(4,"input",71),t.NdJ("ngModelChange",function(a){return t.CHM(e).$implicit.bedCountSet=a}),t.qZA()()()()}if(2&o){const e=n.$implicit;t.xp6(3),t.Q6J("ngIf",e.bedCount<=0),t.xp6(1),t.Q6J("ngModel",e.bedCountSet)("ngStyle",e.bedCount<=0&&t.DdM(3,X))}}function qt(o,n){1&o&&(t.TgZ(0,"th",72),t._uU(1,"Rental/Month"),t.qZA())}function Ft(o,n){1&o&&(t.TgZ(0,"mat-label"),t._uU(1,"Invalid amount"),t.qZA())}function Dt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",68)(1,"div",64)(2,"mat-form-field"),t.YNc(3,Ft,2,0,"mat-label",70),t.TgZ(4,"input",71),t.NdJ("ngModelChange",function(a){return t.CHM(e).$implicit.priceSet=a}),t.qZA()()()()}if(2&o){const e=n.$implicit;t.xp6(3),t.Q6J("ngIf",e.priceSet<=0),t.xp6(1),t.Q6J("ngModel",e.priceSet)("ngStyle",e.priceSet<=0&&t.DdM(3,X))}}function Lt(o,n){1&o&&(t.TgZ(0,"th",67),t._uU(1,"Remove"),t.qZA())}function Ut(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",44)(1,"button",73),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).remove(r)}),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()()}}function Nt(o,n){1&o&&t._UZ(0,"tr",49)}function Jt(o,n){1&o&&t._UZ(0,"tr",50)}function Rt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-paginator",27),t.NdJ("page",function(a){return t.CHM(e),t.oxw().onPaginateChangeCart(a)}),t.qZA(),t.TgZ(1,"div",51)(2,"table",29),t.ynx(3,52),t.YNc(4,Tt,2,0,"th",53),t.YNc(5,bt,2,1,"td",34),t.BQk(),t.ynx(6,38),t.YNc(7,St,2,0,"th",54),t.YNc(8,Zt,9,12,"td",36),t.BQk(),t.ynx(9,55),t.YNc(10,At,2,0,"th",53),t.YNc(11,Mt,9,4,"td",36),t.BQk(),t.ynx(12,56),t.YNc(13,It,2,0,"th",57),t.YNc(14,kt,5,4,"td",58),t.BQk(),t.ynx(15,59),t.YNc(16,qt,2,0,"th",60),t.YNc(17,Dt,5,4,"td",58),t.BQk(),t.ynx(18,61),t.YNc(19,Lt,2,0,"th",57),t.YNc(20,Ut,4,0,"td",32),t.BQk(),t.YNc(21,Nt,1,0,"tr",39),t.YNc(22,Jt,1,0,"tr",40),t.qZA()()}if(2&o){const e=t.oxw();t.Q6J("length",e.selectionInquiry.totalRows)("showFirstLastButtons",!0)("pageIndex",e.selectionInquiry.currentPageIndex)("pageSize",e.selectionInquiry.pageSize)("pageSizeOptions",e.selectionInquiry.pageSizeOptions),t.xp6(1),t.Q6J("defaultElevation",2),t.xp6(1),t.Q6J("dataSource",e.selection.selected),t.xp6(19),t.Q6J("matHeaderRowDef",e.selectionInquiry.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.selectionInquiry.displayedColumns)}}Promise.resolve(null);let v=class{constructor(n,e,i,a,r,s,u,T){this.data=n,this.dialogRef=e,this.fb=i,this.httpService=a,this.sessionService=r,this.toastrService=s,this.lookupService=u,this.reactiveformService=T,this.title="",this.displayedColumns=["fullAddress","dateFrom","dateTo","bedCount","price","actions"],this.dataSource=new m.by,this.selection=new L.Ov(!0,[]),this.isEnquiry=!0,this.categoryAutoComplete=null,this.locationAutoComplete=null,this.customerAutoComplete=null,this.currencyAutoComplete=null,this.selectedCount=null}onKeyUp(){this.ngOnDestroy()}ngOnInit(){this.title="Room Selection for "+this.data.customer+" ("+this.data.tenantNumber+")",this.initializeForm(new B),this.minTripDate=_(S.$.min,S.t.uk).toDate(),this.maxTripDate=_(S.$.max,S.t.uk).toDate(),this.inquiry=new B,this.inquiry.displayedColumns=["select","fullAddress","category","price","dateFrom"],this.inquiry.sortExpression="dueDate",this.selection=new L.Ov(!0,[]),this.dataSource=new m.by,this.selection.isSelected=this.isChecked.bind(this),this.selectionInquiry=new k.U,this.selectionInquiry.displayedColumns=["fullAddress","dateFrom","dateFromSet","bedCountSet","priceSet","actions"]}ngAfterViewInit(){this.initReferences()}ngOnDestroy(){}initializeForm(n){this.form=this.fb.group({fullAddress:[n.fullAddress],dateFrom:[n.dateFrom],dateTo:[n.dateTo],categoryId:[n.categoryId],category:[n.category],locationId:[n.locationId],location:[n.location],selection:this.fb.array([])},{validators:J.O.compareDate("dateFrom","dateTo")})}onPaginateChange(n){this.inquiry.currentPageNumber=n.pageIndex+1,this.inquiry.pageSize=n.pageSize,this.executeSearch()}executeSearch(){this.setDate(),this.httpService.HttpPost(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"tenant/GetVacantRooms",this.inquiry).subscribe(e=>{this.inquirySuccess(e)},e=>this.inquiryFailed(e))}inquirySuccess(n){n.entity.map(e=>{e.dateFromSet=_(_(e.dateFrom).format("YYYY-MM-DD")).toDate(),e.dateToSet=_(_(e.dateTo).format("YYYY-MM-DD")).toDate(),e.priceSet=e.price,e.bedCountSet=e.bedCount}),this.dataSource.data=n.entity,this.dataSource._updateChangeSubscription(),this.inquiry.totalRows=n.totalRows,this.inquiry.totalPages=n.totalPages}inquiryFailed(n){}setDate(){null==this.inquiry.dateFrom&&null==this.inquiry.dateTo?(this.inquiry.dateFrom=_(new Date).utc().startOf("day").toDate(),this.inquiry.dateTo=_(this.inquiry.dateFrom).utc().add(1,"days").toDate()):null==this.inquiry.dateFrom&&null!=this.inquiry.dateTo?(this.inquiry.dateTo=_(this.inquiry.dateTo).utc().startOf("day").toDate(),this.inquiry.dateFrom=_(this.inquiry.dateTo).utc().subtract(1,"days").toDate()):null!=this.inquiry.dateFrom&&null==this.inquiry.dateTo&&(this.inquiry.dateFrom=_(this.inquiry.dateFrom).utc().startOf("day").toDate(),this.inquiry.dateTo=_(this.inquiry.dateFrom).utc().add(1,"days").toDate())}optionSelected(n,e,i,a,r){let s=n.option.value?n.option.value:null;"object"==typeof s&&(this[e]=s,a.controls[i].patchValue(s[r]))}validateSelected(n,e,i,a,r){setTimeout(()=>{this[n]&&this[n][r]===a.controls[i].value?a.controls[e].patchValue(this[n].id):(a.controls[e].patchValue(""),a.controls[i].patchValue(""))},300)}remove(n){let e=this.selection.selected.findIndex(i=>i.roomId===n.roomId);e>-1&&this.selection.deselect(this.selection.selected[e])}onPaginateChangeCart(n){this.selectionInquiry.currentPageNumber=n.pageIndex+1,this.selectionInquiry.pageSize=n.pageSize}clearSelection(){this.dataSource.data.forEach(n=>{}),this.selection.clear()}toggleSelection(n,e){return n?this.selection.toggle(e):null}isAllSelected(){return this.selection.selected.length==this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(n=>this.selection.select(n))}done(){let n=new Array;this.selection.selected.forEach((e,i)=>{e.dateFromSet>e.dateToSet&&n.push("Invalid date range for unit: "+e.fullAddress)}),n.length>0?this.toastrService.ShowErrorMessage("",n):this.dialogRef.close(this.selection.selected)}initReferences(){this.categoryAutoComplete=this.lookupService.autoComplete(this.form,"category",this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"category/GetCategories","description"),this.categoryAutoComplete=this.lookupService.autoComplete(this.form,"location",this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"location/GetLocations","description")}isChecked(n){return!!this.selection.selected.find(i=>i.roomId===n.roomId)}};v.\u0275fac=function(n){return new(n||v)(t.Y36(x.WI),t.Y36(x.so),t.Y36(l.qu),t.Y36(h.OE),t.Y36(h.mj),t.Y36(h._W),t.Y36(h.WO),t.Y36(h.xd))},v.\u0275cmp=t.Xpm({type:v,selectors:[["app-vacant-room-lookup"]],hostBindings:function(n,e){1&n&&t.NdJ("keyup.esc",function(){return e.onKeyUp()},!1,t.evT)},features:[t._Bn([{provide:rt.gx,useValue:{showError:!0}}])],decls:21,vars:8,consts:[["fxLayout","column","fxFlexFill",""],["fxLayout","row","fxLayoutAlign","space-between center","fxFlex","50px"],["mat-icon-button","","mat-dialog-close","","cdkFocusInitial",""],["fxFlex","calc(100% - 100px)"],[4,"ngIf","ngIfElse"],["carts",""],["fxFlex","50px","fxLayout","row","fxLayoutAlign","space-evenly center"],["mat-icon-button","",3,"fxHide","click"],["mat-icon-button","",3,"fxHide","disabled","click"],[3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","10px grid",1,"matero-mat-form-field"],["fxFlex","50","fxFlex.sm","100","fxFlex.md","50"],[3,"rangePicker"],["matStartDate","","matInput","","formControlName","dateFrom","appDatemask","",3,"min","max"],["matEndDate","","formControlName","dateTo","appDatemask","",3,"min","max"],["matSuffix","",3,"for"],["picker",""],["matInput","","formControlName","fullAddress"],["fxFlex","40","fxFlex.sm","100","fxFlex.md","40"],["matInput","","formControlName","category","type","text",3,"matAutocomplete","blur"],[3,"optionSelected"],["categoryId","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","location","type","text",3,"matAutocomplete","blur"],["locationId","matAutocomplete"],["fxFlex","10","fxFlex.sm","100","fxFlex.md","10"],["mat-icon-button","","color","primary","fxFlex","50","fxFlex.sm","100","fxFlex.md","50",3,"disabled","click"],[3,"length","showFirstLastButtons","pageIndex","pageSize","pageSizeOptions","page"],["appMaterialElevation","","raisedElevation","16",1,"matero-table-container","mat-form-field-no-label",3,"defaultElevation"],["mat-table","",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","fullAddress"],["mat-cell","","class","min-w-300",4,"matCellDef"],["matColumnDef","category"],["mat-cell","","class","min-w-200",4,"matCellDef"],["matColumnDef","price"],["matColumnDef","dateFrom"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"value"],["mat-header-cell",""],[3,"checked","indeterminate","change"],["mat-cell",""],[3,"checked","click","change"],["mat-cell","",1,"min-w-300"],["mat-cell","",1,"min-w-200"],["fxLayout","column"],["mat-header-row",""],["mat-row",""],["appMaterialElevation","","raisedElevation","16",1,"matero-table-container",3,"defaultElevation"],["matColumnDef","fullAddress","sticky",""],["mat-header-cell","","style","width: 25%;",4,"matHeaderCellDef"],["mat-header-cell","","style","width: 30%;",4,"matHeaderCellDef"],["matColumnDef","dateFromSet"],["matColumnDef","bedCountSet"],["mat-header-cell","","style","width: 5%;",4,"matHeaderCellDef"],["mat-cell","","class","min-w-80",4,"matCellDef"],["matColumnDef","priceSet"],["mat-header-cell","","style","width: 10%;",4,"matHeaderCellDef"],["matColumnDef","actions","stickyEnd",""],["mat-header-cell","",2,"width","25%"],["mat-header-cell","",2,"width","30%"],[1,"table-mat-form-field-daterange"],["matStartDate","","matInput","","appDatemask","",3,"ngModel","ngModelChange"],["matEndDate","","matInput","","appDatemask","",3,"ngModel","ngModelChange"],["mat-header-cell","",2,"width","5%"],["mat-cell","",1,"min-w-80"],[2,"max-width","80px"],[4,"ngIf"],["matInput","","type","number",3,"ngModel","ngStyle","ngModelChange"],["mat-header-cell","",2,"width","10%"],["mat-icon-button","",3,"click"]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"button",2)(5,"mat-icon"),t._uU(6,"close"),t.qZA()()(),t.TgZ(7,"mat-dialog-content",3),t.YNc(8,yt,58,25,"div",4),t.YNc(9,Rt,23,9,"ng-template",null,5,t.W1O),t.qZA(),t.TgZ(11,"mat-dialog-actions",6)(12,"button",7),t.NdJ("click",function(){return e.isEnquiry=!e.isEnquiry}),t.TgZ(13,"mat-icon"),t._uU(14,"arrow_back"),t.qZA()(),t.TgZ(15,"button",8),t.NdJ("click",function(){return e.isEnquiry=!e.isEnquiry}),t.TgZ(16,"mat-icon"),t._uU(17,"arrow_forward"),t.qZA()(),t.TgZ(18,"button",8),t.NdJ("click",function(){return e.done()}),t.TgZ(19,"mat-icon"),t._uU(20,"done_all"),t.qZA()()()()),2&n){const i=t.MAs(10);t.xp6(3),t.Oqu(e.title),t.xp6(5),t.Q6J("ngIf",e.isEnquiry)("ngIfElse",i),t.xp6(4),t.Q6J("fxHide",e.isEnquiry),t.xp6(3),t.Q6J("fxHide",!e.isEnquiry)("disabled",e.selection.selected.length<=0),t.xp6(3),t.Q6J("fxHide",e.isEnquiry)("disabled",e.selection.selected.length<=0)}},directives:[f.xw,f.s9,f.Wh,f.yH,R.lW,x.ZT,O.Hw,x.xY,p.O5,l._Y,l.JL,l.sg,f.SQ,C.KE,C.hX,Z.wx,Z.zY,$.Nt,l.Fj,l.JJ,l.u,z.v,Z.By,C.bx,Z.nW,C.R9,Z._g,q.ZL,q.XC,p.sg,E.ey,j.NW,G.F,m.BZ,m.w1,m.fO,m.ge,W.oG,m.Dz,m.ev,m.as,m.XQ,m.nj,m.Gk,l.On,l.wV,p.PC,F.Zl,x.H8,F.b8],pipes:[p.Ov,p.rS,p.H9,p.uU],styles:[""]}),v=(0,D.gn)([(0,g.c)()],v);var K=c(9256),Ot=c(825),Et=c(2448),tt=c(3606),Qt=c(2426),Yt=c(7809),Pt=c(2802),Q=c(2638),et=c(4623),w=c(2181),Vt=c(2354);const Ht=["endSnav"],Bt=["startSnav"];function $t(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-list-item",11)(1,"p",12)(2,"mat-checkbox",13),t.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const s=t.CHM(e).$implicit,u=t.oxw();return a?u.selection.toggle(s):null}),t.qZA(),t._UZ(3,"span",5),t.TgZ(4,"a",14),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().get(r)}),t._uU(5),t.qZA()(),t.TgZ(6,"p",15)(7,"span",3)(8,"span"),t._uU(9),t.qZA(),t._UZ(10,"span",5),t.TgZ(11,"span"),t._uU(12),t.ALo(13,"date"),t.qZA()()(),t.TgZ(14,"p",16)(15,"span",3)(16,"span"),t._uU(17),t.ALo(18,"currency"),t.qZA(),t._UZ(19,"span",5),t.TgZ(20,"span")(21,"b"),t._uU(22),t.qZA(),t._uU(23," Units"),t.qZA(),t._UZ(24,"span",5),t.TgZ(25,"span")(26,"button",17)(27,"mat-icon"),t._uU(28,"more_vert"),t.qZA()(),t.TgZ(29,"mat-menu",null,18)(31,"button",19),t.NdJ("click",function(){const a=t.CHM(e),r=a.$implicit,s=a.index;return t.oxw().delete(r,s)}),t.TgZ(32,"mat-icon"),t._uU(33,"delete"),t.qZA(),t.TgZ(34,"span",20),t._uU(35,"delete"),t.qZA()()()()()()()}if(2&o){const e=n.$implicit,i=t.MAs(30),a=t.oxw();t.xp6(2),t.Q6J("checked",a.selection.isSelected(e)),t.xp6(3),t.hij(" ",e.tenantNumber," "),t.xp6(4),t.Oqu(e.customer),t.xp6(3),t.Oqu(t.lcZ(13,7,e.tenantDate)),t.xp6(5),t.hij("Price/Month ",t.lcZ(18,9,e.totalPrice),""),t.xp6(5),t.Oqu(e.totalUnit),t.xp6(4),t.Q6J("matMenuTriggerFor",i)}}let A=class{constructor(n,e,i,a,r,s,u,T,I){this.router=n,this.sessionService=e,this.httpService=i,this.toastrService=a,this.actionService=r,this.matDialog=s,this.activatedRoute=u,this.dialogService=T,this.fileService=I,this.title="Tenant Maintenance",this.openSidebar=!1,this.openStartSidebar=!1,this.mediaMatcher=matchMedia("(max-width : 720px)"),this.id="",this.tiles=[{text:"One",cols:3,rows:1,color:"lightblue"},{text:"Two",cols:1,rows:2,color:"lightgreen"},{text:"Three",cols:1,rows:1,color:"lightpink"},{text:"Four",cols:2,rows:1,color:"#DDBDF1"}]}ngOnInit(){this.inquiry=new k.U,this.inquiry.sortDirection="DESC",this.inquiry.sortExpression="tenantDate",this.initializeToolbar(),this.refereshEventSubscription=this.actionService.toggleRefreshEvent.pipe((0,g.t)(this)).subscribe(n=>this.resetSearch()),this.searchEventSubscription=this.actionService.toggleSearchEvent.pipe((0,g.t)(this)).subscribe(n=>this.search()),this.startSnavEventSubscription=this.actionService.toggleStartSnavEvent.pipe((0,g.t)(this)).subscribe(()=>this.togglestartSnav()),this.reloadListingEventSubscription=this.actionService.toggleReloadListingEvent.pipe((0,g.t)(this)).subscribe(n=>{this.executeSearch()}),this.downloadEventSubscription=this.actionService.toggleDownloadEvent.pipe((0,g.t)(this)).subscribe(n=>this.downloadPanel()),this.dataSource=new m.by,this.selection=new L.Ov(!0,[]),this.activatedRoute.queryParams.pipe((0,g.t)(this)).subscribe(n=>{this.id=n.id||""}),this.selection.changed.pipe((0,g.t)(this)).subscribe(n=>{this.toolbarModel.showDownloadPanel=0!==this.selection.selected.length,this.actionService.setToolbarSettings(this.toolbarModel)}),this.executeSearch()}ngOnDestroy(){}isScreenSmall(){return this.mediaMatcher.matches}initializeToolbar(){this.toolbarModel=new K.P,this.toolbarModel.showReferesh=!0,this.toolbarModel.showSearch=!0,this.toolbarModel.title=this.title,this.actionService.setToolbarSettings(this.toolbarModel)}executeSearch(){this.httpService.HttpPost(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"tenant/inquiry",this.inquiry).subscribe(e=>{this.inquirySuccess(e)},e=>this.inquiryFailed(e))}inquirySuccess(n){this.dataSource.data=n.entity,this.inquiry.totalRows=n.totalRows,this.inquiry.totalPages=n.totalPages,this.dataSource._updateChangeSubscription(),n.entity.length>0&&""==this.id&&this.actionService.toggleGetEvent.emit(n.entity[0].id)}inquiryFailed(n){}onPaginateChange(n){this.inquiry.currentPageNumber=n.pageIndex+1,this.inquiry.pageSize=n.pageSize,this.executeSearch()}sortData(n){this.inquiry.currentPageNumber=1,this.inquiry.sortDirection=n.direction,this.inquiry.sortExpression=n.active,this.executeSearch()}resetSearch(){this.inquiry.filter="",this.inquiry.sortDirection="DESC",this.inquiry.sortExpression="tenantDate",this.executeSearch()}get(n){this.id=n.id,this.actionService.toggleGetEvent.emit(n.id)}delete(n,e){const a="Are you wants to delete this tenant "+n.tenantNumber,r=new x.vA;r.autoFocus=!0,r.data=new H.B("Delete record?",a,"OK","Cancel",!1,null),this.matDialog.open(N.z,r).afterClosed().subscribe(u=>{if(!0===u){const T=(new U.LE).set("id",n.id);this.httpService.HttpDelete(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"tenant/delete",T).subscribe(b=>{this.deleteSuccess(e,b)},b=>this.deleteFailed(b))}})}deleteSuccess(n,e){this.dataSource.data.splice(n,1),this.actionService.toggleGetEvent.emit(0===this.dataSource.data.length?"":this.dataSource.data[0].id),this.dataSource._updateChangeSubscription(),this.toastrService.ShowSuccessMessage(e.returnMessage[0])}deleteFailed(n){}optionsEvent(n){}toggleStartNav(){this.openStartSidebar=this.startSnav.opened}test(){this.openStartSidebar=!this.startSnav.opened}togglestartSnav(){this.startSnav.toggle()}renew(n,e){const i=new x.vA;i.autoFocus=!0,i.data={tenantId:n.tenantId,tenantNumber:n.tenantNumber,action:"renew",customerId:n.customerId,customer:n.customer},i.panelClass="matero-content",this.matDialog.open(v,i).afterClosed().subscribe(r=>{})}isAllSelected(){return this.selection.selected.length==this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(n=>this.selection.select(n))}search(){this.dialogService.open(Ot.g,{data:{searchItems:["Tenant Number","Customer Name","Room Address"]},autoFocus:!0,hasBackdrop:!0,disableClose:!0,panelClass:"search-panel-modal",backdropClass:"backDropClass",position:{top:"108px"}}).afterClosed().subscribe(i=>{i&&(this.inquiry.filters=JSON.stringify({[i.selected]:i.searchValue}),this.executeSearch(),this.inquiry.filters=null)})}downloadPanel(){this.dialogService.open(Et.Y,{data:{format:[{description:"Tenant Listing",name:"tenantListing"},{description:"Tenant",name:"tenant"}]},autoFocus:!0,hasBackdrop:!0,disableClose:!0,panelClass:"search-panel-modal",backdropClass:"backDropClass",width:"250px",position:{top:"108px"}}).afterClosed().subscribe(i=>{i&&this.download(i.render,i.format)})}download(n,e){if(0===this.selection.selected.length)return;let i=this.selection.selected.map(s=>s.id);this.httpService.HttpPost(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"tenant/downloadTenant",JSON.stringify({renderType:n,guids:i,format:e})).subscribe(s=>{this.downloadSuccess(s.entity)},s=>this.downloadFailed(s))}downloadSuccess(n){this.fileService.convertToBlob(n.base64,n.fileName,tt.T[tt.T.base64]).then(e=>{this.fileService.downloadFile(e,n.fileName)})}downloadFailed(n){}};A.\u0275fac=function(n){return new(n||A)(t.Y36(M.F0),t.Y36(h.mj),t.Y36(h.OE),t.Y36(h._W),t.Y36(h.cw),t.Y36(x.uw),t.Y36(M.gz),t.Y36(Qt.x),t.Y36(Yt.I))},A.\u0275cmp=t.Xpm({type:A,selectors:[["app-tenant-layout"]],viewQuery:function(n,e){if(1&n&&(t.Gf(Ht,5),t.Gf(Bt,5)),2&n){let i;t.iGM(i=t.CRH())&&(e.endSnav=i.first),t.iGM(i=t.CRH())&&(e.startSnav=i.first)}},decls:13,vars:10,consts:[[1,"demo-sidenav-container"],["role","navigation",1,"sidenav",3,"opened","mode"],["startSnav",""],["fxLayout","row wrap","fxLayoutAlign","space-between center"],[2,"padding-left","15px","margin-bottom","-50px",3,"checked","indeterminate","change"],["fxFlex",""],[2,"width","350px",3,"length","showFirstLastButtons","pageIndex","pageSize","pageSizeOptions","page"],[1,"sidemenu","m-mat-list"],["class","m-mat-list-item",4,"ngFor","ngForOf"],["role","region",1,"demo-sidenav-content"],[3,"optionsEvent"],[1,"m-mat-list-item"],["matLine","",1,"p-t-16"],[3,"checked","click","change"],[1,"f-s-14","f-w-600",2,"word-wrap","break-word",3,"click"],["matLine","",1,"f-s-12","f-w-100","p-t-8"],["matLine","",1,"f-s-12","f-w-100","p-b-8"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"f-s-12","f-w-100"]],template:function(n,e){1&n&&(t._UZ(0,"app-page-header"),t.TgZ(1,"mat-sidenav-container",0)(2,"mat-sidenav",1,2)(4,"div",3)(5,"mat-checkbox",4),t.NdJ("change",function(a){return a?e.toggleAllRows():null}),t.qZA(),t._UZ(6,"span",5),t.TgZ(7,"mat-paginator",6),t.NdJ("page",function(a){return e.onPaginateChange(a)}),t.qZA()(),t.TgZ(8,"mat-list",7),t.YNc(9,$t,36,11,"mat-list-item",8),t.qZA()(),t.TgZ(10,"mat-sidenav-content",9),t._UZ(11,"router-outlet"),t.TgZ(12,"app-float-button",10),t.NdJ("optionsEvent",function(a){return e.optionsEvent(a)}),t.qZA()()()),2&n&&(t.xp6(2),t.Q6J("opened",!e.isScreenSmall())("mode",e.isScreenSmall()?"over":"side"),t.xp6(3),t.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected()),t.xp6(2),t.Q6J("length",e.inquiry.totalRows)("showFirstLastButtons",!0)("pageIndex",e.inquiry.currentPageIndex)("pageSize",e.inquiry.pageSize)("pageSizeOptions",e.inquiry.pageSizeOptions),t.xp6(2),t.Q6J("ngForOf",e.dataSource.data))},directives:[Pt.q,Q.TM,Q.JX,f.xw,f.Wh,W.oG,f.yH,j.NW,et.i$,p.sg,et.Tg,E.X2,R.lW,w.p6,O.Hw,w.VK,w.OP,Q.Rh,M.lC,Vt.u],pipes:[p.uU,p.H9],styles:[".demo-sidenav-app[_ngcontent-%COMP%]{margin:-16px -16px 0 0}.demo-sidenav-spacer[_ngcontent-%COMP%]{flex:1}mat-sidenav.demo-sidenav-playlist[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.demo-sidenav-playlist-header[_ngcontent-%COMP%]{text-align:center}.text-align-left[_ngcontent-%COMP%] >   figure{justify-content:flex-start!important}.text-align-right[_ngcontent-%COMP%] >   figure{justify-content:flex-end!important}mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px;line-height:18px}@media (max-width: 599px){mat-sidenav.demo-sidenav-playlist[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}}.my-full-screen-dialog[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{max-width:none;width:100vw;height:100vh}.menu-badge[_ngcontent-%COMP%]{margin-left:0;margin-right:5px;font-size:11px;color:#fff;padding:4px}.menu-badge[_ngcontent-%COMP%]{border-radius:10px}.sidemenu[_ngcontent-%COMP%]{width:400px!important}.m-mat-list[_ngcontent-%COMP%]   .m-mat-list-item[_ngcontent-%COMP%]:first-child{border-top:1px solid #e0e0e0}.m-mat-list[_ngcontent-%COMP%]   .m-mat-list-item[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0}",".demo-sidenav-container[_ngcontent-%COMP%]{display:flex;height:calc(100vh - 115px)}.demo-sidenav-content[_ngcontent-%COMP%]{align-self:stretch;width:100%;align-items:center;justify-content:center}.demo-sidenav-container-fixed[_ngcontent-%COMP%]{flex:none}h1.demo-sidenav-app-name[_ngcontent-%COMP%]{margin-left:8px}button.demo-sidenav-close[_ngcontent-%COMP%]{margin:20px}.demo-sidenav-filler[_ngcontent-%COMP%]{margin:100px 20px}.sidemenu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:underline}.sidemenu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .sidemenu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#00f}"]}),A=(0,D.gn)([(0,g.c)()],A);class Y{constructor(){this.id=d.i.empty,this.tenantNumber="",this.customerId=d.i.empty,this.customer="",this.tenantDate=new Date,this.currencyId=d.i.empty,this.currency="",this.totalPrice=0,this.totalUnit=0,this.totalBedCount=0,this.totalActiveUnitCount=0,this.tenantItems=Array()}}var jt=c(8372);class nt{constructor(){this.id=d.i.empty,this.tenantId=d.i.empty,this.lineItemNumber=0,this.roomId=d.i.empty,this.fullAddress="",this.bedCount=0,this.price=0,this.dateFrom=new Date,this.dateTo=new Date,this.totalOccupant=0,this.totalBedCount=0,this.totalPrice=0,this.totalUnit=0}}var ot=c(5518),Gt=c(972),Wt=c(2046),it=c(1470),Xt=c(9285);function Kt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(a){t.CHM(e),t.oxw();const r=t.MAs(9);return t.oxw().clearInput(a,"customer",r)}),t.TgZ(1,"mat-icon"),t._uU(2,"clear"),t.qZA()()}}function te(o,n){if(1&o&&(t.TgZ(0,"mat-option",45),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",t.lcZ(2,2,e.description)," ")}}function ee(o,n){if(1&o&&(t.ynx(0),t._uU(1),t._UZ(2,"br"),t.BQk()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e," ")}}function ne(o,n){if(1&o&&(t.TgZ(0,"mat-error"),t.YNc(1,ee,3,1,"ng-container",46),t.ALo(2,"matError"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,e.form.get("customer").errors,"customer"))}}function oe(o,n){if(1&o&&(t.ynx(0),t._uU(1),t._UZ(2,"br"),t.BQk()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e," ")}}function ie(o,n){if(1&o&&(t.TgZ(0,"mat-error"),t.YNc(1,oe,3,1,"ng-container",46),t.ALo(2,"matError"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,e.form.get("tenantNumber").errors,"tenantNumber"))}}function ae(o,n){if(1&o&&(t.ynx(0),t._uU(1),t._UZ(2,"br"),t.BQk()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e," ")}}function re(o,n){if(1&o&&(t.TgZ(0,"mat-error"),t.YNc(1,ae,3,1,"ng-container",46),t.ALo(2,"matError"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,e.form.get("tenantDate").errors,"tenantDate"))}}function se(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(a){t.CHM(e),t.oxw();const r=t.MAs(37);return t.oxw().clearInput(a,"currency",r)}),t.TgZ(1,"mat-icon"),t._uU(2,"clear"),t.qZA()()}}function ce(o,n){if(1&o&&(t.TgZ(0,"mat-option",45),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",t.lcZ(2,2,e.description)," ")}}function le(o,n){1&o&&(t.TgZ(0,"th",47),t._uU(1,"Unit"),t.qZA())}function me(o,n){if(1&o&&(t.TgZ(0,"td",48)(1,"div",49)(2,"span",50),t._uU(3),t.qZA()()()),2&o){const e=n.$implicit;t.Q6J("formGroup",e),t.xp6(3),t.Oqu(e.get("fullAddress").value)}}function ue(o,n){1&o&&(t.TgZ(0,"th",47),t._uU(1,"Bed"),t.qZA())}function de(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",48)(1,"mat-form-field",51)(2,"input",52),t.NdJ("keyup",function(a){const s=t.CHM(e).$implicit;return t.oxw(2).onItemValueChanges(a,s)}),t.qZA()()()}2&o&&t.Q6J("formGroup",n.$implicit)}function pe(o,n){1&o&&(t.TgZ(0,"th",47),t._uU(1,"Rental/Month"),t.qZA())}function he(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",48)(1,"mat-form-field",53)(2,"input",54),t.NdJ("keyup",function(a){const s=t.CHM(e).$implicit;return t.oxw(2).onItemValueChanges(a,s)}),t.qZA(),t.TgZ(3,"span",55),t._uU(4,"$"),t.qZA()()()}2&o&&t.Q6J("formGroup",n.$implicit)}function _e(o,n){1&o&&(t.TgZ(0,"th",47),t._uU(1,"From"),t.qZA())}const at=function(){return{color:"red"}};function ge(o,n){if(1&o&&(t.TgZ(0,"td",48)(1,"mat-form-field",56),t._UZ(2,"input",57)(3,"mat-datepicker-toggle",19)(4,"mat-datepicker",58,59),t.qZA()()),2&o){const e=n.$implicit,i=n.index,a=t.MAs(5),r=t.oxw(2);t.Q6J("formGroup",e),t.xp6(1),t.Q6J("ngStyle",r.tenantItems.at(i).get("dateFrom").invalid&&(r.tenantItems.at(i).get("dateFrom").dirty||r.tenantItems.at(i).get("dateFrom").touched)&&t.DdM(7,at)),t.xp6(1),t.Q6J("matDatepicker",a)("min",r.minTripDate)("max",r.maxTripDate),t.xp6(1),t.Q6J("for",a),t.xp6(1),t.Q6J("startAt",r.startTripDate)}}function fe(o,n){1&o&&(t.TgZ(0,"th",47),t._uU(1,"To"),t.qZA())}function xe(o,n){if(1&o&&(t.TgZ(0,"td",48)(1,"mat-form-field",56),t._UZ(2,"input",60)(3,"mat-datepicker-toggle",19)(4,"mat-datepicker",58,61),t.qZA()()),2&o){const e=n.$implicit,i=n.index,a=t.MAs(5),r=t.oxw(2);t.Q6J("formGroup",e),t.xp6(1),t.Q6J("ngStyle",r.tenantItems.at(i).get("dateTo").invalid&&(r.tenantItems.at(i).get("dateTo").dirty||r.tenantItems.at(i).get("dateTo").touched)&&t.DdM(7,at)),t.xp6(1),t.Q6J("matDatepicker",a)("min",e.controls.dateFrom.value||r.minTripDate)("max",r.maxTripDate),t.xp6(1),t.Q6J("for",a),t.xp6(1),t.Q6J("startAt",r.startTripDate)}}function ve(o,n){1&o&&(t.TgZ(0,"th",62),t._uU(1,"Actions "),t.qZA())}function Ce(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",66),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(),r=a.index,s=a.$implicit;return t.oxw(2).editLineItem(r,s)}),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Edit"),t.qZA()()}if(2&o){const e=t.oxw().$implicit;t.Q6J("disabled",e.controls.disableEditButton.value)}}function ye(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",66),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(),r=a.index,s=a.$implicit;return t.oxw(2).cancelEditLineItem(r,s)}),t.TgZ(1,"mat-icon"),t._uU(2,"undo"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Cancel"),t.qZA()()}if(2&o){const e=t.oxw().$implicit;t.Q6J("disabled",e.controls.disableCancelButton.value)}}function Te(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",66),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(),r=a.index,s=a.$implicit;return t.oxw(2).updateLineItem(r,s)}),t.TgZ(1,"mat-icon"),t._uU(2,"save"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Save"),t.qZA()()}if(2&o){const e=t.oxw().$implicit;t.Q6J("disabled",e.controls.disableSaveButton.value)}}function be(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",48)(1,"button",63)(2,"mat-icon"),t._uU(3,"more_vert"),t.qZA()(),t.TgZ(4,"mat-menu",null,64),t.YNc(6,Ce,5,1,"button",65),t.YNc(7,ye,5,1,"button",65),t.YNc(8,Te,5,1,"button",65),t.TgZ(9,"button",66),t.NdJ("click",function(){const a=t.CHM(e),r=a.index,s=a.$implicit;return t.oxw(2).deleteLineItem(r,s)}),t.TgZ(10,"mat-icon"),t._uU(11,"delete"),t.qZA(),t.TgZ(12,"span"),t._uU(13,"Delete"),t.qZA()()()()}if(2&o){const e=n.$implicit,i=t.MAs(5),a=t.oxw(2);t.Q6J("formGroup",e),t.xp6(1),t.Q6J("matMenuTriggerFor",i),t.xp6(5),t.Q6J("ngIf",!a.createMode),t.xp6(1),t.Q6J("ngIf",!a.createMode),t.xp6(1),t.Q6J("ngIf",!a.createMode),t.xp6(1),t.Q6J("disabled",e.controls.disableDeleteButton.value&&!a.createMode)}}function Se(o,n){1&o&&t._UZ(0,"tr",67)}function Ze(o,n){1&o&&t._UZ(0,"tr",68)}const Ae=function(o){return{"mat-form-field-disable":o}},P=function(){return{"mat-form-field-disable":!0}};function Me(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"form",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"mat-form-field",6)(6,"mat-label"),t._uU(7,"Company"),t.qZA(),t.TgZ(8,"input",7,8),t.NdJ("blur",function(){t.CHM(e);const a=t.oxw();return a.validateSelected("selectedCustomer","customerId","customer",a.form,"description")}),t.qZA(),t.TgZ(10,"div",9),t.YNc(11,Kt,3,0,"button",10),t.TgZ(12,"button",11),t.NdJ("click",function(a){t.CHM(e);const r=t.MAs(9);return t.oxw().openOrClosePanel(a,r,"customerObs")}),t.TgZ(13,"mat-icon"),t._uU(14),t.qZA()()(),t.TgZ(15,"mat-autocomplete",12,13),t.NdJ("closed",function(){return t.CHM(e),t.oxw().customerArrow="arrow_drop_down"})("opened",function(){return t.CHM(e),t.oxw().customerArrow="arrow_drop_up"})("optionSelected",function(a){t.CHM(e);const r=t.oxw();return r.optionSelected(a,"selectedCustomer","customer",r.form,"description")}),t.YNc(17,te,3,4,"mat-option",14),t.ALo(18,"async"),t.qZA(),t.YNc(19,ne,3,4,"mat-error",1),t.qZA(),t.TgZ(20,"mat-form-field",15)(21,"mat-label"),t._uU(22,"Tenant Number"),t.qZA(),t._UZ(23,"input",16),t.YNc(24,ie,3,4,"mat-error",1),t.qZA(),t.TgZ(25,"mat-form-field",17)(26,"mat-label"),t._uU(27,"Tenant Date"),t.qZA(),t._UZ(28,"input",18)(29,"mat-datepicker-toggle",19)(30,"mat-datepicker",null,20),t.YNc(32,re,3,4,"mat-error",1),t.qZA(),t.TgZ(33,"mat-form-field",17)(34,"mat-label"),t._uU(35," Currency"),t.qZA(),t.TgZ(36,"input",21,22),t.NdJ("blur",function(){t.CHM(e);const a=t.oxw();return a.validateSelected("selectedCurrency","currencyId","currency",a.form,"description")}),t.qZA(),t.TgZ(38,"div",9),t.YNc(39,se,3,0,"button",10),t.TgZ(40,"button",11),t.NdJ("click",function(a){t.CHM(e);const r=t.MAs(37);return t.oxw().openOrClosePanel(a,r,"currencyObs")}),t.TgZ(41,"mat-icon"),t._uU(42),t.qZA()()(),t.TgZ(43,"mat-autocomplete",12,23),t.NdJ("closed",function(){return t.CHM(e),t.oxw().currencyArrow="arrow_drop_down"})("opened",function(){return t.CHM(e),t.oxw().currencyArrow="arrow_drop_up"})("optionSelected",function(a){t.CHM(e);const r=t.oxw();return r.optionSelected(a,"selectedCurrency","currency",r.form,"description")}),t.YNc(45,ce,3,4,"mat-option",14),t.ALo(46,"async"),t.qZA()()()(),t.TgZ(47,"div",24)(48,"div",25)(49,"mat-form-field")(50,"mat-label"),t._uU(51,"Total Price"),t.qZA(),t._UZ(52,"input",26),t.qZA(),t.TgZ(53,"mat-form-field")(54,"mat-label"),t._uU(55,"Total Unit"),t.qZA(),t._UZ(56,"input",26),t.qZA(),t.TgZ(57,"mat-form-field")(58,"mat-label"),t._uU(59,"Total Bed Count"),t.qZA(),t._UZ(60,"input",26),t.qZA()()()()(),t.TgZ(61,"div",27)(62,"div",28)(63,"button",29),t.NdJ("click",function(){return t.CHM(e),t.oxw().insertLineItem()}),t.TgZ(64,"mat-icon"),t._uU(65,"add"),t.qZA()(),t._UZ(66,"span",30),t.qZA()(),t.TgZ(67,"form",31)(68,"div",32)(69,"table",33),t.ynx(70,34),t.YNc(71,le,2,0,"th",35),t.YNc(72,me,4,2,"td",36),t.BQk(),t.ynx(73,37),t.YNc(74,ue,2,0,"th",35),t.YNc(75,de,3,1,"td",36),t.BQk(),t.ynx(76,38),t.YNc(77,pe,2,0,"th",35),t.YNc(78,he,5,1,"td",36),t.BQk(),t.ynx(79,39),t.YNc(80,_e,2,0,"th",35),t.YNc(81,ge,6,8,"td",36),t.BQk(),t.ynx(82,40),t.YNc(83,fe,2,0,"th",35),t.YNc(84,xe,6,8,"td",36),t.BQk(),t.ynx(85,41),t.YNc(86,ve,2,0,"th",42),t.YNc(87,be,14,6,"td",36),t.BQk(),t.YNc(88,Se,1,0,"tr",43),t.YNc(89,Ze,1,0,"tr",44),t.qZA()()()()}if(2&o){const e=t.MAs(16),i=t.MAs(31),a=t.MAs(44),r=t.oxw();let s,u;t.xp6(1),t.Q6J("formGroup",r.form),t.xp6(4),t.ekj("disabled",!r.createMode),t.xp6(3),t.Q6J("matAutocomplete",e)("ngClass",t.VKq(39,Ae,!r.createMode)),t.xp6(3),t.Q6J("ngIf",null!==(null==(s=r.form.get("customer"))?null:s.value)&&""!==(null==(s=r.form.get("customer"))?null:s.value)),t.xp6(3),t.Oqu(r.customerArrow),t.xp6(3),t.Q6J("ngForOf",t.lcZ(18,35,r.customerAutoComplete$)),t.xp6(2),t.Q6J("ngIf",r.form.get("customer").invalid&&(r.form.get("customer").dirty||r.form.get("customer").touched)),t.xp6(5),t.Q6J("ngIf",r.form.get("tenantNumber").invalid&&(r.form.get("tenantNumber").dirty||r.form.get("tenantNumber").touched)),t.xp6(4),t.Q6J("matDatepicker",i),t.xp6(1),t.Q6J("for",i),t.xp6(3),t.Q6J("ngIf",r.form.get("tenantDate").invalid&&(r.form.get("tenantDate").dirty||r.form.get("tenantDate").touched)),t.xp6(4),t.Q6J("matAutocomplete",a),t.xp6(3),t.Q6J("ngIf",null!==(null==(u=r.form.get("currency"))?null:u.value)&&""!==(null==(u=r.form.get("currency"))?null:u.value)),t.xp6(3),t.Oqu(r.currencyArrow),t.xp6(3),t.Q6J("ngForOf",t.lcZ(46,37,r.currencyAutoComplete$)),t.xp6(4),t.ekj("disabled",!0),t.xp6(3),t.Q6J("value",r.totalPrice)("ngClass",t.DdM(41,P)),t.xp6(1),t.ekj("disabled",!0),t.xp6(3),t.Q6J("value",r.totalUnit)("ngClass",t.DdM(42,P)),t.xp6(1),t.ekj("disabled",!0),t.xp6(3),t.Q6J("value",r.totalBedCount)("ngClass",t.DdM(43,P)),t.xp6(3),t.Q6J("disabled",r.form.invalid),t.xp6(4),t.Q6J("formGroup",r.formArray),t.xp6(1),t.Q6J("defaultElevation",2),t.xp6(1),t.Q6J("dataSource",r.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",r.inquiry.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.inquiry.displayedColumns)}}let y=class{constructor(n,e,i,a,r,s,u,T,I,b,Ue){this.fb=n,this.httpService=e,this.sessionService=i,this.router=a,this.reactiveformService=r,this.activatedRoute=s,this.toastrService=u,this.actionService=T,this.lookupService=I,this.itemsService=b,this.dialog=Ue,this.customerAutoComplete$=null,this.currencyAutoComplete$=null,this.selectedCustomer=null,this.selectedCurrency=null,this.id=d.i.empty,this.lastId=d.i.empty,this.lastRowIndex=null,this.title="Tenant Maintenance",this.totalPrice=0,this.totalUnit=0,this.totalBedCount=0}ngOnInit(){this.initialize(),this.initializeToolbar(),this.initializeForm(new Y),this.updateEventSubscription=this.actionService.toggleUpdateEvent.pipe((0,g.t)(this)).subscribe(n=>this.update(n)),this.createNewEventSubscription=this.actionService.toggleCreateEvent.pipe((0,g.t)(this)).subscribe(n=>this.create()),this.getEventSubscription=this.actionService.toggleGetEvent.pipe((0,g.t)(this)).subscribe(n=>{this.lastId=this.id,this.id=n,this.get()}),this.createMode=!0,this.minTripDate=_(S.$.min,S.t.uk).toDate(),this.maxTripDate=_(S.$.max,S.t.uk).toDate()}ngAfterViewInit(){this.form.valueChanges.pipe((0,g.t)(this),(0,jt.b)(500),(0,ot.Lr)()).subscribe(n=>{this.lastId===this.id&&(this.actionService.formDirty=!(!this.form.valid||!this.form.touched&&!this.form.dirty))}),this.initReferences()}initialize(){this.inquiry=new k.U,this.inquiry.displayedColumns=["fullAddress","bedCount","price","dateFrom","dateTo","actions"],this.inquiry.sortDirection="ASC",this.currencyArrow=this.customerArrow="arrow_drop_down",this.customerObs=this.currencyObs=!1}ngOnDestroy(){}get tenantItems(){return this.formArray.get("tenantItems")}initializeForm(n){this.form=this.fb.group({id:[n.id],tenantNumber:[n.tenantNumber,[l.kI.maxLength(50),l.kI.required]],customerId:[n.customerId,l.kI.required],customer:[n.customer,l.kI.required],tenantDate:[n.tenantDate,l.kI.required],currencyId:[n.currencyId,l.kI.required],currency:[n.currency,l.kI.required]}),this.formArray=this.fb.group({tenantItems:this.fb.array([])}),this.dataSource=new m.by(this.tenantItems.controls)}initializeToolbar(){this.toolbarModel=new K.P,this.toolbarModel.showToggleStartSnav=!0,this.toolbarModel.showSave=!0,this.toolbarModel.showReferesh=!0,this.toolbarModel.showSearch=!0,this.toolbarModel.title=this.title,this.actionService.setToolbarSettings(this.toolbarModel)}get(){if(!this.id||0===this.id.length||this.id===d.i.empty)return;const n=(new U.LE).set("id",this.id);this.httpService.HttpGetWithParams(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"tenant/get",n).subscribe(i=>{this.getSuccess(i)},i=>this.getFailed(i))}getSuccess(n){this.reactiveformService.setReactiveFormObject(this.form,n.entity),this.tenantItems.clear(),n.entity.tenantItems.forEach((i,a)=>{this.tenantItems.push(this.addItem(i,!1))}),this.tenantItems.disable({onlySelf:!0,emitEvent:!1}),this.dataSource._updateChangeSubscription(),this.updateTotal(n),this.patchAutoComplete(n.entity),this.toolbarModel.title=this.title.concat(" - ",n.entity.tenantNumber),this.actionService.setToolbarSettings(this.toolbarModel),this.id=n.entity.id,this.actionService.formDirty=!1,this.lastRowIndex=1,this.createMode=!1}getFailed(n){this.lastRowIndex=0}create(){this.id="",this.createMode=!0,this.reactiveformService.setReactiveFormObject(this.form,new Y),this.tenantItems.clear(),this.dataSource=new m.by(this.tenantItems.controls),this.dataSource._updateChangeSubscription(),this.patchAutoComplete(null),this.customerObs=this.currencyObs=!0,this.totalUnit=this.totalBedCount=this.totalPrice=0,this.actionService.toggleDataEvent.emit(null)}update(n){let e=new Y;e=this.reactiveformService.getReactiveFormObject(this.form),e.currency=e.customer=null,e.id=this.id;let i="";i=e.id===d.i.empty||""===e.id?this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"tenant/create":this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"tenant/update",e.tenantItems=this.getItems(e.id),this.httpService.HttpPost(i,e).subscribe(a=>{this.updateSuccess(a)},a=>this.updateFailed(a))}getItems(n){let e=new Array,i=new nt;for(let a=0;a<this.tenantItems.length;a++)i=this.itemsService.getSerialized(this.tenantItems.controls[a].value),(i.tenantId===d.i.empty||0===i.tenantId.length)&&(i.tenantId=n),e.push(i);return e}updateSuccess(n){this.id=n.entity.id,this.tenantItems.clear(),n.entity.tenantItems.forEach(i=>{this.tenantItems.push(this.addItem(i,!1))}),this.dataSource._updateChangeSubscription(),this.tenantItems.disable({onlySelf:!0,emitEvent:!1}),this.updateTotal(n),this.toastrService.ShowSuccessMessage("Record successfully saved."),this.createMode=!1,this.actionService.toggleRefreshEvent.emit()}updateFailed(n){}addItem(n,e){return this.fb.group({id:[n.id],tenantId:[n.tenantId],roomId:[n.roomId],fullAddress:[{value:n.fullAddress,disabled:!0}],bedCount:[{value:n.bedCount,disabled:!e},l.kI.required],price:[{value:n.price,disabled:!e},l.kI.required],dateFrom:[{value:n.dateFrom,disabled:!e},[l.kI.required,J.O.isValidDate()]],dateTo:[{value:n.dateTo,disabled:!e},[J.O.isValidDate(),l.kI.required]],disableEditButton:[e],disableCancelButton:[!e],disableSaveButton:[!e],disableDeleteButton:[e]})}insertLineItem(){const n=new x.vA;n.autoFocus=!0,n.data={id:this.id,tenantNumber:this.form.controls.tenantNumber.value,tenantDate:this.form.controls.tenantDate.value,customerId:this.form.controls.customerId.value,customer:this.form.controls.customer.value,currencyId:this.form.controls.currencyId.value,currency:this.form.controls.currency.value,mode:""==this.id||this.id==d.i.empty?"new":"insertLineItem"},n.height="80%",n.width="80%",this.dialog.open(v,n).afterClosed().subscribe(i=>{if(Array.isArray(i)){let a=!0;i.forEach(r=>{let s=new nt;s.roomId=r.roomId,s.fullAddress=r.fullAddress,s.bedCount=r.bedCountSet,s.price=r.priceSet,s.dateFrom=r.dateFromSet,s.dateTo=r.dateToSet,this.tenantItems.push(this.addItem(s,a))}),this.dataSource._updateChangeSubscription(),this.onItemValueChanges(),this.actionService.formDirty=!0}})}removeLineItem(n,e){this.tenantItems.removeAt(n),this.dataSource._updateChangeSubscription(),this.onItemValueChanges()}editLineItem(n,e){this.createMode||this.form.disable(),this.actionService.formDirty=!1,this.setFormArrayMenuButton(n,!0),this.backUpLineItem=e.value}updateLineItem(n,e){if(this.tenantItems.at(n).invalid)return void this.toastrService.ShowErrorMessage("Invalid input, please try again");let i=this.reactiveformService.getReactiveFormObject(e);i.tenantId=this.form.get("id").value;let a="";a=i.id===d.i.empty||""===i.id||null==i.id?this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"tenant/createItem":this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"tenant/updateItem",this.httpService.HttpPost(a,i).subscribe(r=>{this.updateLineItemSuccess(r,n,e)},r=>this.updateFailed(r))}updateLineItemSuccess(n,e,i){this.tenantItems.at(e).get("id").patchValue(n.entity.id),this.tenantItems.at(e).get("tenantId").patchValue(n.entity.tenantId),this.form.enable(),this.setFormArrayMenuButton(e,!1),this.backUpLineItem=null,this.toastrService.ShowSuccessMessage("Line Item successfully updated."),this.updateTotal(n)}deleteLineItem(n,e){let i=e.controls.id.value,a=e.controls.tenantId.value;if(-1!==n){const r=new x.vA;r.autoFocus=!0,r.data=new H.B("Delete record?","Are you wants to delete this record","OK","Cancel",!1,null),this.dialog.open(N.z,r).afterClosed().subscribe(u=>{if(!0===u){if(i===d.i.empty||""===i)return void this.removeLineItem(n,e);let T=(new U.LE).set("id",i).set("tenantId",a);this.httpService.HttpDelete(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"tenant/deleteItem",T).subscribe(b=>{this.deleteLineItemSuccess(n,b)},b=>this.deleteLineItemFailed(b))}})}}cancelEditLineItem(n,e){this.form.enable(),this.actionService.formDirty=!1,this.backUpLineItem&&this.backUpLineItem.id===e.get("id").value&&(this.reactiveformService.setReactiveFormObject(this.tenantItems.at(n),this.backUpLineItem),this.backUpLineItem=null),this.setFormArrayMenuButton(n,!1);let i=e.get("id").value;(i===d.i.empty||0===i.length)&&this.removeLineItem(n,e)}deleteLineItemSuccess(n,e){this.tenantItems.removeAt(n),this.dataSource._updateChangeSubscription(),this.toastrService.ShowSuccessMessage("Line Item successfully deleted."),this.updateTotal(e)}deleteLineItemFailed(n){}validateSelected(n,e,i,a,r){setTimeout(()=>{this[n]&&this[n][r]===a.controls[i].value?a.controls[e].patchValue(this[n].id):(a.controls[e].patchValue(""),a.controls[i].patchValue(""))},300)}optionSelected(n,e,i,a,r){let s=n.option.value?n.option.value:null;"object"==typeof s&&(this[e]=s,a.controls[i].patchValue(s[r]))}clearInput(n,e,i){n.stopPropagation(),this.form.get(e).patchValue(""),i.openPanel()}openOrClosePanel(n,e,i){n.stopPropagation(),e.panelOpen?e.closePanel():(this.obs(i),e.openPanel())}initReferences(){this.customerAutoComplete$=this.lookupService.autoCompleteSkipOneObs(this.form,"customer",this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"references/GetCustomers","description","customerObs"),this.currencyAutoComplete$=this.lookupService.autoCompleteSkipOneObs(this.form,"currency",this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"references/GetCurrencies","description","currencyObs")}patchAutoComplete(n){if(null===n)return this.selectedCurrency=null,void(this.selectedCustomer=null);this.selectedCustomer={id:n.customerId,description:n.customer},this.selectedCurrency={id:n.currencyId,description:n.currency}}obs(n){(new k.U).sortExpression="description",this[n]||"currencyObs"!==n?!this[n]&&"customerObs"===n&&(this.customerAutoComplete$=this.lookupService.autoCompleteObs(this.form,"customer",this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"references/GetCustomers","description","customerObs")):this.currencyAutoComplete$=this.lookupService.autoCompleteObs(this.form,"currency",this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"references/GetCurrencies","description","currencyObs"),this[n]=!0}setFormArrayMenuButton(n,e){this.tenantItems.disable();const i=e?"enable":"disable";this.tenantItems.at(n)[i]({onlySelf:!0,emitEvent:!1}),this.tenantItems.at(n).get("disableSaveButton").patchValue(!e),this.tenantItems.at(n).get("disableCancelButton").patchValue(!e),this.tenantItems.at(n).get("disableDeleteButton").patchValue(e),this.tenantItems.at(n).get("disableEditButton").patchValue(e)}onItemValueChanges(n,e){let i=0,a=0;this.tenantItems.controls.forEach(r=>{i+=parseInt(r.get("bedCount").value),a+=parseFloat(r.get("price").value)}),this.totalBedCount=i,this.totalPrice=a,this.totalUnit=this.tenantItems.length}updateTotal(n){this.totalUnit=this.tenantItems.length,this.totalBedCount=n.entity.totalBedCount,this.totalPrice=n.entity.totalPrice}expression(){console.log(this.totalBedCount)}};y.\u0275fac=function(n){return new(n||y)(t.Y36(l.qu),t.Y36(h.OE),t.Y36(h.mj),t.Y36(M.F0),t.Y36(h.xd),t.Y36(M.gz),t.Y36(h._W),t.Y36(h.cw),t.Y36(h.WO),t.Y36(Gt.L),t.Y36(x.uw))},y.\u0275cmp=t.Xpm({type:y,selectors:[["app-tenant-maintenance"]],decls:2,vars:4,consts:[[3,"lastRowIndex","title","message"],[4,"ngIf"],[1,"matero-mat-form-field",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","8px 8px grid",2,"width","100%"],["fxFlex","80","fxFlex.md","80","fxFlex.xs","100","fxFlex.sm","100"],["fxLayout","row wrap","fxLayoutGap","5px 0px grid"],["fxFlex","50","fxFlex.md","100","fxFlex.xs","100","fxFlex.sm","100"],["matInput","","formControlName","customer","type","text",3,"matAutocomplete","ngClass","blur"],["customerTrigger","matAutocompleteTrigger"],["matSuffix","",2,"display","flex"],["mat-icon-button","","type","button",3,"click",4,"ngIf"],["mat-icon-button","","type","button",3,"click"],[3,"closed","opened","optionSelected"],["customerId","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","50","fxFlex.md","100","fxFlex.xs","100","fxFlex.sm","100",1,"uppercase"],["matInput","","formControlName","tenantNumber"],["fxFlex","50","fxFlex.md","50","fxFlex.xs","100","fxFlex.sm","100"],["matInput","","formControlName","tenantDate","appDatemask","",3,"matDatepicker"],["matSuffix","",3,"for"],["tenantDate",""],["matInput","","formControlName","currency","type","text",3,"matAutocomplete","blur"],["currencyTrigger","matAutocompleteTrigger"],["currencyId","matAutocomplete"],["fxFlex","20","fxFlex.md","20","fxFlex.xs","100","fxFlex.sm","100"],["fxLayout","column"],["matInput","",3,"value","ngClass"],[1,"matero-group-button"],["fxLayout","row","fxLayoutAlign","start center"],["mat-icon-button","",3,"disabled","click"],["fxFlex","12px"],["autocomplete","off",3,"formGroup"],["formArrayName","tenantItems","appMaterialElevation","","raisedElevation","16",1,"matero-table-container","mat-form-field-no-label",3,"defaultElevation"],["mat-table","",3,"dataSource"],["matColumnDef","fullAddress"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"formGroup",4,"matCellDef"],["matColumnDef","bedCount"],["matColumnDef","price"],["matColumnDef","dateFrom"],["matColumnDef","dateTo"],["matColumnDef","actions"],["mat-header-cell","","style","width:5%",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"value"],[4,"ngFor","ngForOf"],["mat-header-cell",""],["mat-cell","",3,"formGroup"],[1,"min-w-300","m-l-16"],[2,"font-size","13px"],[2,"max-width","100px"],["tabindex","1","matInput","","formControlName","bedCount","type","text","mask","0000",3,"keyup"],[2,"max-width","150px"],["tabindex","2","matInput","","formControlName","price","type","text","mask","separator.2","thousandSeparator",",",3,"keyup"],["matPrefix",""],[2,"max-width","200px",3,"ngStyle"],["matInput","","tabindex","4","formControlName","dateFrom","appDatemask","",3,"matDatepicker","min","max"],[3,"startAt"],["dateFromPicker",""],["matInput","","tabindex","5","formControlName","dateTo","appDatemask","",3,"matDatepicker","min","max"],["dateToPicker",""],["mat-header-cell","",2,"width","5%"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"disabled","click",4,"ngIf"],["mat-menu-item","",3,"disabled","click"],["mat-header-row",""],["mat-row",""]],template:function(n,e){1&n&&(t._UZ(0,"app-empty-layout",0),t.YNc(1,Me,90,44,"div",1)),2&n&&(t.Q6J("lastRowIndex",e.lastRowIndex)("title","No record found")("message","click new button to add record"),t.xp6(1),t.Q6J("ngIf",e.lastRowIndex>0))},directives:[Wt.B,p.O5,l._Y,l.JL,l.sg,f.xw,f.SQ,f.yH,C.KE,C.hX,$.Nt,l.Fj,q.ZL,l.JJ,l.u,p.mk,F.oO,C.R9,R.lW,O.Hw,q.XC,p.sg,E.ey,C.TO,Z.hl,z.v,Z.nW,Z.Mq,f.Wh,l.CE,G.F,m.BZ,m.w1,m.fO,m.ge,m.Dz,m.ev,it.hx,C.qo,p.PC,F.Zl,w.p6,w.VK,w.OP,m.as,m.XQ,m.nj,m.Gk],pipes:[p.Ov,p.rS,Xt.h],styles:[""]}),y=(0,D.gn)([(0,g.c)()],y);const Ie=[{path:"maintenance",component:A,children:[{path:"",component:y,data:{title:"Tenant Maintenance"}},{path:"maintenance/:id",component:y}]}];let we=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[M.Bz.forChild(Ie)],M.Bz]}),o})();var ke=c(224),qe=c(4253),Fe=c(9112);const De=[we,ke.m,qe.O,Fe.I$,it.yI.forRoot(ot.ik)];let Le=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[p.ez,...De]]}),o})()}}]);