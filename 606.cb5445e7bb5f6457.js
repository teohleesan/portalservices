"use strict";(self.webpackChunkPortal=self.webpackChunkPortal||[]).push([[606],{4606:(Le,I,o)=>{o.r(I),o.d(I,{InvoiceManagementModule:()=>He});var y=o(9808),v=o(9826),e=o(5e3),m=o(3038),Q=o(3112);const J=function(){return["description","createOn","createBy","editOn","editBy","actions"]};let q=(()=>{class n{constructor(t){this.sessionService=t,this.inquiryUrl="",this.getUrl="",this.updateUrl="",this.createUrl="",this.deleteUrl="",this.id="id",this.inquiryUrl=this.sessionService.urlSetting.invoiceManagementWebApiUrl+"paymentmethod/inquiry",this.getUrl=this.sessionService.urlSetting.invoiceManagementWebApiUrl+"paymentmethod/get",this.createUrl=this.sessionService.urlSetting.invoiceManagementWebApiUrl+"paymentmethod/create",this.updateUrl=this.sessionService.urlSetting.invoiceManagementWebApiUrl+"paymentmethod/update",this.deleteUrl=this.sessionService.urlSetting.invoiceManagementWebApiUrl+"paymentmethod/delete",this.title="Payment Method Inquiry",this.sortExpression="description",this.sortDirection="ASC",this.validationMessage={description:[{type:"required",message:"description is required"},{type:"minlength",message:"code must be at least 3 characters long"},{type:"maxlength",message:"code cannot be more than 200 characters long"}]},this.mockdata=[{hidden:!0,controlName:"id",label:"ID",controlType:"text",value:"",valueType:"text",editableField:!1,audit:!1},{hidden:!1,controlName:"description",label:"Description",controlType:"text",value:"",valueType:"text",editableField:!0,validators:{required:!0,minlength:5,maxlength:200},audit:!1},{hidden:!1,controlName:"createOn",label:"Create On",value:new Date,controlType:"datepicker",valueType:"text",editableField:!1,audit:!0},{hidden:!1,controlName:"createBy",label:"Create By",value:"",controlType:"text",valueType:"text",editableField:!1,audit:!0},{hidden:!1,controlName:"editOn",label:"Edit On",value:new Date,controlType:"datepicker",valueType:"text",editableField:!1,audit:!0},{hidden:!1,controlName:"editBy",label:"Edit By",value:"",controlType:"text",valueType:"text",editableField:!1,audit:!0},{hidden:!0,controlName:"actions",label:"actions",valueType:"actions",value:"",controlType:"button",editableField:!1,audit:!1}]}ngOnInit(){}action(t){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.mj))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-payment-method-inquiry"]],decls:1,vars:16,consts:[[3,"title","id","displayedColumns","isSearchable","validationMessage","mockdata","isInlineEdit","isAddable","sortExpression","sortDirection","inquiryUrl","getUrl","updateUrl","createUrl","deleteUrl","action"]],template:function(t,i){1&t&&(e.TgZ(0,"app-editable-table",0),e.NdJ("action",function(l){return i.action(l)}),e.qZA()),2&t&&e.Q6J("title",i.title)("id",i.id)("displayedColumns",e.DdM(15,J))("isSearchable",!0)("validationMessage",i.validationMessage)("mockdata",i.mockdata)("isInlineEdit",!1)("isAddable",!0)("sortExpression",i.sortExpression)("sortDirection",i.sortDirection)("inquiryUrl",i.inquiryUrl)("getUrl",i.getUrl)("updateUrl",i.updateUrl)("createUrl",i.createUrl)("deleteUrl",i.deleteUrl)},directives:[Q.k],styles:[""]}),n})();var R=o(2062),H=o(2280),S=o(520),L=o(9646),$=o(2046);let T=(()=>{class n{constructor(t,i){this.sessionService=t,this.httpService=i,this.color=["bg-cyan-500","bg-blue-500","bg-green-500","bg-teal-500"],this.loading=!1,this.lastRowIndex=0}ngOnInit(){this.sessionService.moduleLoadedEvent.emit(H.B.invoice),this.quarterlyInvoice=[]}getQuarterlyInvoice(){let t=new Date,i=(new S.LE).set("date",t.toDateString()).set("customerId",R.i.empty);return this.httpService.HttpGetWithParams(this.sessionService.urlSetting.invoiceManagementWebApiUrl+"analysis/getQuarterlyInvoice",i).subscribe(l=>{this.getQuarterlyInvoiceSuccess(l)},l=>(0,L.of)(null))}getQuarterlyInvoiceSuccess(t){this.quarterlyInvoice=t.entity,this.loading=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.mj),e.Y36(m.OE))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-invoice-dashboard"]],decls:2,vars:3,consts:[[3,"lastRowIndex","title","message"]],template:function(t,i){1&t&&(e.TgZ(0,"section"),e._UZ(1,"app-empty-layout",0),e.qZA()),2&t&&(e.xp6(1),e.Q6J("lastRowIndex",i.lastRowIndex)("title","coming soon!")("message","Work in progress"))},directives:[$.B],styles:[""]}),n})();var D=o(5101),s=o(4999),f=o(8966),b=o(4241),x=o(13),Z=o(9256),_=o(825),A=o(2426),N=o(2802),M=o(6087),U=o(7067),C=o(4847),P=o(7423),g=o(2181),w=o(5245),E=o(2354);function k(n,a){1&n&&(e.TgZ(0,"th",23),e._uU(1,"Code"),e.qZA())}function W(n,a){if(1&n&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.code," ")}}function j(n,a){1&n&&(e.TgZ(0,"th",25),e._uU(1,"Name"),e.qZA())}function V(n,a){if(1&n&&(e.TgZ(0,"td",26),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function K(n,a){1&n&&(e.TgZ(0,"th",27),e._uU(1,"Contact #"),e.qZA())}function X(n,a){if(1&n&&(e.TgZ(0,"td",28),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.phoneNumber," ")}}function G(n,a){1&n&&(e.TgZ(0,"th",29),e._uU(1,"Contact Person"),e.qZA())}function ee(n,a){if(1&n&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.contactPerson," ")}}function te(n,a){1&n&&(e.TgZ(0,"th",31),e._uU(1,"Actions"),e.qZA())}const ne=function(){return["/invoicemanagement/customer/customerstatement"]},O=function(n){return{id:n}},ie=function(){return["/invoicemanagement/customer/customeranalysis"]};function ae(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",32)(1,"button",33)(2,"mat-icon"),e._uU(3,"more_vert"),e.qZA()(),e.TgZ(4,"mat-menu",null,34)(6,"button",35),e.NdJ("click",function(){const r=e.CHM(t),l=r.$implicit,u=r.index;return e.oxw().edit(l,u)}),e.TgZ(7,"mat-icon"),e._uU(8,"edit"),e.qZA(),e.TgZ(9,"span"),e._uU(10,"Edit"),e.qZA()(),e.TgZ(11,"button",35),e.NdJ("click",function(){const r=e.CHM(t),l=r.$implicit,u=r.index;return e.oxw().delete(l,u)}),e.TgZ(12,"mat-icon"),e._uU(13,"delete"),e.qZA(),e.TgZ(14,"span"),e._uU(15,"Remove"),e.qZA()(),e.TgZ(16,"a",36)(17,"mat-icon"),e._uU(18,"payment"),e.qZA(),e.TgZ(19,"span"),e._uU(20,"Statement"),e.qZA()(),e.TgZ(21,"a",36)(22,"mat-icon"),e._uU(23,"bar_chart"),e.qZA(),e.TgZ(24,"span"),e._uU(25,"Analysis"),e.qZA()()()()}if(2&n){const t=a.$implicit,i=e.MAs(5);e.xp6(1),e.Q6J("matMenuTriggerFor",i),e.xp6(15),e.Q6J("routerLink",e.DdM(5,ne))("queryParams",e.VKq(6,O,t.id)),e.xp6(5),e.Q6J("routerLink",e.DdM(8,ie))("queryParams",e.VKq(9,O,t.id))}}function oe(n,a){1&n&&e._UZ(0,"tr",37)}function re(n,a){1&n&&e._UZ(0,"tr",38)}let Y=(()=>{class n{constructor(t,i,r,l,u,c,p){this.router=t,this.sessionService=i,this.httpService=r,this.toastrService=l,this.actionService=u,this.matDialog=c,this.dialogService=p,this.title="Customer Inquiry",this.selectedRowIndex=-1,this.dataSource=new s.by(null),this.actionService.inquiryMode=!0,this.createNewEventSubscription=this.actionService.toggleCreateEvent.subscribe(d=>this.create(d)),this.refereshEventSubscription=this.actionService.toggleRefreshEvent.subscribe(d=>this.executeSearch()),this.searchEventSubscription=this.actionService.toggleSearchEvent.subscribe(d=>this.search())}ngOnInit(){this.inquiry=new D.U,this.inquiry.displayedColumns=["code","name","phoneNumber","contactPerson","actions"],this.lastSearchValue="",this.initializeSearch(),this.initializeToolbar(),this.executeSearch()}ngOnDestroy(){this.refereshEventSubscription.unsubscribe(),this.createNewEventSubscription.unsubscribe(),this.searchEventSubscription.unsubscribe()}initializeSearch(){this.inquiry.sortExpression="name"}initializeToolbar(){const t=new Z.P;t.showReferesh=!0,t.showSearch=!0,t.title=this.title,this.actionService.setToolbarSettings(t)}executeSearch(){this.lastSearchValue=this.inquiry.filter,this.httpService.HttpPost(this.sessionService.urlSetting.invoiceManagementWebApiUrl+"customer/inquiry",this.inquiry).subscribe(i=>{this.inquirySuccess(i)},i=>this.inquiryFailed(i))}inquirySuccess(t){this.dataSource.data=t.entity,this.inquiry.totalRows=t.totalRows,this.inquiry.totalPages=t.totalPages}inquiryFailed(t){}onPaginateChange(t){this.inquiry.currentPageNumber=t.pageIndex+1,this.inquiry.pageSize=t.pageSize,this.executeSearch()}sortData(t){this.inquiry.currentPageNumber=1,this.inquiry.sortDirection=t.direction,this.inquiry.sortExpression=t.active,this.executeSearch()}resetSearch(){this.lastSearchValue="",this.inquiry.filter="",this.initializeSearch(),this.executeSearch()}create(t){this.router.navigate(["/invoicemanagement/customer/maintenance"],{queryParams:{id:""}})}delete(t,i){const r=t.id,l=new f.vA;l.autoFocus=!0,l.data=new x.B("Delete record?","Are you wants to delete this record","OK","Cancel",!1,null),this.matDialog.open(b.z,l).afterClosed().subscribe(c=>{if(!0===c){const p=(new S.LE).set("id",r);this.httpService.HttpDelete(this.sessionService.urlSetting.invoiceManagementWebApiUrl+"customer/delete",p).subscribe(h=>{this.deleteSuccess(h,i)},h=>this.deleteFailed(h))}})}deleteSuccess(t,i){this.dataSource.data.splice(i,1),this.dataSource._updateChangeSubscription(),this.toastrService.ShowSuccessMessage(t.returnMessage[0])}deleteFailed(t){}edit(t,i){this.router.navigate(["/invoicemanagement/customer/maintenance"],{queryParams:{id:t.id}})}optionsEvent(t){}search(){this.dialogService.open(_.g,{data:{searchItems:["Name","Code"]},autoFocus:!0,hasBackdrop:!0,disableClose:!0,panelClass:"search-panel-modal",backdropClass:"backDropClass",position:{top:"108px"}}).afterClosed().subscribe(r=>{r&&(this.inquiry.filters=JSON.stringify({[r.selected]:r.searchValue}),this.executeSearch(),this.inquiry.filters=null)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.F0),e.Y36(m.mj),e.Y36(m.OE),e.Y36(m._W),e.Y36(m.cw),e.Y36(f.uw),e.Y36(A.x))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-customer-inquiry"]],decls:23,vars:15,consts:[[3,"title"],[3,"length","showFirstLastButtons","pageIndex","pageSize","pageSizeOptions","page"],["appMaterialElevation","","raisedElevation","16",1,"matero-table-container",3,"defaultElevation"],["mat-table","","matSort","",3,"dataSource","matSortChange"],["matColumnDef","code","sticky",""],["mat-header-cell","","mat-sort-header","Code",4,"matHeaderCellDef"],["mat-cell","","data-label","Code",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","customer",4,"matHeaderCellDef"],["mat-cell","","data-label","Name",4,"matCellDef"],["matColumnDef","phoneNumber"],["mat-header-cell","","mat-sort-header","phoneNumber",4,"matHeaderCellDef"],["mat-cell","","data-label","Contact #",4,"matCellDef"],["matColumnDef","contactPerson"],["mat-header-cell","","mat-sort-header","contactPerson",4,"matHeaderCellDef"],["mat-cell","","data-label","Contact Person",4,"matCellDef"],["matColumnDef","actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","data-label","Actions",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","showFirstLastButtons","pageSize","pageIndex","pageSizeOptions","page"],[3,"optionsEvent"],["mat-header-cell","","mat-sort-header","Code"],["mat-cell","","data-label","Code"],["mat-header-cell","","mat-sort-header","customer"],["mat-cell","","data-label","Name"],["mat-header-cell","","mat-sort-header","phoneNumber"],["mat-cell","","data-label","Contact #"],["mat-header-cell","","mat-sort-header","contactPerson"],["mat-cell","","data-label","Contact Person"],["mat-header-cell",""],["mat-cell","","data-label","Actions"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"routerLink","queryParams"],["mat-header-row",""],["mat-row",""]],template:function(t,i){1&t&&(e._UZ(0,"app-page-header",0),e.TgZ(1,"mat-paginator",1),e.NdJ("page",function(l){return i.onPaginateChange(l)}),e.qZA(),e.TgZ(2,"div",2)(3,"table",3),e.NdJ("matSortChange",function(l){return i.sortData(l)}),e.ynx(4,4),e.YNc(5,k,2,0,"th",5),e.YNc(6,W,2,1,"td",6),e.BQk(),e.ynx(7,7),e.YNc(8,j,2,0,"th",8),e.YNc(9,V,2,1,"td",9),e.BQk(),e.ynx(10,10),e.YNc(11,K,2,0,"th",11),e.YNc(12,X,2,1,"td",12),e.BQk(),e.ynx(13,13),e.YNc(14,G,2,0,"th",14),e.YNc(15,ee,2,1,"td",15),e.BQk(),e.ynx(16,16),e.YNc(17,te,2,0,"th",17),e.YNc(18,ae,26,11,"td",18),e.BQk(),e.YNc(19,oe,1,0,"tr",19),e.YNc(20,re,1,0,"tr",20),e.qZA()(),e.TgZ(21,"mat-paginator",21),e.NdJ("page",function(l){return i.onPaginateChange(l)}),e.qZA(),e.TgZ(22,"app-float-button",22),e.NdJ("optionsEvent",function(l){return i.optionsEvent(l)}),e.qZA()),2&t&&(e.Q6J("title",i.title),e.xp6(1),e.Q6J("length",i.inquiry.totalRows)("showFirstLastButtons",!0)("pageIndex",i.inquiry.currentPageIndex)("pageSize",i.inquiry.pageSize)("pageSizeOptions",i.inquiry.pageSizeOptions),e.xp6(1),e.Q6J("defaultElevation",2),e.xp6(1),e.Q6J("dataSource",i.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",i.inquiry.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",i.inquiry.displayedColumns),e.xp6(1),e.Q6J("length",i.inquiry.totalRows)("showFirstLastButtons",!0)("pageSize",i.inquiry.pageSize)("pageIndex",i.inquiry.currentPageIndex)("pageSizeOptions",i.inquiry.pageSizeOptions))},directives:[N.q,M.NW,U.F,s.BZ,C.YE,s.w1,s.fO,s.ge,C.nU,s.Dz,s.ev,P.lW,g.p6,w.Hw,g.VK,g.OP,v.yS,s.as,s.XQ,s.nj,s.Gk,E.u],styles:["th.mat-column-customerCode[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .mat-column-customerCode[_ngcontent-%COMP%]{padding-left:8px}th.mat-column-actions[_ngcontent-%COMP%], td.mat-column-actions[_ngcontent-%COMP%]{padding-right:8px}"]}),n})();var le=o(449),se=o(2448),F=o(3606),ce=o(7446),z=o(6688),ue=o(3322);function me(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"th",39)(1,"mat-checkbox",40),e.NdJ("change",function(r){e.CHM(t);const l=e.oxw();return r?l.toggleAllRows():null}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())}}function de(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",41)(1,"mat-checkbox",42),e.NdJ("click",function(r){return e.CHM(t),e.oxw().toggleRecord(r)})("change",function(r){const u=e.CHM(t).$implicit,c=e.oxw();return r?c.selection.toggle(u):null}),e.qZA()()}if(2&n){const t=a.$implicit,i=e.oxw();e.xp6(1),e.Q6J("checked",i.selection.isSelected(t))}}function he(n,a){1&n&&(e.TgZ(0,"th",43),e._uU(1," Customer Code"),e.qZA())}function pe(n,a){if(1&n&&(e.TgZ(0,"td",44),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.customerCode," ")}}function ge(n,a){1&n&&(e.TgZ(0,"th",45),e._uU(1,"Invoice #"),e.qZA())}function ve(n,a){if(1&n&&(e.TgZ(0,"td",46),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.invoiceNumber," ")}}function ye(n,a){1&n&&(e.TgZ(0,"th",47),e._uU(1,"Invoice Date"),e.qZA())}function fe(n,a){if(1&n&&(e.TgZ(0,"td",48),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.invoiceDate)," ")}}function Ce(n,a){1&n&&(e.TgZ(0,"th",49),e._uU(1,"Due Date"),e.qZA())}function Se(n,a){if(1&n&&(e.TgZ(0,"td",50),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.dueDate)," ")}}function be(n,a){1&n&&(e.TgZ(0,"th",51),e._uU(1,"Currency"),e.qZA())}function Ie(n,a){if(1&n&&(e.TgZ(0,"td",52),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.currency)}}function qe(n,a){1&n&&(e.TgZ(0,"th",53),e._uU(1,"Amount"),e.qZA())}function Te(n,a){if(1&n&&(e.TgZ(0,"td",54),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.totalAmount)," ")}}function De(n,a){1&n&&(e.TgZ(0,"th",55),e._uU(1,"Payed Amount"),e.qZA())}function xe(n,a){if(1&n&&(e.TgZ(0,"td",56),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.payedAmount))}}function Ze(n,a){1&n&&(e.TgZ(0,"th",57),e._uU(1,"OutStanding Amount"),e.qZA())}function _e(n,a){if(1&n&&(e.TgZ(0,"td",58),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.outStandingAmount))}}function Ae(n,a){1&n&&(e.TgZ(0,"th",59),e._uU(1,"Days due"),e.qZA())}const Ne=function(n){return{"background-color":n}};function Me(n,a){if(1&n&&(e.TgZ(0,"td",60)(1,"mat-chip-list")(2,"mat-chip",61),e._uU(3),e.qZA()()()),2&n){const t=a.$implicit;e.xp6(2),e.Q6J("ngStyle",e.VKq(2,Ne,t.overDueDays>0?"red":"green")),e.xp6(1),e.Oqu(t.overDueDays)}}function Ue(n,a){1&n&&(e.TgZ(0,"th",39),e._uU(1,"Actions"),e.qZA())}function Pe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",62)(1,"button",63)(2,"mat-icon"),e._uU(3,"more_vert"),e.qZA()(),e.TgZ(4,"mat-menu",null,64)(6,"button",65),e.NdJ("click",function(){const r=e.CHM(t),l=r.$implicit,u=r.index;return e.oxw().edit(l,u)}),e.TgZ(7,"mat-icon"),e._uU(8,"edit"),e.qZA(),e.TgZ(9,"span"),e._uU(10,"Edit"),e.qZA()(),e.TgZ(11,"button",65),e.NdJ("click",function(){const r=e.CHM(t),l=r.$implicit,u=r.index;return e.oxw().delete(l,u)}),e.TgZ(12,"mat-icon"),e._uU(13,"delete"),e.qZA(),e.TgZ(14,"span"),e._uU(15,"Remove"),e.qZA()()()()}if(2&n){const t=e.MAs(5);e.xp6(1),e.Q6J("matMenuTriggerFor",t)}}function we(n,a){1&n&&e._UZ(0,"tr",66)}function Ee(n,a){1&n&&e._UZ(0,"tr",67)}const Oe=[{path:"dashboard",component:T},{path:"reference/paymentmethod",component:q},{path:"customer/inquiry",component:Y},{path:"customer",loadChildren:()=>Promise.all([o.e(470),o.e(51)]).then(o.bind(o,5051)).then(n=>n.CustomerModule),data:{title:"Profile",titleI18n:"profile"}},{path:"invoice/inquiry",component:(()=>{class n{constructor(t,i,r,l,u,c,p,d){this.router=t,this.sessionService=i,this.httpService=r,this.toastrService=l,this.actionService=u,this.dialog=c,this.dialogService=p,this.fileService=d,this.title="Invoices Inquiry",this.badgecolor="red-500",this.selectedRowIndex=-1,this.dataSource=new s.by(null),this.selection=new le.Ov(!0,[]),this.inquiry=new D.U,this.actionService.inquiryMode=!0,this.createNewEventSubscription=this.actionService.toggleCreateEvent.subscribe(h=>this.create(h)),this.refereshEventSubscription=this.actionService.toggleRefreshEvent.subscribe(h=>this.resetSearch()),this.searchEventSubscription=this.actionService.toggleSearchEvent.subscribe(h=>this.search()),this.downloadEventSubscription=this.actionService.toggleDownloadEvent.subscribe(h=>this.downloadPanel())}ngOnInit(){this.inquiry.displayedColumns=["select","customerCode","invoiceNumber","invoiceDate","dueDate","currency","totalAmount","payedAmount","outStandingAmount","overDueDays","actions"],this.initializeSearch(),this.initializeToolbar(),this.executeSearch(),this.selectionModelSubscription=this.selection.changed.subscribe(t=>{this.toolbarModel.showDownloadPanel=0!==this.selection.selected.length,this.actionService.setToolbarSettings(this.toolbarModel)})}ngOnDestroy(){this.refereshEventSubscription.unsubscribe(),this.createNewEventSubscription.unsubscribe(),this.searchEventSubscription.unsubscribe(),this.downloadEventSubscription.unsubscribe(),this.selectionModelSubscription.unsubscribe()}initializeSearch(){this.lastSearchValue="",this.inquiry.sortExpression="invoiceDate"}initializeToolbar(){this.toolbarModel=new Z.P,this.toolbarModel.showReferesh=!0,this.toolbarModel.showSearch=!0,this.toolbarModel.title=this.title,this.actionService.setToolbarSettings(this.toolbarModel)}executeSearch(){this.lastSearchValue=this.inquiry.filter,this.httpService.HttpPost(this.sessionService.urlSetting.invoiceManagementWebApiUrl+"invoice/inquiry",this.inquiry).subscribe(i=>{this.inquirySuccess(i)},i=>this.inquiryFailed(i))}inquirySuccess(t){this.dataSource.data=t.entity,this.inquiry.totalRows=t.totalRows,this.inquiry.totalPages=t.totalPages}inquiryFailed(t){}onPaginateChange(t){this.inquiry.currentPageNumber=t.pageIndex+1,this.inquiry.pageSize=t.pageSize,this.executeSearch()}sortData(t){this.inquiry.currentPageNumber=1,this.inquiry.sortDirection=t.direction,this.inquiry.sortExpression=t.active,this.executeSearch()}resetSearch(){this.lastSearchValue="",this.inquiry.filter="",this.initializeSearch(),this.executeSearch()}edit(t,i){this.router.navigate(["/invoicemanagement/invoice/maintenance"],{queryParams:{id:t.id}})}create(t){this.router.navigate(["/invoicemanagement/invoice/maintenance"],{queryParams:{id:""}})}delete(t,i){if(t.payedAmount>0)return void this.toastrService.ShowWarningMessage("Cannot delete paid invoice.");const r=new f.vA;r.autoFocus=!0,r.data=new x.B("Delete record?","Are you wants to delete this record","OK","Cancel",!1,null),this.dialog.open(b.z,r).afterClosed().subscribe(u=>{if(!0===u){const c=(new S.LE).set("id",t.id);this.httpService.HttpDelete(this.sessionService.urlSetting.invoiceManagementWebApiUrl+"invoice/delete",c).subscribe(d=>{this.deleteSuccess(i)},d=>this.deleteFailed(d))}})}deleteSuccess(t){this.dataSource.data.splice(t,1),this.dataSource._updateChangeSubscription()}deleteFailed(t){}optionsEvent(t){}isAllSelected(){return this.selection.selected.length==this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(t=>this.selection.select(t))}toggleRecord(t){t.stopPropagation()}toggleDownload(){this.toolbarModel.showDownloadPanel=0!==this.selection.selected.length,this.actionService.setToolbarSettings(this.toolbarModel)}search(){this.dialogService.open(_.g,{data:{searchItems:["Invoice Number","Customer Name","Invoice Item"]},autoFocus:!0,hasBackdrop:!0,disableClose:!0,panelClass:"search-panel-modal",backdropClass:"backDropClass",position:{top:"108px"}}).afterClosed().subscribe(r=>{r&&(this.inquiry.filters=JSON.stringify({[r.selected]:r.searchValue}),this.executeSearch(),this.inquiry.filters=null)})}downloadPanel(){this.dialogService.open(se.Y,{data:{format:[{description:"Invoice Listing",name:"invoiceListing"},{description:"Invoice",name:"invoice"}]},autoFocus:!0,hasBackdrop:!0,disableClose:!0,panelClass:"search-panel-modal",backdropClass:"backDropClass",width:"250px",position:{top:"108px"}}).afterClosed().subscribe(r=>{r&&this.download(r.render,r.format)})}download(t,i){if(0===this.selection.selected.length)return;let r=this.selection.selected.map(c=>c.id);this.httpService.HttpPost(this.sessionService.urlSetting.invoiceManagementWebApiUrl+"invoice/downloadInvoice",JSON.stringify({renderType:t,guids:r,format:i})).subscribe(c=>{this.downloadSuccess(c.entity)},c=>this.downloadFailed(c))}downloadSuccess(t){this.fileService.convertToBlob(t.base64,t.fileName,F.T[F.T.base64]).then(i=>{this.fileService.downloadFile(i,t.fileName)})}downloadFailed(t){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.F0),e.Y36(m.mj),e.Y36(m.OE),e.Y36(m._W),e.Y36(m.cw),e.Y36(f.uw),e.Y36(A.x),e.Y36(m.Ip))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-invoice-inquiry"]],decls:41,vars:14,consts:[[3,"length","showFirstLastButtons","pageIndex","pageSize","pageSizeOptions","page"],["appMaterialElevation","","raisedElevation","16",1,"matero-table-container",3,"defaultElevation"],["mat-table","","matSort","",3,"dataSource","matSortChange"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","customerCode","sticky",""],["mat-header-cell","","mat-sort-header","customerCode",4,"matHeaderCellDef"],["mat-cell","","data-label","Customer Code",4,"matCellDef"],["matColumnDef","invoiceNumber"],["mat-header-cell","","mat-sort-header","invoiceNumber",4,"matHeaderCellDef"],["mat-cell","","data-label","Invoice #",4,"matCellDef"],["matColumnDef","invoiceDate"],["mat-header-cell","","mat-sort-header","invoiceDate",4,"matHeaderCellDef"],["mat-cell","","data-label","Invoice Date",4,"matCellDef"],["matColumnDef","dueDate"],["mat-header-cell","","mat-sort-header","dueDate",4,"matHeaderCellDef"],["mat-cell","","data-label","Due Date",4,"matCellDef"],["matColumnDef","currency"],["mat-header-cell","","mat-sort-header","currency",4,"matHeaderCellDef"],["mat-cell","","data-label","Currency",4,"matCellDef"],["matColumnDef","totalAmount"],["mat-header-cell","","mat-sort-header","totalAmount",4,"matHeaderCellDef"],["mat-cell","","data-label","Amount",4,"matCellDef"],["matColumnDef","payedAmount"],["mat-header-cell","","mat-sort-header","payedAmount",4,"matHeaderCellDef"],["mat-cell","","data-label","Payed Amount",4,"matCellDef"],["matColumnDef","outStandingAmount"],["mat-header-cell","","mat-sort-header","outStandingAmount",4,"matHeaderCellDef"],["mat-cell","","data-label","OutStanding Amount",4,"matCellDef"],["matColumnDef","overDueDays"],["mat-header-cell","","mat-sort-header","overDueDays",4,"matHeaderCellDef"],["mat-cell","","data-label","overDueDays",4,"matCellDef"],["matColumnDef","actions","stickyEnd",""],["mat-cell","","data-label","Actions",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","style","cursor: pointer;",4,"matRowDef","matRowDefColumns"],[3,"length","showFirstLastButtons","pageSize","pageIndex","pageSizeOptions","page"],[3,"optionsEvent"],["mat-header-cell",""],[3,"checked","indeterminate","change"],["mat-cell",""],[3,"checked","click","change"],["mat-header-cell","","mat-sort-header","customerCode"],["mat-cell","","data-label","Customer Code"],["mat-header-cell","","mat-sort-header","invoiceNumber"],["mat-cell","","data-label","Invoice #"],["mat-header-cell","","mat-sort-header","invoiceDate"],["mat-cell","","data-label","Invoice Date"],["mat-header-cell","","mat-sort-header","dueDate"],["mat-cell","","data-label","Due Date"],["mat-header-cell","","mat-sort-header","currency"],["mat-cell","","data-label","Currency"],["mat-header-cell","","mat-sort-header","totalAmount"],["mat-cell","","data-label","Amount"],["mat-header-cell","","mat-sort-header","payedAmount"],["mat-cell","","data-label","Payed Amount"],["mat-header-cell","","mat-sort-header","outStandingAmount"],["mat-cell","","data-label","OutStanding Amount"],["mat-header-cell","","mat-sort-header","overDueDays"],["mat-cell","","data-label","overDueDays"],["selected","",3,"ngStyle"],["mat-cell","","data-label","Actions"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",2,"cursor","pointer"]],template:function(t,i){1&t&&(e._UZ(0,"app-page-header"),e.TgZ(1,"mat-paginator",0),e.NdJ("page",function(l){return i.onPaginateChange(l)}),e.qZA(),e.TgZ(2,"div",1)(3,"table",2),e.NdJ("matSortChange",function(l){return i.sortData(l)}),e.ynx(4,3),e.YNc(5,me,2,2,"th",4),e.YNc(6,de,2,1,"td",5),e.BQk(),e.ynx(7,6),e.YNc(8,he,2,0,"th",7),e.YNc(9,pe,2,1,"td",8),e.BQk(),e.ynx(10,9),e.YNc(11,ge,2,0,"th",10),e.YNc(12,ve,2,1,"td",11),e.BQk(),e.ynx(13,12),e.YNc(14,ye,2,0,"th",13),e.YNc(15,fe,3,3,"td",14),e.BQk(),e.ynx(16,15),e.YNc(17,Ce,2,0,"th",16),e.YNc(18,Se,3,3,"td",17),e.BQk(),e.ynx(19,18),e.YNc(20,be,2,0,"th",19),e.YNc(21,Ie,2,1,"td",20),e.BQk(),e.ynx(22,21),e.YNc(23,qe,2,0,"th",22),e.YNc(24,Te,3,3,"td",23),e.BQk(),e.ynx(25,24),e.YNc(26,De,2,0,"th",25),e.YNc(27,xe,3,3,"td",26),e.BQk(),e.ynx(28,27),e.YNc(29,Ze,2,0,"th",28),e.YNc(30,_e,3,3,"td",29),e.BQk(),e.ynx(31,30),e.YNc(32,Ae,2,0,"th",31),e.YNc(33,Me,4,4,"td",32),e.BQk(),e.ynx(34,33),e.YNc(35,Ue,2,0,"th",4),e.YNc(36,Pe,16,1,"td",34),e.BQk(),e.YNc(37,we,1,0,"tr",35),e.YNc(38,Ee,1,0,"tr",36),e.qZA()(),e.TgZ(39,"mat-paginator",37),e.NdJ("page",function(l){return i.onPaginateChange(l)}),e.qZA(),e.TgZ(40,"app-float-button",38),e.NdJ("optionsEvent",function(l){return i.optionsEvent(l)}),e.qZA()),2&t&&(e.xp6(1),e.Q6J("length",i.inquiry.totalRows)("showFirstLastButtons",!0)("pageIndex",i.inquiry.currentPageIndex)("pageSize",i.inquiry.pageSize)("pageSizeOptions",i.inquiry.pageSizeOptions),e.xp6(1),e.Q6J("defaultElevation",2),e.xp6(1),e.Q6J("dataSource",i.dataSource),e.xp6(34),e.Q6J("matHeaderRowDef",i.inquiry.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",i.inquiry.displayedColumns),e.xp6(1),e.Q6J("length",i.inquiry.totalRows)("showFirstLastButtons",!0)("pageSize",i.inquiry.pageSize)("pageIndex",i.inquiry.currentPageIndex)("pageSizeOptions",i.inquiry.pageSizeOptions))},directives:[N.q,M.NW,U.F,s.BZ,C.YE,s.w1,s.fO,s.ge,ce.oG,s.Dz,s.ev,C.nU,z.qn,z.HS,y.PC,ue.Zl,P.lW,g.p6,w.Hw,g.VK,g.OP,s.as,s.XQ,s.nj,s.Gk,E.u],pipes:[y.uU,y.H9],styles:["th.mat-column-actions[_ngcontent-%COMP%], td.mat-column-actions[_ngcontent-%COMP%]{padding-right:8px}th.mat-column-invoiceNumber[_ngcontent-%COMP%], td.mat-column-invoiceNumber[_ngcontent-%COMP%]{padding-left:8px}.mat-column-select[_ngcontent-%COMP%]{overflow:visible;overflow:initial}"]}),n})()},{path:"invoice",loadChildren:()=>Promise.all([o.e(470),o.e(592),o.e(66)]).then(o.bind(o,3066)).then(n=>n.InvoiceModule),data:{title:"Profile",titleI18n:"profile"}},{path:"",loadChildren:()=>Promise.all([o.e(470),o.e(447)]).then(o.bind(o,9447)).then(n=>n.PaymentModule),data:{title:"Profile",titleI18n:"profile"}}];let Ye=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[v.Bz.forChild(Oe)],v.Bz]}),n})();var Fe=o(224),ze=o(4253),Be=o(7524),Qe=o(9112),Je=o(2013);const Re=[Ye,Fe.m,ze.O,y.ez,Be.S,Qe.I$,Je.C];let He=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[...Re]]}),n})()}}]);