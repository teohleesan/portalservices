"use strict";(self.webpackChunkPortal=self.webpackChunkPortal||[]).push([[617],{1617:(Jt,L,s)=>{s.r(L),s.d(L,{UserModule:()=>Yt});var U=s(9808),J=s(224),Q=s(4253),h=s(9826),Z=s(655),N=s(520),c=s(2062),m=s(4987),q=s(4576),t=s(5e3),l=s(3038),_=s(8446),z=s(2802),C=s(7093),H=s(3322),B=s(1824),M=s(7423),F=s(5245),R=s(4623),W=s(4834),j=s(2354);const k=["fileUpload"];function G(n,e){1&n&&t._UZ(0,"div",17)}function V(n,e){if(1&n){const i=t.EpF();t.TgZ(0,"button",18,19),t.NdJ("click",function(){return t.CHM(i),t.oxw().removeImage()}),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}}let g=class{constructor(e,i,a,o,r,f,x,A){this.actionService=e,this.httpService=i,this.appConfigService=a,this.sessionService=o,this.fileService=r,this.activatedRoute=f,this.router=x,this.changeDetectorRef=A,this.fileUploadProgress=null,this.guid=c.i.empty,this.avatar=null,this.entity=null,this.id="",this.name="",this.isMaintanance=!0,this.isNew=!1,this.acceptImage=q.Xp,this.actionService.toggleDataEvent.pipe((0,m.t)(this)).subscribe(p=>{this.update(p)})}ngOnInit(){this.standardAvatar=this.appConfigService.getValue().avatar,this.activatedRoute.queryParams.pipe((0,m.t)(this)).subscribe(r=>{if(this.id=r.id||"",0===this.id.length||this.id===c.i.empty)return this.isMaintanance=this.isNew=!0,void this.router.navigate(["/accountmanagement/user/maintenance"])}),-1!==this.router.parseUrl(this.router.url).root.children[h.eC].segments.join("/").indexOf("accountmanagement/user/account")&&this.id.length>0&&this.id!==c.i.empty&&(this.isMaintanance=this.isNew=!1,this.get())}ngAfterContentChecked(){this.changeDetectorRef.detectChanges()}ngOnDestroy(){}optionsEvent(e){}update(e){this.isNew=!1;let i=e.status;if("new"===i)return this.avatar=this.standardAvatar,this.name="",this.isNew=!0,void(this.id="");this.id=e.id,e.name!==this.name&&(this.name=e.name),"get"===i&&e.avatar!==this.avatar&&(this.avatar=e.avatar)}get(){const e=(new N.LE).set("id",this.id);this.httpService.HttpGetWithParams(this.sessionService.urlSetting.accountManagementWebApiUrl+"user/get",e).subscribe(a=>{this.getSuccess(a)},a=>this.getFailed(a))}getSuccess(e){let i=e.entity.firstName.concat(" ",e.entity.lastName);this.name!==i&&(this.name=i),this.id=e.entity.id,this.avatar=e.entity.base64String?this.fileService.loadImage(e.entity.base64String):this.standardAvatar,this.actionService.file=null,this.actionService.fileMode=""}getFailed(e){}onClick(){if(!this.isMaintanance)return;const e=this.fileUpload.nativeElement;e.onchange=()=>{for(let i=0;i<e.files.length;i++){const a=e.files[i];this.fileService.uploadImage(a).pipe((0,m.t)(this)).subscribe(o=>{o?(this.avatar=o,this.actionService.file=a,this.actionService.fileMode="replace",this.actionService.toggleImageEvent.emit(!0)):this.fileUpload.nativeElement.value=""})}},e.click()}removeImage(){this.actionService.file=null,this.actionService.fileMode="remove",this.avatar=this.standardAvatar,this.actionService.toggleImageEvent.emit(!0)}maintenance(){this.isMaintanance=!0,this.router.navigate(["/accountmanagement/user/maintenance"],{queryParams:{id:this.id}})}setting(){this.isMaintanance=!1,this.router.navigate(["/accountmanagement/user/account"],{queryParams:{id:this.id}})}};g.\u0275fac=function(e){return new(e||g)(t.Y36(l.cw),t.Y36(l.OE),t.Y36(_._),t.Y36(l.mj),t.Y36(l.Ip),t.Y36(h.gz),t.Y36(h.F0),t.Y36(t.sBO))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-user-layout"]],viewQuery:function(e,i){if(1&e&&t.Gf(k,5),2&e){let a;t.iGM(a=t.CRH())&&(i.fileUpload=a.first)}},decls:30,vars:5,consts:[["fxLayout","row wrap","fxLayoutAlign","stretch","ngStyle.gt-xs","height: calc(100% - 50px);"],["fxFlex","20","fxFlex.md","30","fxFlex.sm","33.33","fxFlex.xs","100",2,"background-color","#e8e8e8"],[1,"panel-content"],["fxLayout","column",1,"image-container"],["alt","","appLazyImage","",1,"img-120",3,"src","click"],["type","file","id","fileUpload","name","fileUpload",2,"display","none",3,"accept"],["fileUpload",""],["class","overlay",4,"ngIf"],["class","button","mat-mini-fab","","color","warn",3,"click",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center"],[1,"f-s-16","f-w-600"],[2,"margin-top","10px"],["mat-list-item","",2,"padding","0 20px",3,"click"],[1,"icon-18","m-r-8"],[1,"f-s-14","f-w-100"],["fxFlex","80","fxFlex.md","70","fxFlex.sm","66.67","fxFlex.xs","100"],[3,"optionsEvent"],[1,"overlay"],["mat-mini-fab","","color","warn",1,"button",3,"click"],["deleteBtn",""]],template:function(e,i){1&e&&(t._UZ(0,"app-page-header"),t.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"img",4),t.NdJ("click",function(){return i.onClick()}),t.qZA(),t._UZ(6,"input",5,6),t.YNc(8,G,1,0,"div",7),t.YNc(9,V,4,0,"button",8),t.qZA()(),t.TgZ(10,"div",9)(11,"span",10),t._uU(12),t.qZA()(),t.TgZ(13,"mat-nav-list",11),t._UZ(14,"mat-divider"),t.TgZ(15,"a",12),t.NdJ("click",function(){return i.maintenance()}),t.TgZ(16,"mat-icon",13),t._uU(17,"account_circle"),t.qZA(),t.TgZ(18,"p",14),t._uU(19,"Profile"),t.qZA()(),t._UZ(20,"mat-divider"),t.TgZ(21,"a",12),t.NdJ("click",function(){return i.setting()}),t.TgZ(22,"mat-icon",13),t._uU(23,"settings"),t.qZA(),t.TgZ(24,"p",14),t._uU(25,"Access company"),t.qZA()(),t._UZ(26,"mat-divider"),t.qZA()(),t.TgZ(27,"div",15),t._UZ(28,"router-outlet"),t.qZA()(),t.TgZ(29,"app-float-button",16),t.NdJ("optionsEvent",function(o){return i.optionsEvent(o)}),t.qZA()),2&e&&(t.xp6(5),t.Q6J("src",i.avatar,t.LSH),t.xp6(1),t.Q6J("accept",i.acceptImage),t.xp6(2),t.Q6J("ngIf",i.isMaintanance),t.xp6(1),t.Q6J("ngIf",i.isMaintanance),t.xp6(3),t.Oqu(i.name))},directives:[z.q,C.xw,C.Wh,H.Zl,C.yH,B.$,U.O5,M.lW,F.Hw,R.Hk,W.d,R.Tg,h.lC,j.u],styles:[""]}),g=(0,Z.gn)([(0,m.c)()],g);var Y=s(3606),P=s(5518),u=s(3075),$=s(8372);class I{constructor(){this.id=c.i.empty,this.userName="",this.email="",this.firstName="",this.lastName="",this.dateLastLogin=null,this.dateTerminated=null,this.password="",this.passwordConfirmation="",this.base64String=null,this.file=null,this.clientURI="",this.userAccounts=new Array}}var D=s(9256),X=s(5439),b=s(8966),T=s(3489),K=s(8833),w=s(6856),tt=s(6744),et=s(9285);function it(n,e){if(1&n&&(t.ynx(0),t._uU(1),t._UZ(2,"br"),t.BQk()),2&n){const i=e.$implicit;t.xp6(1),t.hij(" ",i," ")}}function nt(n,e){if(1&n&&(t.TgZ(0,"mat-error"),t.YNc(1,it,3,1,"ng-container",8),t.ALo(2,"matError"),t.qZA()),2&n){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,i.form.get("userName").errors,"userName"))}}function at(n,e){if(1&n&&(t.ynx(0),t._uU(1),t._UZ(2,"br"),t.BQk()),2&n){const i=e.$implicit;t.xp6(1),t.hij(" ",i," ")}}function st(n,e){if(1&n&&(t.TgZ(0,"mat-error"),t.YNc(1,at,3,1,"ng-container",8),t.ALo(2,"matError"),t.qZA()),2&n){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,i.form.get("firstName").errors,"firstName"))}}function ot(n,e){if(1&n&&(t.ynx(0),t._uU(1),t._UZ(2,"br"),t.BQk()),2&n){const i=e.$implicit;t.xp6(1),t.hij(" ",i," ")}}function rt(n,e){if(1&n&&(t.TgZ(0,"mat-error"),t.YNc(1,ot,3,1,"ng-container",8),t.ALo(2,"matError"),t.qZA()),2&n){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,i.form.get("lastName").errors,"lastName"))}}function ct(n,e){if(1&n&&(t.TgZ(0,"mat-form-field",2)(1,"mat-label"),t._uU(2,"Date Termination"),t.qZA(),t._UZ(3,"input",9)(4,"mat-datepicker-toggle",10)(5,"mat-datepicker",null,11),t.qZA()),2&n){const i=t.MAs(6);t.xp6(3),t.Q6J("matDatepicker",i),t.xp6(1),t.Q6J("for",i)}}function lt(n,e){1&n&&(t.TgZ(0,"mat-form-field",2)(1,"mat-label"),t._uU(2,"Last Login Date"),t.qZA(),t._UZ(3,"input",12),t.qZA())}let v=class{constructor(e,i,a,o,r,f,x,A,p,Pt,Dt,Ot){this.fb=e,this.httpService=i,this.sessionService=a,this.router=o,this.activatedRoute=r,this.toastrService=f,this.fileService=x,this.dialog=A,this.actionService=p,this.reactiveformService=Pt,this.datePipe=Dt,this.appConfigService=Ot,this.title="User Profile Maintenance",this.createMode=!0,this.id=""}ngOnInit(){this.initializeForm(new I),this.initializeToolbar(),this.routerSubscription=this.activatedRoute.queryParams.subscribe(e=>{this.id=e.id||"",this.id.length>0&&this.id!==c.i.empty&&this.get()}),this.form.valueChanges.pipe((0,m.t)(this),(0,$.b)(500),(0,P.Lr)()).subscribe(e=>{this.actionService.formDirty=!(!this.form.valid||!this.form.touched&&!this.form.dirty)}),this.toggleImageEvent=this.actionService.toggleImageEvent.pipe((0,m.t)(this)).subscribe(e=>{36===this.id.length&&this.id!==c.i.empty&&(this.actionService.formDirty=!0)})}ngOnDestroy(){this.routerSubscription.unsubscribe(),this.updateEventSubscription.unsubscribe(),this.createNewEventSubscription.unsubscribe(),this.getEventSubscription.unsubscribe(),this.downloadEventSubscription.unsubscribe()}initializeForm(e){this.form=this.fb.group({id:[e.id],userName:[e.userName,[u.kI.required,u.kI.email,u.kI.maxLength(200)]],firstName:[e.firstName,[u.kI.required,u.kI.maxLength(200)]],lastName:[e.lastName,[u.kI.maxLength(200)]],dateLastLogin:[{value:e.dateLastLogin,disabled:!0}],dateTerminated:[e.dateTerminated]})}initializeToolbar(){const e=new D.P;e.showNavigatebefore=!0,e.showSave=!0,e.showDownload=!0,e.title=this.title,e.navigatebeforeUrl="/accountmanagement/user/inquiry",this.actionService.setToolbarSettings(e),this.updateEventSubscription=this.actionService.toggleUpdateEvent.subscribe(i=>this.update(i)),this.createNewEventSubscription=this.actionService.toggleCreateEvent.subscribe(i=>this.create(i)),this.getEventSubscription=this.actionService.toggleGetEvent.subscribe(i=>{this.id=i,this.get()}),this.downloadEventSubscription=this.actionService.toggleDownloadEvent.subscribe(i=>{this.download(i)})}get(){if(!this.id||0===this.id.length||this.id===c.i.empty)return;const e=(new N.LE).set("id",this.id);this.httpService.HttpGetWithParams(this.sessionService.urlSetting.accountManagementWebApiUrl+"user/get",e).subscribe(a=>{this.getSuccess(a)},a=>this.showError(a))}getSuccess(e){this.id=e.entity.id,this.reactiveformService.setReactiveFormObject(this.form,e.entity),this.form.patchValue({dateLastLogin:this.datePipe.transform(this.form.controls.dateLastLogin.value,"medium")}),this.createMode=!1;let i={status:"get",id:e.entity.id,name:e.entity.firstName.concat(" ",e.entity.lastName),avatar:e.entity.base64String?this.fileService.loadImage(e.entity.base64String):this.appConfigService.getValue().avatar};this.actionService.toggleDataEvent.emit(i),this.actionService.file=null,this.actionService.fileMode=""}showError(e){}create(e){this.id="",this.createMode=!0,this.reactiveformService.setValueReactiveFormObject(this.form,new I),this.actionService.toggleDataEvent.emit({status:"new"}),this.actionService.file=null,this.actionService.fileMode=""}update(e){let i=new I;i=this.reactiveformService.getReactiveFormObject(this.form);let a=this.sessionService.urlSetting.accountManagementWebApiUrl;a+=this.id&&0!==this.id.length&&this.id!==c.i.empty?"user/update":"user/create";const o=new FormData;this.actionService.file&&o.append("file",this.actionService.file),o.append("model",JSON.stringify(i)),o.append("mode",this.actionService.fileMode),this.httpService.HttpFormData(a,o).subscribe(r=>{this.updateSuccess(r)},r=>this.updateFailed(r))}updateSuccess(e){this.form.get("id").patchValue(e.entity.id),this.id=e.entity.id,this.createMode=!1,this.toastrService.ShowSuccessMessage(e.returnMessage[0]);let i=this.form.get("firstName").value,a=this.form.get("lastName").value,o=i.concat(" ",a);this.actionService.toggleDataEvent.emit({status:"update",id:e.entity.id,name:o,avatar:null}),this.actionService.file=null,this.actionService.fileMode=""}updateFailed(e){}download(e){if(!this.id||0===this.id.length||this.id===c.i.empty)return;const i=(new N.LE).set("id",this.id).set("renderType",e);this.httpService.HttpGetWithParams(this.sessionService.urlSetting.accountManagementWebApiUrl+"user/downloadUserProfile",i).subscribe(o=>{this.downloadSuccess(o.entity)},o=>this.showError(o))}downloadSuccess(e){this.fileService.convertToBlob(e.base64,e.fileName,Y.T[Y.T.base64]).then(i=>{this.fileService.downloadFile(i,e.fileName)})}expression(){let e=X(this.form.get("dateTerminated").value).toDate();this.httpService.HttpPost(this.sessionService.urlSetting.accountManagementWebApiUrl+"user/test",e).subscribe(a=>{},a=>this.showError(a))}};v.\u0275fac=function(e){return new(e||v)(t.Y36(u.qu),t.Y36(l.OE),t.Y36(l.mj),t.Y36(h.F0),t.Y36(h.gz),t.Y36(l._W),t.Y36(l.Ip),t.Y36(b.uw),t.Y36(l.cw),t.Y36(l.xd),t.Y36(U.uU),t.Y36(_._))},v.\u0275cmp=t.Xpm({type:v,selectors:[["app-user-profile"]],features:[t._Bn([U.uU])],decls:19,vars:6,consts:[[3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","16px 0 grid",1,"matero-mat-form-field"],["fxFlex","50","fxFlex.lt-md","100"],["matInput","","placeholder","user name","formControlName","userName","type","text"],[4,"ngIf"],["matInput","","placeholder","first name","formControlName","firstName","type","text"],["matInput","","placeholder","last name","formControlName","lastName","type","text"],["fxFlex","50","fxFlex.lt-md","100",4,"ngIf"],[4,"ngFor","ngForOf"],["matInput","","placeholder","date termination","formControlName","dateTerminated","appDatemask","",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["matInput","","formControlName","dateLastLogin","appDatemask",""]],template:function(e,i){1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),t._uU(4,"Email Address"),t.qZA(),t._UZ(5,"input",3),t.YNc(6,nt,3,4,"mat-error",4),t.qZA(),t.TgZ(7,"mat-form-field",2)(8,"mat-label"),t._uU(9,"First Name"),t.qZA(),t._UZ(10,"input",5),t.YNc(11,st,3,4,"mat-error",4),t.qZA(),t.TgZ(12,"mat-form-field",2)(13,"mat-label"),t._uU(14,"Last Name"),t.qZA(),t._UZ(15,"input",6),t.YNc(16,rt,3,4,"mat-error",4),t.qZA(),t.YNc(17,ct,7,2,"mat-form-field",7),t.YNc(18,lt,4,0,"mat-form-field",7),t.qZA()()),2&e&&(t.Q6J("formGroup",i.form),t.xp6(6),t.Q6J("ngIf",i.form.get("userName").invalid&&(i.form.get("userName").dirty||i.form.get("userName").touched)),t.xp6(5),t.Q6J("ngIf",i.form.get("firstName").invalid&&(i.form.get("firstName").dirty||i.form.get("firstName").touched)),t.xp6(5),t.Q6J("ngIf",i.form.get("lastName").invalid&&(i.form.get("lastName").dirty||i.form.get("lastName").touched)),t.xp6(1),t.Q6J("ngIf",!i.createMode),t.xp6(1),t.Q6J("ngIf",!i.createMode))},directives:[u._Y,u.JL,u.sg,C.xw,C.SQ,T.KE,C.yH,T.hX,K.Nt,u.Fj,u.JJ,u.u,U.O5,T.TO,U.sg,w.hl,tt.v,w.nW,T.R9,w.Mq],pipes:[et.h],styles:[""]}),v=(0,Z.gn)([(0,m.c)()],v);class ut{constructor(){this.id=c.i.empty,this.userId=c.i.empty,this.accountId=c.i.empty,this.user="",this.account="",this.defaultAccount=!1,this.userAccountRoles=new Array,this.roles="",this.role="",this.isSystemAdmin=!1,this.actions=""}}var mt=s(13),ht=s(4241),O=s(3223),dt=s(5101);class ft extends dt.U{constructor(){super(),this.id=c.i.empty,this.userId=c.i.empty,this.accountId=c.i.empty,this.entity=new Array}}var d=s(4999),pt=s(2046),gt=s(6087),vt=s(2368),St=s(7207),E=s(2181);function yt(n,e){1&n&&(t.TgZ(0,"th",15),t._uU(1," Account"),t.qZA())}function xt(n,e){if(1&n&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&n){const i=e.$implicit;t.xp6(1),t.hij(" ",i.account," ")}}function Ut(n,e){1&n&&(t.TgZ(0,"th",15),t._uU(1," Roles"),t.qZA())}function At(n,e){if(1&n&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&n){const i=e.$implicit;t.xp6(1),t.hij(" ",i.role," ")}}function Ct(n,e){1&n&&(t.TgZ(0,"th",15),t._uU(1," System Admin"),t.qZA())}function bt(n,e){if(1&n&&(t.TgZ(0,"td",16),t._UZ(1,"mat-slide-toggle",17),t.qZA()),2&n){const i=e.$implicit;t.xp6(1),t.Q6J("checked",i.isSystemAdmin)}}function Zt(n,e){1&n&&(t.TgZ(0,"th",18),t._uU(1,"Actions"),t.qZA())}function Nt(n,e){if(1&n){const i=t.EpF();t.TgZ(0,"td",19)(1,"button",20)(2,"mat-icon"),t._uU(3,"more_vert"),t.qZA()(),t.TgZ(4,"mat-menu",null,21)(6,"button",22),t.NdJ("click",function(){const o=t.CHM(i),r=o.$implicit,f=o.index;return t.oxw(2).delete(r,f)}),t.TgZ(7,"mat-icon"),t._uU(8,"delete"),t.qZA(),t.TgZ(9,"span"),t._uU(10,"Remove"),t.qZA()()()()}if(2&n){const i=t.MAs(5);t.xp6(1),t.Q6J("matMenuTriggerFor",i)}}function Tt(n,e){1&n&&t._UZ(0,"tr",23)}function It(n,e){1&n&&t._UZ(0,"tr",24)}function wt(n,e){if(1&n){const i=t.EpF();t.TgZ(0,"div")(1,"mat-paginator",2),t.NdJ("page",function(o){return t.CHM(i),t.oxw().onPaginateChange(o)}),t.qZA(),t.TgZ(2,"div",3)(3,"table",4),t.ynx(4,5),t.YNc(5,yt,2,0,"th",6),t.YNc(6,xt,2,1,"td",7),t.BQk(),t.ynx(7,8),t.YNc(8,Ut,2,0,"th",6),t.YNc(9,At,2,1,"td",7),t.BQk(),t.ynx(10,9),t.YNc(11,Ct,2,0,"th",6),t.YNc(12,bt,2,1,"td",7),t.BQk(),t.ynx(13,10),t.YNc(14,Zt,2,0,"th",11),t.YNc(15,Nt,11,1,"td",12),t.BQk(),t.YNc(16,Tt,1,0,"tr",13),t.YNc(17,It,1,0,"tr",14),t.qZA()(),t.TgZ(18,"mat-paginator",2),t.NdJ("page",function(o){return t.CHM(i),t.oxw().onPaginateChange(o)}),t.qZA()()}if(2&n){const i=t.oxw();t.xp6(1),t.Q6J("length",i.inquiry.totalRows)("pageIndex",i.inquiry.currentPageIndex)("pageSize",i.inquiry.pageSize)("pageSizeOptions",i.inquiry.pageSizeOptions),t.xp6(2),t.Q6J("dataSource",i.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",i.inquiry.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.inquiry.displayedColumns),t.xp6(1),t.Q6J("length",i.inquiry.totalRows)("showFirstLastButtons",!0)("pageIndex",i.inquiry.currentPageIndex)("pageSize",i.inquiry.pageSize)("pageSizeOptions",i.inquiry.pageSizeOptions)}}let S=class{constructor(e,i,a,o,r,f,x,A){this.router=e,this.activatedRoute=i,this.sessionService=a,this.httpService=o,this.toastrService=r,this.actionService=f,this.fileService=x,this.dialog=A,this.title="User Account & Role",this.addingUserAccount=!1,this.dataSource=new d.by,this.selectedRowIndex=-1,this.lastRowIndex=1,this.color="bg-cyan-500",this.id="",this.initializeToolbar(),this.initializeSearch(),this.createEventSubscription=this.actionService.toggleCreateEvent.pipe((0,m.t)(this)).subscribe(p=>this.create(p)),this.refereshEventSubscription=this.actionService.toggleRefreshEvent.pipe((0,m.t)(this)).subscribe(p=>this.executeSearch())}ngOnInit(){this.routerSubscription=this.activatedRoute.queryParams.pipe((0,m.t)(this)).subscribe(e=>{this.id=e.id||"",this.id.length>0&&this.id!==c.i.empty&&this.executeSearch()})}ngOnDestroy(){}initializeSearch(){this.inquiry=new ft,this.inquiry.sortDirection="ASC",this.inquiry.sortExpression="account",this.inquiry.displayedColumns=["account","role","isSystemAdmin","actions"]}initializeToolbar(){const e=new D.P;e.showNavigatebefore=!0,e.showReferesh=!0,e.title=this.title,e.navigatebeforeUrl="/accountmanagement/user/inquiry",this.actionService.setToolbarSettings(e)}executeSearch(){0!=this.id.length&&this.id!==c.i.empty&&(this.lastSearchValue=this.inquiry.filter,this.inquiry.userId=this.id,this.httpService.HttpPost(this.sessionService.urlSetting.accountManagementWebApiUrl+"user/UserAccountRolesInquiry",this.inquiry).subscribe(i=>{this.inquirySuccess(i)},i=>this.showError(i)))}inquirySuccess(e){this.inquiry.totalRows=e.totalRows,this.inquiry.totalPages=e.totalPages,this.lastRowIndex=this.inquiry.totalRows,this.dataSource.data=e.entity,this.dataSource._updateChangeSubscription()}create(e){if(0===this.id.length||this.id===c.i.empty)return;let i={userId:this.id};const a=new b.vA;a.autoFocus=!0,a.data=i,a.minWidth="70%",a.minHeight="60%",this.dialog.open(O.e,a).afterClosed().subscribe(r=>{r&&this.executeSearch()})}delete(e,i){const a=`Are you want to delete this ${e.role} for ${e.account}`,o=new b.vA;o.autoFocus=!0,o.data=new mt.B("Delete record?",a,"OK","Cancel",!1,null),this.dialog.open(ht.z,o).afterClosed().subscribe(f=>{if(!0===f){const x=(new N.LE).set("id",e.id);this.httpService.HttpDelete(this.sessionService.urlSetting.accountManagementWebApiUrl+"user/deleteUserAccountRole",x).subscribe(p=>{this.showSuccess(p),this.executeSearch()},p=>{this.showError(p)})}})}editItem(e,i){let a=new ut;a.id=e.id,a.userId=this.id,a.accountId=e.accountId,a.account=e.account,a.actions=i;const o=new b.vA;o.autoFocus=!0,o.data=a,o.minWidth="90%",o.minHeight="60%",this.dialog.open(O.e,o).afterClosed().subscribe(f=>{f&&this.executeSearch()})}onPaginateChange(e){this.inquiry.currentPageNumber=e.pageIndex+1,this.inquiry.pageSize=e.pageSize,this.executeSearch()}sortData(e){this.inquiry.currentPageNumber=1,this.inquiry.sortDirection=e.direction,this.inquiry.sortExpression=e.active,this.executeSearch()}resetSearch(e){this.lastSearchValue="",this.dataSource.filter="",this.initializeSearch(),this.executeSearch()}showSuccess(e){}showError(e){}};S.\u0275fac=function(e){return new(e||S)(t.Y36(h.F0),t.Y36(h.gz),t.Y36(l.mj),t.Y36(l.OE),t.Y36(l._W),t.Y36(l.cw),t.Y36(l.Ip),t.Y36(b.uw))},S.\u0275cmp=t.Xpm({type:S,selectors:[["app-user-account"]],decls:2,vars:4,consts:[[3,"lastRowIndex","title","message"],[4,"ngIf"],[3,"length","showFirstLastButtons","pageIndex","pageSize","pageSizeOptions","page"],[1,"metero-container"],["mat-table","",3,"dataSource"],["matColumnDef","account","sticky",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","role"],["matColumnDef","isSystemAdmin"],["matColumnDef","actions","stickyEnd",""],["mat-header-cell","","class","w-100",4,"matHeaderCellDef"],["mat-cell","","data-label","Actions",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["color","accent","appClickStoppropagation","",3,"checked"],["mat-header-cell","",1,"w-100"],["mat-cell","","data-label","Actions"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,i){1&e&&(t._UZ(0,"app-empty-layout",0),t.YNc(1,wt,19,12,"div",1)),2&e&&(t.Q6J("lastRowIndex",i.lastRowIndex)("title","No record found")("message","click new button to add record"),t.xp6(1),t.Q6J("ngIf",i.lastRowIndex>0))},directives:[pt.B,U.O5,gt.NW,d.BZ,d.w1,d.fO,d.ge,d.Dz,d.ev,vt.Rr,St.W,M.lW,E.p6,F.Hw,E.VK,E.OP,d.as,d.XQ,d.nj,d.Gk],styles:[""]}),S=(0,Z.gn)([(0,m.c)()],S);var Et=s(9646);let y=class{constructor(e,i,a){this.router=e,this.sessionService=i,this.httpService=a,this.id_token="",this.access_token="",this.error=""}resolve(e,i){return(0,Et.of)(null)}};y.\u0275fac=function(e){return new(e||y)(t.LFG(h.gz),t.LFG(l.mj),t.LFG(l.OE))},y.\u0275prov=t.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y=(0,Z.gn)([(0,m.c)()],y);const Lt=[{path:"",component:g,children:[{path:"maintenance",component:v,data:{title:"User Profile"},resolve:{test:y}},{path:"account",component:S,data:{title:"User Account"}}]}];let _t=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[h.Bz.forChild(Lt)],h.Bz]}),n})();var Mt=s(1470),Ft=s(9112);const Rt=[U.ez,_t,J.m,Q.O,Ft.I$,Mt.yI.forRoot(P.ik)];let Yt=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[...Rt]]}),n})()}}]);