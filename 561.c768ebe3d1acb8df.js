"use strict";(self.webpackChunkPortal=self.webpackChunkPortal||[]).push([[561],{4561:(It,tt,c)=>{c.r(tt),c.d(tt,{DormitoryManagementModule:()=>fn});var T=c(655),H=c(13),_=c(8966),Z=c(520),m=c(3075),u=c(4999),M=c(6087),et=c(449),f=c(4987),k=c(5101),V=c(9256),Ot=c(1787),j=c(9439),G=c(4241),t=c(5e3),p=c(3038),P=c(9826),X=c(2802),h=c(9808),g=c(7093),D=c(7423),A=c(5245),it=c(4847),nt=c(7446),st=c(7238),b=c(2181),v=c(3489),K=c(8833),Ft=c(6945),Mt=c(9285);const kt=["fileUpload"];function Pt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"th",32)(1,"mat-checkbox",33),t.NdJ("change",function(a){t.CHM(e);const r=t.oxw(2);return a?r.toggleAllRows():null}),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())}}function Dt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",34)(1,"mat-checkbox",35),t.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const s=t.CHM(e).$implicit,l=t.oxw(2);return a?l.selection.toggle(s):null}),t.qZA()()}if(2&n){const e=i.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("checked",o.selection.isSelected(e))}}function Nt(n,i){1&n&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"create by")," "))}function Et(n,i){if(1&n&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.createBy," ")}}function Lt(n,i){1&n&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"create on")," "))}function Jt(n,i){if(1&n&&(t.TgZ(0,"td",34),t._uU(1),t.ALo(2,"datetime"),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.createOn)," ")}}function Yt(n,i){1&n&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"description")," "))}function Qt(n,i){if(1&n&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.description," ")}}function Rt(n,i){1&n&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"is proceed")," "))}function Ht(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"Processed"),t.qZA())}function Bt(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"Pending"),t.qZA())}function zt(n,i){if(1&n&&(t.TgZ(0,"td",34),t.YNc(1,Ht,2,0,"span",40),t.YNc(2,Bt,2,0,"span",40),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("ngIf",e.isProceed),t.xp6(1),t.Q6J("ngIf",!e.isProceed)}}function jt(n,i){1&n&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"total Upload")," "))}function Wt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",34)(1,"button",42),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).getPersonalUploadFile(r)}),t._uU(2),t.qZA()()}if(2&n){const e=i.$implicit;t.xp6(1),t.Q6J("disabled",0===e.totalUpload)("matTooltipDisabled",0===e.totalUpload),t.xp6(1),t.hij(" ",e.totalUpload," ")}}function $t(n,i){1&n&&(t.TgZ(0,"th",43),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Total Success")," "))}function Vt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",34)(1,"button",44),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).getPersonalUploadRecordInfo(r,"success")}),t._uU(2),t.qZA()()}if(2&n){const e=i.$implicit;t.xp6(1),t.Q6J("disabled",0===e.totalSuccess)("matTooltipDisabled",0===e.totalSuccess),t.xp6(1),t.hij(" ",e.totalSuccess," ")}}function Gt(n,i){1&n&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Total Failed")," "))}function Xt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",34)(1,"button",46),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).getPersonalUploadRecordInfo(r,"failed")}),t._uU(2),t.qZA()()}if(2&n){const e=i.$implicit;t.xp6(1),t.Q6J("disabled",0===e.totalFailed)("matTooltipDisabled",0===e.totalFailed),t.xp6(1),t.hij(" ",e.totalFailed," ")}}function Kt(n,i){1&n&&(t.TgZ(0,"th",32),t._uU(1,"ACTIONS"),t.qZA())}function te(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",47)(1,"button",48)(2,"mat-icon"),t._uU(3,"more_vert"),t.qZA()(),t.TgZ(4,"mat-menu",null,49)(6,"button",50),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).process(r)}),t.TgZ(7,"mat-icon"),t._uU(8,"edit"),t.qZA(),t.TgZ(9,"span"),t._uU(10,"Process"),t.qZA()(),t.TgZ(11,"button",51),t.NdJ("click",function(){const a=t.CHM(e),r=a.$implicit,s=a.index;return t.oxw(2).delete(r,s)}),t.TgZ(12,"mat-icon"),t._uU(13,"delete"),t.qZA(),t.TgZ(14,"span"),t._uU(15,"Remove"),t.qZA()()()()}if(2&n){const e=i.$implicit,o=t.MAs(5);t.xp6(1),t.Q6J("matMenuTriggerFor",o),t.xp6(5),t.Q6J("disabled",!0===e.isProceed||e.totalUpload===e.totalFailed)}}function ee(n,i){1&n&&t._UZ(0,"tr",52)}function ie(n,i){1&n&&t._UZ(0,"tr",53)}function ne(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",2)(2,"div",3)(3,"div",4)(4,"button",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().onUpload()}),t.TgZ(5,"mat-icon",6),t._uU(6,"cloud_upload"),t.qZA()()(),t.TgZ(7,"div",4)(8,"button",7),t.NdJ("click",function(a){return t.CHM(e),t.oxw().deleteMutiple(a)}),t.TgZ(9,"mat-icon",6),t._uU(10,"delete"),t.qZA()()()(),t.TgZ(11,"mat-paginator",8),t.NdJ("page",function(a){return t.CHM(e),t.oxw().onPaginateChange(a)}),t.qZA()(),t.TgZ(12,"div",9)(13,"table",10),t.NdJ("matSortChange",function(a){return t.CHM(e),t.oxw().sortData(a)}),t.ynx(14,11),t.YNc(15,Pt,2,2,"th",12),t.YNc(16,Dt,2,1,"td",13),t.BQk(),t.ynx(17,14),t.YNc(18,Nt,3,3,"th",15),t.YNc(19,Et,2,1,"td",13),t.BQk(),t.ynx(20,16),t.YNc(21,Lt,3,3,"th",17),t.YNc(22,Jt,3,3,"td",13),t.BQk(),t.ynx(23,18),t.YNc(24,Yt,3,3,"th",19),t.YNc(25,Qt,2,1,"td",13),t.BQk(),t.ynx(26,20),t.YNc(27,Rt,3,3,"th",21),t.YNc(28,zt,3,2,"td",13),t.BQk(),t.ynx(29,22),t.YNc(30,jt,3,3,"th",23),t.YNc(31,Wt,3,3,"td",13),t.BQk(),t.ynx(32,24),t.YNc(33,$t,3,3,"th",25),t.YNc(34,Vt,3,3,"td",13),t.BQk(),t.ynx(35,26),t.YNc(36,Gt,3,3,"th",27),t.YNc(37,Xt,3,3,"td",13),t.BQk(),t.ynx(38,28),t.YNc(39,Kt,2,0,"th",12),t.YNc(40,te,16,2,"td",29),t.BQk(),t.YNc(41,ee,1,0,"tr",30),t.YNc(42,ie,1,0,"tr",31),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(8),t.Q6J("disabled",e.selection.selected.length<=0),t.xp6(1),t.ekj("disabled",e.selection.selected.length<=0),t.xp6(2),t.Q6J("length",e.inquiry.totalRows)("showFirstLastButtons",!0)("pageIndex",e.inquiry.currentPageIndex)("pageSize",e.inquiry.pageSize)("pageSizeOptions",e.inquiry.pageSizeOptions),t.xp6(2),t.Q6J("dataSource",e.dataSource),t.xp6(28),t.Q6J("matHeaderRowDef",e.inquiry.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.inquiry.displayedColumns)}}function oe(n,i){if(1&n&&(t.ynx(0),t._uU(1),t._UZ(2,"br"),t.BQk()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e," ")}}function ae(n,i){if(1&n&&(t.TgZ(0,"mat-error"),t.YNc(1,oe,3,1,"ng-container",65),t.ALo(2,"matError"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,e.form.get("description").errors,"description"))}}function re(n,i){if(1&n&&(t.ynx(0),t._uU(1),t._UZ(2,"br"),t.BQk()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e," ")}}function se(n,i){if(1&n&&(t.TgZ(0,"mat-error"),t.YNc(1,re,3,1,"ng-container",65),t.ALo(2,"matError"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,e.form.get("file").errors,"file"))}}function ce(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",54)(2,"div",4)(3,"button",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().back()}),t.TgZ(4,"mat-icon",6),t._uU(5,"arrow_back"),t.qZA()(),t.TgZ(6,"button",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().clear()}),t.TgZ(7,"mat-icon",6),t._uU(8,"clear"),t.qZA()()()(),t._UZ(9,"span",55),t.TgZ(10,"span",56),t._uU(11," click "),t.TgZ(12,"a",57),t.NdJ("click",function(){return t.CHM(e),t.oxw().getPersonalUploadTemplate()}),t._uU(13,"link "),t.qZA(),t._uU(14," to download template "),t.qZA()(),t.TgZ(15,"div",58)(16,"form",59)(17,"mat-form-field")(18,"mat-label"),t._uU(19,"Upload file description"),t.qZA(),t._UZ(20,"input",60),t.YNc(21,ae,3,4,"mat-error",40),t.qZA(),t.TgZ(22,"mat-form-field"),t._UZ(23,"input",61),t.TgZ(24,"mat-icon",62),t.NdJ("click",function(){return t.CHM(e),t.oxw().onFileChange()}),t._uU(25,"attach_file"),t.qZA(),t.YNc(26,se,3,4,"mat-error",40),t._UZ(27,"input",63,64),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(16),t.Q6J("formGroup",e.form),t.xp6(5),t.Q6J("ngIf",e.form.get("description").invalid&&(e.form.get("description").dirty||e.form.get("description").touched)),t.xp6(5),t.Q6J("ngIf",e.form.get("file").invalid&&(e.form.get("file").dirty||e.form.get("file").touched))}}let N=class{constructor(i,e,o,a,r,s,l,d){this.actionService=i,this.httpService=e,this.toastrService=o,this.sessionService=a,this.router=r,this.fb=s,this.fileService=l,this.matDialog=d,this.isUpload=!1,this.initialSelection=[],this.allowMultiSelect=!0,this.dataSource=new u.by,this.toolbarModel=new V.P}ngOnInit(){this.selection=new et.Ov(this.allowMultiSelect,this.initialSelection),this.inquiry=new k.U,this.inquiry.displayedColumns=["select","createBy","createOn","description","isProceed","totalUpload","totalSuccess","totalFailed","actions"],this.initializeToolbar(),this.actionService.inquiryMode=!0,this.refereshEventSubscription=this.actionService.toggleRefreshEvent.pipe((0,f.t)(this)).subscribe(i=>this.resetSearch()),this.searchEventSubscription=this.actionService.toggleSearchEvent.pipe((0,f.t)(this)).subscribe(i=>{this.inquiry.filter=i,this.executeSearch()}),this.updateEventSubscription=this.actionService.toggleUpdateEvent.pipe((0,f.t)(this)).subscribe(i=>this.update()),this.initSearch(),this.initform(),this.form.statusChanges.pipe((0,f.t)(this)).subscribe(i=>{this.actionService.formDirty=!("string"!=typeof i||"valid"!==i.toLowerCase()||!this.form.touched)}),this.executeSearch()}ngOnDestroy(){}initializeToolbar(){this.toolbarModel.showReferesh=!0,this.toolbarModel.title="Personal Upload",this.actionService.setToolbarSettings(this.toolbarModel)}initSearch(){this.inquiry.sortExpression="CreateOn",this.inquiry.sortDirection=Ot.h.DESC}executeSearch(){this.httpService.HttpPost(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"personal/personalUploadInquiry",this.inquiry).subscribe(e=>{this.inquirySuccess(e)},e=>this.inquiryFailed(e))}inquirySuccess(i){this.dataSource.data=i.entity,this.inquiry.totalRows=i.totalRows,this.inquiry.totalPages=i.totalPages}inquiryFailed(i){}resetSearch(){this.selection.clear(),this.initSearch(),this.paginator.firstPage(),this.executeSearch()}onPaginateChange(i){this.inquiry.currentPageNumber=i.pageIndex+1,this.inquiry.pageSize=i.pageSize,this.executeSearch()}sortData(i){this.inquiry.currentPageNumber=1,this.inquiry.sortDirection=i.direction,this.inquiry.sortExpression=i.active,this.executeSearch()}isAllSelected(){return this.selection.selected.length==this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(i=>this.selection.select(i))}onUpload(){this.isUpload=!this.isUpload,this.toolbarModel.showReferesh=!1,this.toolbarModel.showSave=!0,this.actionService.setToolbarSettings(this.toolbarModel)}back(){this.isUpload=!this.isUpload,this.toolbarModel.showReferesh=!0,this.toolbarModel.showSave=!1,this.actionService.setToolbarSettings(this.toolbarModel)}clear(){this.form.reset(),this.selection.clear(),this.fileUpload&&(this.fileUpload.nativeElement.value=null)}initform(){this.form=this.fb.group({description:["",[m.kI.required,m.kI.maxLength(200)]],file:[{value:"",disabled:!0},m.kI.required],fileSource:["",m.kI.required]})}get f(){return this.form.controls}onFileChange(){const i=this.fileUpload.nativeElement;i.onchange=()=>{for(let e=0;e<i.files.length;e++){const o=i.files[e];this.form.get("fileSource").patchValue(o),this.form.get("file").patchValue(o.name)}},i.click()}getPersonalUploadTemplate(){this.httpService.HttpGet(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"personal/getPersonalUploadTemplate").subscribe(e=>{let a=e.entity.fileName;this.fileService.convertToBlob(e.entity.byteArray,a,j.I[j.I.byte]).then(s=>{this.fileService.downloadFile(s,a)})})}showFailed(i){}update(){let i=this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"personal/personalUpload";this.form.get("file");const o=new FormData;o.append("model",this.form.get("description").value),o.append("file",this.form.get("fileSource").value),this.httpService.HttpFormData(i,o).subscribe(a=>{this.uploadSuccess(a)},a=>this.showFailed(a))}uploadSuccess(i){this.executeSearch(),this.back(),this.clear()}process(i){const e=(new Z.LE).set("id",i.id);this.httpService.HttpGet(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"personal/processPersonalUpload",e).subscribe(a=>{this.executeSearch()},a=>this.showFailed(a))}delete(i,e){const a="Are you wants to delete this record "+i.description,r=new _.vA;r.autoFocus=!0,r.data=new H.B("Delete record?",a,"OK","Cancel",!1,null),this.matDialog.open(G.z,r).afterClosed().subscribe(l=>{if(!0===l){let d=new Array;d.push(i.id),this.httpService.HttpPost(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"personal/deletePersonalUpload",d).subscribe(C=>{this.deleteSuccess(C,e)},C=>this.showFailed(C))}})}deleteMutiple(i){if(this.selection.selected.length<=0)return;const o=new _.vA;o.autoFocus=!0,o.data=new H.B("Delete record?","Are you wants to delete selected record ","OK","Cancel",!1,null),this.matDialog.open(G.z,o).afterClosed().subscribe(r=>{if(!0===r){let s=this.selection.selected.map(d=>d.id);this.httpService.HttpPost(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"personal/deletePersonalUpload",s).subscribe(d=>{this.executeSearch(),this.clear()},d=>this.showFailed(d))}})}deleteSuccess(i,e){this.toastrService.ShowSuccessMessage(i.returnMessage[0]),this.dataSource.data.splice(e,1),this.dataSource._updateChangeSubscription(),this.clear()}getPersonalUploadFile(i){let e=this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"personal/getPersonalUploadFile",o=(new Z.LE).set("id",i.id);this.httpService.HttpGet(e,o).subscribe(a=>{let s=a.entity.fileName;this.fileService.convertToBlob(a.entity.byteArray,s,j.I[j.I.byte]).then(d=>{this.fileService.downloadFile(d,s)})})}getPersonalUploadRecordInfo(i,e){let o=this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"personal/getPersonalUploadRecordInfo",a=(new Z.LE).set("id",i.id).set("type",e);this.httpService.HttpGet(o,a).subscribe(r=>{let l=r.entity.fileName;this.fileService.convertToBlob(r.entity.byteArray,l,j.I[j.I.byte]).then(x=>{this.fileService.downloadFile(x,l)})})}};N.\u0275fac=function(i){return new(i||N)(t.Y36(p.cw),t.Y36(p.OE),t.Y36(p._W),t.Y36(p.mj),t.Y36(P.F0),t.Y36(m.qu),t.Y36(p.Ip),t.Y36(_.uw))},N.\u0275cmp=t.Xpm({type:N,selectors:[["app-personal-upload"]],viewQuery:function(i,e){if(1&i&&(t.Gf(M.NW,5),t.Gf(kt,5)),2&i){let o;t.iGM(o=t.CRH())&&(e.paginator=o.first),t.iGM(o=t.CRH())&&(e.fileUpload=o.first)}},decls:4,vars:2,consts:[[4,"ngIf","ngIfElse"],["upload",""],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","space-between center"],["fxLayout","row",1,"matero-group-button"],["fxLayout","row","fxLayoutAlign","center center"],["mat-icon-button","",3,"click"],["aria-label","label"],["mat-icon-button","",3,"disabled","click"],[3,"length","showFirstLastButtons","pageIndex","pageSize","pageSizeOptions","page"],[1,"matero-table-container"],["mat-table","","matSort","",3,"dataSource","matSortChange"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","createBy","sticky",""],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by createBy",4,"matHeaderCellDef"],["matColumnDef","createOn"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by createOn",4,"matHeaderCellDef"],["matColumnDef","description"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by description",4,"matHeaderCellDef"],["matColumnDef","isProceed"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by isProceed",4,"matHeaderCellDef"],["matColumnDef","totalUpload"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by totalUpload",4,"matHeaderCellDef"],["matColumnDef","totalSuccess"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by totalSuccess",4,"matHeaderCellDef"],["matColumnDef","totalFailed"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by totalFailed",4,"matHeaderCellDef"],["matColumnDef","actions","stickyEnd",""],["mat-cell","","data-label","Actions",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],[3,"checked","indeterminate","change"],["mat-cell",""],[3,"checked","click","change"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by createBy"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by createOn"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by description"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by isProceed"],[4,"ngIf"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by totalUpload"],["matTooltip","download upload file",1,"matero-button-icon-info",3,"disabled","matTooltipDisabled","click"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by totalSuccess"],["matTooltip","download success record",1,"matero-button-icon-success",3,"disabled","matTooltipDisabled","click"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by totalFailed"],["matTooltip","download failed record",1,"matero-button-icon-error",3,"disabled","matTooltipDisabled","click"],["mat-cell","","data-label","Actions"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"matero-group-button"],["fxFlex","12px"],[1,"f-s-12","f-w-500"],[3,"click"],["fxLayout","column",2,"padding","16px","width","100%"],["fxLayout","column","fxLayoutAlign","center stretch",1,"max-w-550",3,"formGroup"],["matInput","","formControlName","description"],["matInput","","formControlName","file","placeholder","select your file"],["color","accent","matSuffix","","type","button",2,"font-size","28px","cursor","pointer",3,"click"],["type","file","id","fileUpload","name","fileUpload","accept","*/*",2,"display","none"],["fileUpload",""],[4,"ngFor","ngForOf"]],template:function(i,e){if(1&i&&(t._UZ(0,"app-page-header"),t.YNc(1,ne,43,11,"div",0),t.YNc(2,ce,29,3,"ng-template",null,1,t.W1O)),2&i){const o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",!e.isUpload)("ngIfElse",o)}},directives:[X.q,h.O5,g.xw,g.Wh,D.lW,A.Hw,M.NW,u.BZ,it.YE,u.w1,u.fO,u.ge,nt.oG,u.Dz,u.ev,it.nU,st.gM,b.p6,b.VK,b.OP,u.as,u.XQ,u.nj,u.Gk,g.yH,m._Y,m.JL,m.sg,v.KE,v.hX,K.Nt,m.Fj,m.JJ,m.u,v.TO,h.sg,v.R9],pipes:[h.gd,Ft.q,Mt.h],styles:[".mat-column-select[_ngcontent-%COMP%]{overflow:visible;overflow:initial}.mat-column-createBy[_ngcontent-%COMP%], .mat-column-createOn[_ngcontent-%COMP%]{flex:0 0 15%!important}.mat-column-description[_ngcontent-%COMP%]{flex:0 0 30%!important}.mat-column-isProceed[_ngcontent-%COMP%], .mat-column-totalUpload[_ngcontent-%COMP%], .mat-column-totalSuccess[_ngcontent-%COMP%], .mat-column-totalFailed[_ngcontent-%COMP%], .mat-column-actions[_ngcontent-%COMP%]{flex:0 0 8%!important}"]}),N=(0,T.gn)([(0,f.c)()],N);var le=c(224),de=c(4253);const ue=[{position:1,name:"Hydrogen",weight:1.0079,symbol:"H"},{position:2,name:"Helium",weight:4.0026,symbol:"He"},{position:3,name:"Lithium",weight:6.941,symbol:"Li"},{position:4,name:"Beryllium",weight:9.0122,symbol:"Be"},{position:5,name:"Boron",weight:10.811,symbol:"B"},{position:6,name:"Carbon",weight:12.0107,symbol:"C"},{position:7,name:"Nitrogen",weight:14.0067,symbol:"N"},{position:8,name:"Oxygen",weight:15.9994,symbol:"O"},{position:9,name:"Fluorine",weight:18.9984,symbol:"F"},{position:10,name:"Neon",weight:20.1797,symbol:"Ne"}],pe=[{img:"assets/images/avatars/avatar-1.jpg",subject:"Hydrogen",content:"Cras sit amet nibh libero, in gravida nulla.\n     Nulla vel metus scelerisque ante sollicitudin commodo."},{img:"assets/images/avatars/avatar-2.jpg",subject:"Helium",content:"Cras sit amet nibh libero, in gravida nulla.\n     Nulla vel metus scelerisque ante sollicitudin commodo."},{img:"assets/images/avatars/avatar-3.jpg",subject:"Lithium",content:"Cras sit amet nibh libero, in gravida nulla.\n     Nulla vel metus scelerisque ante sollicitudin commodo."},{img:"assets/images/avatars/avatar-4.jpg",subject:"Beryllium",content:"Cras sit amet nibh libero, in gravida nulla.\n     Nulla vel metus scelerisque ante sollicitudin commodo."},{img:"assets/images/avatars/avatar-6.jpg",subject:"Boron",content:"Cras sit amet nibh libero, in gravida nulla.\n     Nulla vel metus scelerisque ante sollicitudin commodo."}];let ht=(()=>{class n{constructor(){this.stats=[{title:"Activity",amount:"180,200",progress:{value:50},color:"bg-indigo-500"},{title:"Quaterly Tenant Expiry",amount:"70,205",progress:{value:70},color:"bg-blue-500"},{title:"",amount:"1,291,922",progress:{value:80},color:"bg-green-500"},{title:"New User",amount:"1,922",progress:{value:40},color:"bg-teal-500"}],this.charts=[{chart:{height:350,type:"area",toolbar:!1},dataLabels:{enabled:!1},stroke:{curve:"smooth"},series:[{name:"UV",data:[31,40,28,51,42,109,100]},{name:"Download",data:[11,32,45,32,34,52,41]}],xaxis:{type:"datetime",categories:["2019-11-24T00:00:00","2019-11-24T01:30:00","2019-11-24T02:30:00","2019-11-24T03:30:00","2019-11-24T04:30:00","2019-11-24T05:30:00","2019-11-24T06:30:00"]},tooltip:{x:{format:"dd/MM/yy HH:mm"}},legend:{position:"top",horizontalAlign:"right"}},{chart:{height:350,type:"radar"},series:[{name:"Weekly Revenue",data:[20,100,40,30,50,80,33]}],labels:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],plotOptions:{radar:{size:140,polygons:{strokeColor:"#e9e9e9",fill:{colors:["#f8f8f8","#fff"]}}}},colors:["#FF4560"],markers:{size:4,colors:["#fff"],strokeColor:"#FF4560",strokeWidth:2},tooltip:{y:{formatter:e=>e}},yaxis:{tickAmount:7,labels:{formatter:(e,o)=>o%2==0?e:""}}}]}getData(){return ue}getMessages(){return pe}getCharts(){return this.charts}getStats(){return this.stats}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var me=c(2280),ct=c(9646),he=c(7229),E=c(9224),L=c(3322),q=c(508),ot=c(4834);const ge=["chart"];function _e(n,i){1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-content-loading",4),t.qZA()),2&n&&(t.xp6(1),t.Q6J("loop",4)("width",100)("paddingTop",20))}const fe=function(n){return["text-white",n]};function xe(n,i){if(1&n&&(t.TgZ(0,"div",5)(1,"mat-card",6)(2,"mat-card-title",7),t._uU(3),t.qZA(),t.TgZ(4,"mat-card-content")(5,"p",8)(6,"span",9)(7,"span",7),t._uU(8,"Total amount "),t.qZA(),t.TgZ(9,"span",10),t._uU(10),t.qZA()(),t.TgZ(11,"span",9)(12,"span",7),t._uU(13,"Total bed count "),t.qZA(),t.TgZ(14,"span",10),t._uU(15),t.qZA()(),t.TgZ(16,"span",9)(17,"span",7),t._uU(18,"Total unit "),t.qZA(),t.TgZ(19,"span",10),t._uU(20),t.qZA()()(),t._UZ(21,"mat-divider"),t.TgZ(22,"p",11)(23,"mat-icon"),t._uU(24,"arrow_forward"),t.qZA(),t.TgZ(25,"small",12),t._uU(26),t.ALo(27,"date"),t.ALo(28,"date"),t.qZA()()()()()),2&n){const e=i.$implicit,o=i.index,a=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(11,fe,a.color[o])),t.xp6(2),t.hij("Tenancy information as ",e.yearQuarter,""),t.xp6(7),t.hij("",e.totalAmount," "),t.xp6(5),t.hij("",e.totalBedCount," "),t.xp6(5),t.hij("",e.totalUnit," "),t.xp6(6),t.AsE("From ",t.lcZ(27,7,e.begOfQuarter)," To ",t.lcZ(28,9,e.endOfQuarter)," ")}}let gt=(()=>{class n{constructor(e,o,a,r,s,l){this.dormitoryDashboardService=e,this.ngZone=o,this.sessionService=a,this.itemsService=r,this.httpService=s,this.dateService=l,this.quarterlyTenantExpirys=[],this.mode="determinate",this.bufferValue=75,this.loading=!0,this.displayedColumns=["position","name","weight","symbol"],this.color=["bg-cyan-500","bg-blue-500","bg-green-500","bg-teal-500"],this.chartOptions={series:[{name:"My-series",data:[10,41,35,51,49,62,69,91,148]}],chart:{height:350,type:"bar"},title:{text:"My First Angular Chart"},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep"]}}}ngOnInit(){this.sessionService.moduleLoadedEvent.emit(me.B.dormitory)}ngOnDestroy(){}ngAfterViewInit(){}initChart(){}getQuarterlyTenantExpiry(){let e=new Date,o=(new Z.LE).set("date",e.toDateString());return this.httpService.HttpGetWithParams(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"analysis/QuarterlyTenantExpiry",o).subscribe(r=>{this.getQuarterlyTenantExpirySuccess(r)},r=>(0,ct.of)(null))}getQuarterlyTenantExpirySuccess(e){this.tenantExpiry=e.entity,console.log("\u{1f680} ~ file: dormitory-dashboard.component.ts:113 ~ DormitoryDashboardComponent ~ getQuarterlyTenantExpirySuccess ~ response.entity",e.entity),this.loading=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ht),t.Y36(t.R0b),t.Y36(p.mj),t.Y36(p.Ll),t.Y36(p.OE),t.Y36(p.Ru))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dormitory-dashboard"]],viewQuery:function(e,o){if(1&e&&t.Gf(ge,5),2&e){let a;t.iGM(a=t.CRH())&&(o.chart=a.first)}},features:[t._Bn([ht])],decls:4,vars:2,consts:[[4,"ngIf"],[2,"padding","16px"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex.gt-md","25","fxFlex.gt-xs","50","fxFlex","100","fxLayout","column",4,"ngFor","ngForOf"],[3,"loop","width","paddingTop"],["fxFlex.gt-md","25","fxFlex.gt-xs","50","fxFlex","100","fxLayout","column"],[1,"flexible",3,"ngClass"],[1,"f-s-12","f-w-100"],["matLine","","fxLayout","row","fxLayoutAlign","space-between center"],["fxLayout","column"],[1,"f-s-16","f-w-600",2,"margin-left","2px"],["matLine","","fxLayout","row","fxLayoutAlign","start center",2,"padding-top","5px"],[1,"text-muted"]],template:function(e,o){1&e&&(t.YNc(0,_e,2,3,"div",0),t.TgZ(1,"div",1)(2,"div",2),t.YNc(3,xe,29,13,"div",3),t.qZA()()),2&e&&(t.Q6J("ngIf",o.loading),t.xp6(3),t.Q6J("ngForOf",o.tenantExpiry))},directives:[h.O5,he.C,g.xw,g.SQ,h.sg,g.yH,E.a8,h.mk,L.oO,E.n5,E.dn,q.X2,g.Wh,ot.d,A.Hw],pipes:[h.uU],styles:[".audio-progress-bar.mat-progress-bar[_ngcontent-%COMP%]{height:2px}.audio-progress-bar[_ngcontent-%COMP%]   .mat-progress-bar-fill[_ngcontent-%COMP%]:after{background-color:#90a4ae}.audio-progress-bar[_ngcontent-%COMP%]   .mat-progress-bar-buffer[_ngcontent-%COMP%]{background-color:green!important}.audio-progress-bar[_ngcontent-%COMP%]   .mat-progress-bar-background[_ngcontent-%COMP%]{-webkit-animation:none;animation:none;background-color:#eceff1;fill:#eceff1}.flexible[_ngcontent-%COMP%]{flex-grow:1}",".mat-raised-button[_ngcontent-%COMP%]{margin-right:8px;margin-top:8px}"]}),n})();var _t=c(3112);const ye=function(){return["description","createOn","createBy","editOn","editBy","actions"]};let ft=(()=>{class n{constructor(e){this.sessionService=e,this.inquiryUrl="",this.getUrl="",this.updateUrl="",this.createUrl="",this.deleteUrl="",this.id="id",this.inquiryUrl=this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"category/inquiry",this.getUrl=this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"category/get",this.createUrl=this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"category/create",this.updateUrl=this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"category/update",this.deleteUrl=this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"category/delete",this.title="Category Inquiry",this.sortExpression="description",this.sortDirection="ASC",this.validationMessage={description:[{type:"required",message:"description is required"},{type:"minlength",message:"code must be at least 3 characters long"},{type:"maxlength",message:"code cannot be more than 200 characters long"}]},this.mockdata=[{hidden:!0,controlName:"id",label:"ID",controlType:"text",value:"",valueType:"text",editableField:!1,audit:!1},{hidden:!1,controlName:"description",label:"Description",controlType:"text",value:"",valueType:"text",editableField:!0,validators:{required:!0,minlength:3,maxlength:200},audit:!1},{hidden:!1,controlName:"createOn",label:"Create On",value:new Date,controlType:"datepicker",valueType:"text",editableField:!1,audit:!0},{hidden:!1,controlName:"createBy",label:"Create By",value:"",controlType:"text",valueType:"text",editableField:!1,audit:!0},{hidden:!1,controlName:"editOn",label:"Edit On",value:null,controlType:"datepicker",valueType:"text",editableField:!1,audit:!0},{hidden:!1,controlName:"editBy",label:"Edit By",value:"",controlType:"text",valueType:"text",editableField:!1,audit:!0},{hidden:!1,controlName:"actions",label:"actions",valueType:"actions",value:"",controlType:"button",editableField:!1,audit:!0}]}ngOnInit(){}action(e){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.mj))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dormitory-category"]],decls:1,vars:16,consts:[[3,"title","id","displayedColumns","isSearchable","validationMessage","mockdata","isInlineEdit","isAddable","sortExpression","sortDirection","inquiryUrl","getUrl","updateUrl","createUrl","deleteUrl","action"]],template:function(e,o){1&e&&(t.TgZ(0,"app-editable-table",0),t.NdJ("action",function(r){return o.action(r)}),t.qZA()),2&e&&t.Q6J("title",o.title)("id",o.id)("displayedColumns",t.DdM(15,ye))("isSearchable",!0)("validationMessage",o.validationMessage)("mockdata",o.mockdata)("isInlineEdit",!1)("isAddable",!0)("sortExpression",o.sortExpression)("sortDirection",o.sortDirection)("inquiryUrl",o.inquiryUrl)("getUrl",o.getUrl)("updateUrl",o.updateUrl)("createUrl",o.createUrl)("deleteUrl",o.deleteUrl)},directives:[_t.k],styles:[""]}),n})();const ve=function(){return["description","createOn","createBy","editOn","editBy","actions"]};let xt=(()=>{class n{constructor(e){this.sessionService=e,this.inquiryUrl="",this.getUrl="",this.updateUrl="",this.createUrl="",this.deleteUrl="",this.id="id",this.inquiryUrl=this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"location/inquiry",this.getUrl=this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"location/get",this.createUrl=this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"location/create",this.updateUrl=this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"location/update",this.deleteUrl=this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"location/delete",this.title="Location Inquiry",this.sortExpression="description",this.sortDirection="ASC",this.validationMessage={description:[{type:"required",message:"code is required"},{type:"minlength",message:"code must be at least 3 characters long"},{type:"maxlength",message:"code cannot be more than 200 characters long"}]},this.mockdata=[{hidden:!0,controlName:"id",label:"ID",controlType:"text",value:"",valueType:"text",editableField:!1,audit:!1},{hidden:!1,controlName:"description",label:"Description",controlType:"text",value:"",valueType:"text",editableField:!0,validators:{required:!0,minlength:3,maxlength:200},audit:!1},{hidden:!1,controlName:"createOn",label:"Create On",value:new Date,controlType:"datepicker",valueType:"text",editableField:!1,audit:!0},{hidden:!1,controlName:"createBy",label:"Create By",value:"",controlType:"text",valueType:"text",editableField:!1,audit:!0},{hidden:!1,controlName:"editOn",label:"Edit On",value:null,controlType:"datepicker",valueType:"text",editableField:!1,audit:!0},{hidden:!1,controlName:"editBy",label:"Edit By",value:"",controlType:"text",valueType:"text",editableField:!1,audit:!0},{hidden:!0,controlName:"actions",label:"actions",valueType:"actions",value:"",controlType:"button",editableField:!1,audit:!1}]}ngOnInit(){}action(e){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.mj))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dormitory-location"]],decls:1,vars:16,consts:[[3,"title","id","displayedColumns","isSearchable","validationMessage","mockdata","isInlineEdit","isAddable","sortExpression","sortDirection","inquiryUrl","getUrl","updateUrl","createUrl","deleteUrl","action"]],template:function(e,o){1&e&&(t.TgZ(0,"app-editable-table",0),t.NdJ("action",function(r){return o.action(r)}),t.qZA()),2&e&&t.Q6J("title",o.title)("id",o.id)("displayedColumns",t.DdM(15,ve))("isSearchable",!0)("validationMessage",o.validationMessage)("mockdata",o.mockdata)("isInlineEdit",!1)("isAddable",!0)("sortExpression",o.sortExpression)("sortDirection",o.sortDirection)("inquiryUrl",o.inquiryUrl)("getUrl",o.getUrl)("updateUrl",o.updateUrl)("createUrl",o.createUrl)("deleteUrl",o.deleteUrl)},directives:[_t.k],styles:[""]}),n})();var yt=c(825),lt=c(2426),B=c(8446),z=c(5113),vt=c(6256);function Ce(n,i){if(1&n&&(t.TgZ(0,"div")(1,"div",1)(2,"ngx-content-loading",2),t.O4$(),t._UZ(3,"g",3),t.qZA()()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("width",e.contentWidth)}}let w=class{constructor(i){this.breakpointObserver=i,this.contentWidth=2e3}ngOnInit(){this.breakpointObserver.observe([z.u3.Large,z.u3.Medium,z.u3.Small,"(min-width: 500px)"]).pipe((0,f.t)(this)).subscribe(i=>{this.breakpointChanged()})}arrayOne(i){return Array(i)}breakpointChanged(){this.breakpointObserver.isMatched("(min-width: 1920px)")?this.contentWidth=2e3:this.breakpointObserver.isMatched(z.u3.Large)?this.contentWidth=1500:this.breakpointObserver.isMatched(z.u3.Medium)?this.contentWidth=1e3:this.breakpointObserver.isMatched(z.u3.Small)?this.contentWidth=800:this.breakpointObserver.isMatched("(min-width: 500px)")?this.contentWidth=600:this.breakpointObserver.isMatched("(max-width: 499px)")&&(this.contentWidth=400)}};w.\u0275fac=function(i){return new(i||w)(t.Y36(z.Yg))},w.\u0275cmp=t.Xpm({type:w,selectors:[["app-vertical-content-loading"]],inputs:{loop:"loop",width:"width",paddingTop:"paddingTop"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"app-list"],[3,"width"],["ngx-facebook-preset",""]],template:function(i,e){1&i&&t.YNc(0,Ce,4,1,"div",0),2&i&&t.Q6J("ngForOf",e.arrayOne(e.loop))},directives:[h.sg,vt.w5,vt.Z2],styles:[".app-list[_ngcontent-%COMP%]{border-left:1px solid #e0e0e0;border-right:1px solid #e0e0e0;padding-top:20px;padding-left:20px}.app-list[_ngcontent-%COMP%]:last-child{border-bottom:1px solid #e0e0e0}"]}),w=(0,T.gn)([(0,f.c)()],w);var W=c(2046),y=c(4623),Ct=c(2354);function be(n,i){1&n&&t._UZ(0,"app-vertical-content-loading",3),2&n&&t.Q6J("width",100)("loop",10)("paddingTop",50)}function Se(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",13)(1,"button",18),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit;return t.oxw(3).getActiveOccupantsByRoomId(a,"active")}),t._uU(2),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("disabled",0===e.TotalActiveOccupant)("matTooltipDisabled",0===e.TotalActiveOccupant),t.xp6(1),t.hij(" ",e.totalActiveOccupant," ")}}function Te(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mat-list-item")(1,"div",8)(2,"div",9),t._UZ(3,"img",10),t.qZA(),t.TgZ(4,"div",11)(5,"h3",12),t._uU(6),t.qZA(),t.TgZ(7,"span",12),t._uU(8),t.qZA(),t.TgZ(9,"span",12),t._uU(10),t.ALo(11,"currency"),t.qZA()(),t.TgZ(12,"div",13)(13,"button",14)(14,"mat-icon"),t._uU(15,"more_vert"),t.qZA()(),t.TgZ(16,"mat-menu",null,15)(18,"button",16),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(3).edit(r)}),t.TgZ(19,"mat-icon"),t._uU(20,"edit"),t.qZA(),t.TgZ(21,"span"),t._uU(22,"Edit"),t.qZA()(),t.TgZ(23,"button",16),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(3).getActiveOccupantsByRoomId(r,"active")}),t.TgZ(24,"mat-icon"),t._uU(25,"account_circle"),t.qZA(),t.TgZ(26,"span"),t._uU(27,"Occupant"),t.qZA()(),t.TgZ(28,"button",16),t.NdJ("click",function(){const a=t.CHM(e),r=a.$implicit,s=a.index;return t.oxw(3).delete(r,s)}),t.TgZ(29,"mat-icon"),t._uU(30,"delete"),t.qZA(),t.TgZ(31,"span"),t._uU(32,"Delete"),t.qZA()()()(),t.YNc(33,Se,3,3,"div",17),t.qZA()()}if(2&n){const e=i.$implicit,o=t.MAs(17);t.xp6(3),t.Q6J("src",e.photo,t.LSH),t.xp6(3),t.hij("",e.fullAddress," "),t.xp6(2),t.AsE(" ",e.category," / ",e.location,""),t.xp6(2),t.AsE("",t.lcZ(11,8,e.price)," (",e.bedCount,") "),t.xp6(3),t.Q6J("matMenuTriggerFor",o),t.xp6(20),t.Q6J("ngIf",e.totalActiveOccupant>0)}}function Ze(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"mat-paginator",5),t.NdJ("page",function(a){return t.CHM(e),t.oxw(2).onPaginateChange(a)}),t.qZA(),t.TgZ(2,"mat-list",6),t.YNc(3,Te,34,10,"mat-list-item",7),t.qZA(),t.TgZ(4,"mat-paginator",5),t.NdJ("page",function(a){return t.CHM(e),t.oxw(2).onPaginateChange(a)}),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("length",e.inquiry.totalRows)("showFirstLastButtons",!0)("pageIndex",e.inquiry.currentPageIndex)("pageSize",e.inquiry.pageSize)("pageSizeOptions",e.inquiry.pageSizeOptions),t.xp6(2),t.Q6J("ngForOf",e.dataSource.data),t.xp6(1),t.Q6J("length",e.inquiry.totalRows)("showFirstLastButtons",!0)("pageIndex",e.inquiry.currentPageIndex)("pageSize",e.inquiry.pageSize)("pageSizeOptions",e.inquiry.pageSizeOptions)}}function qe(n,i){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-empty-layout",4),t.YNc(2,Ze,5,11,"div",1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("lastRowIndex",e.lastRowIndex)("title","No record found")("message","click new button to add record"),t.xp6(1),t.Q6J("ngIf",e.lastRowIndex>0)}}let J=class{constructor(i,e,o,a,r,s,l,d,x){this.router=i,this.sessionService=e,this.httpService=o,this.toastrService=a,this.actionService=r,this.fileService=s,this.matDialog=l,this.dialogService=d,this.appConfigService=x,this.lastRowIndex=-1,this.color="bg-cyan-500",this.title="Room Inquiry",this.loading=!0}ngOnInit(){this.dataSource=new u.by,this.inquiry=new k.U,this.initializeToolbar(),this.initializeSearch(),this.executeSearch()}ngAfterViewInit(){this.actionService.toggleCreateEvent.pipe((0,f.t)(this)).subscribe(i=>this.create(i)),this.actionService.toggleRefreshEvent.pipe((0,f.t)(this)).subscribe(i=>{this.initializeSearch(),this.executeSearch()}),this.actionService.toggleSearchEvent.pipe((0,f.t)(this)).subscribe(i=>this.search())}ngOnDestroy(){}initializeSearch(){this.inquiry.sortExpression="fullAddress",this.inquiry.filter="",this.lastSearchValue=""}initializeToolbar(){const i=new V.P;i.showReferesh=!0,i.showSearch=!0,i.title=this.title,this.actionService.setToolbarSettings(i)}executeSearch(){this.lastSearchValue=this.inquiry.filter,this.httpService.HttpPost(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"room/inquiry",this.inquiry).subscribe(e=>{this.inquirySuccess(e)},e=>this.inquiryFailed(e))}inquirySuccess(i){this.lastRowIndex=i.entity.length,i.entity.map(e=>e.photo=e.base64String?this.fileService.loadImage(e.base64String):this.appConfigService.getValue().empty),this.dataSource.data=i.entity,this.inquiry.totalRows=i.totalRows,this.inquiry.totalPages=i.totalPages,this.loading=!1}inquiryFailed(i){this.lastRowIndex=0,this.loading=!1}onPaginateChange(i){this.inquiry.currentPageNumber=i.pageIndex+1,this.inquiry.pageSize=i.pageSize,this.executeSearch()}sortData(i){this.inquiry.currentPageNumber=1,this.inquiry.sortDirection=i.direction,this.inquiry.sortExpression=i.active,this.executeSearch()}resetSearch(){this.initializeSearch(),this.executeSearch()}edit(i){this.router.navigate(["/dormitorymanagement/room/maintenance"],{queryParams:{id:i.id}})}create(i){this.router.navigate(["/dormitorymanagement/room/maintenance"],{queryParams:{id:""}})}delete(i,e){const o=new _.vA;o.autoFocus=!0,o.data=new H.B("Delete record?","Are you wants to delete this record","OK","Cancel",!1,null),this.matDialog.open(G.z,o).afterClosed().subscribe(r=>{if(!0===r){const s=(new Z.LE).set("id",i.id);this.httpService.HttpDelete(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"room/delete",s).subscribe(d=>{this.deleteSuccess(d,e)},d=>this.deleteFailed(d))}})}deleteSuccess(i,e){this.dataSource.data.splice(e,1),this.dataSource._updateChangeSubscription(),this.toastrService.ShowSuccessMessage(i.returnMessage[0])}deleteFailed(i){}optionsEvent(i){}getActiveOccupantsByRoomId(i,e){this.router.navigate(["/dormitorymanagement/room/occupants"],{queryParams:{id:i.id}})}search(){this.dialogService.open(yt.g,{data:{searchItems:["FullAddress","Country","Category","Location"]},autoFocus:!0,hasBackdrop:!0,disableClose:!0,panelClass:"search-panel-modal",backdropClass:"backDropClass",position:{top:"108px"}}).afterClosed().subscribe(o=>{o&&(this.inquiry.filters=JSON.stringify({[o.selected]:o.searchValue}),this.executeSearch(),this.inquiry.filters=null)})}};J.\u0275fac=function(i){return new(i||J)(t.Y36(P.F0),t.Y36(p.mj),t.Y36(p.OE),t.Y36(p._W),t.Y36(p.cw),t.Y36(p.Ip),t.Y36(_.uw),t.Y36(lt.x),t.Y36(B._))},J.\u0275cmp=t.Xpm({type:J,selectors:[["app-room-inquiry"]],decls:4,vars:2,consts:[[3,"width","loop","paddingTop",4,"ngIf"],[4,"ngIf"],[3,"optionsEvent"],[3,"width","loop","paddingTop"],[3,"lastRowIndex","title","message"],[3,"length","showFirstLastButtons","pageIndex","pageSize","pageSizeOptions","page"],[1,"app-class"],[4,"ngFor","ngForOf"],["fxLayout","row wrap",2,"width","100%"],["fxFlex","15","fxFlex.xs","25","fxFlex.sm","20","fxLayout","row","fxLayoutAlign","center center"],["matListAvatar","","alt","",3,"src"],["fxFlex","75","fxFlex.xs","55","fxFlex.sm","60"],["matLine",""],["fxFlex","5","fxFlex.xs","10","fxFlex.sm","10","fxLayout","row","fxLayoutAlign","center center"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["fxFlex","5","fxFlex.xs","10","fxFlex.sm","10","fxLayout","row","fxLayoutAlign","center center",4,"ngIf"],["matTooltip","active occupant",1,"text-white","matero-button-icon-success",3,"disabled","matTooltipDisabled","click"]],template:function(i,e){1&i&&(t._UZ(0,"app-page-header"),t.YNc(1,be,1,3,"app-vertical-content-loading",0),t.YNc(2,qe,3,4,"div",1),t.TgZ(3,"app-float-button",2),t.NdJ("optionsEvent",function(a){return e.optionsEvent(a)}),t.qZA()),2&i&&(t.xp6(1),t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading))},directives:[X.q,h.O5,w,W.B,M.NW,y.i$,h.sg,y.Tg,g.xw,g.yH,g.Wh,y.eA,q.X2,D.lW,b.p6,A.Hw,b.VK,b.OP,st.gM,Ct.u],pipes:[h.H9],styles:[".app-class[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{height:auto;padding-top:8px;padding-bottom:8px;border-top:1px solid #e0e0e0}.app-class[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]:last-child{border-bottom:1px solid #e0e0e0}.mat-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-list-avatar[_ngcontent-%COMP%]{height:100px;width:100px;border-radius:50%;-o-object-fit:cover;object-fit:cover}"]}),J=(0,T.gn)([(0,f.c)()],J);var bt=c(3606),Ae=c(2448),$=c(7067);function we(n,i){1&n&&t._UZ(0,"app-vertical-content-loading",3),2&n&&t.Q6J("width",100)("loop",12)("paddingTop",50)}function Ue(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"th",21)(1,"mat-checkbox",22),t.NdJ("change",function(a){t.CHM(e);const r=t.oxw(2);return a?r.toggleAllRows():null}),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())}}function Ie(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",23)(1,"mat-checkbox",24),t.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const s=t.CHM(e).$implicit,l=t.oxw(2);return a?l.selection.toggle(s):null}),t.qZA()()}if(2&n){const e=i.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("checked",o.selection.isSelected(e))}}function Oe(n,i){1&n&&t._UZ(0,"th",21)}function Fe(n,i){if(1&n&&(t.TgZ(0,"td",25)(1,"div",26),t._UZ(2,"img",27),t.qZA()()),2&n){const e=i.$implicit;t.xp6(2),t.Q6J("src",e.photo,t.LSH)}}function Me(n,i){1&n&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"name/id/dob/mobile")," "))}function ke(n,i){if(1&n&&(t.TgZ(0,"td",25)(1,"div"),t._uU(2),t.qZA(),t.TgZ(3,"div"),t._uU(4),t.qZA(),t.TgZ(5,"div"),t._uU(6),t.ALo(7,"date"),t.qZA()()),2&n){const e=i.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.idNumber),t.xp6(2),t.Oqu(t.lcZ(7,3,e.birthDate))}}function Pe(n,i){1&n&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"company/hire date")," "))}function De(n,i){if(1&n&&(t.TgZ(0,"td",25)(1,"div"),t._uU(2),t.qZA(),t.TgZ(3,"div"),t._uU(4),t.ALo(5,"date"),t.qZA()()),2&n){const e=i.$implicit;t.xp6(2),t.Oqu(e.customer),t.xp6(2),t.Oqu(t.lcZ(5,2,e.hireDate))}}function Ne(n,i){1&n&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"work Permit/passport(expiry)")," "))}function Ee(n,i){if(1&n&&(t.TgZ(0,"td",25)(1,"div"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"div"),t._uU(5),t.ALo(6,"date"),t.qZA()()),2&n){const e=i.$implicit;t.xp6(2),t.AsE("WP: ",e.workPermitNumber," - ",t.lcZ(3,4,e.workPermitExpiry)," "),t.xp6(3),t.AsE("PP: ",e.passportNumber," ",t.lcZ(6,6,e.passportExpiry),"")}}function Le(n,i){1&n&&(t.TgZ(0,"th",21)(1,"div",28),t._uU(2),t.ALo(3,"uppercase"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"actions")," "))}function Je(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",25)(1,"div",29)(2,"button",30)(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()()(),t.TgZ(5,"mat-menu",null,31)(7,"button",32),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).edit(r)}),t.TgZ(8,"mat-icon"),t._uU(9,"edit"),t.qZA(),t.TgZ(10,"span"),t._uU(11,"Edit"),t.qZA()(),t.TgZ(12,"button",32),t.NdJ("click",function(){const a=t.CHM(e),r=a.$implicit,s=a.index;return t.oxw(2).delete(r,s)}),t.TgZ(13,"mat-icon"),t._uU(14,"delete"),t.qZA(),t.TgZ(15,"span"),t._uU(16,"Delete"),t.qZA()()()()}if(2&n){const e=t.MAs(6);t.xp6(2),t.Q6J("matMenuTriggerFor",e)}}function Ye(n,i){1&n&&t._UZ(0,"tr",33)}function Qe(n,i){1&n&&t._UZ(0,"tr",34)}function Re(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",4),t._UZ(2,"span",5),t.TgZ(3,"mat-paginator",6),t.NdJ("page",function(a){return t.CHM(e),t.oxw().onPaginateChange(a)}),t.qZA()(),t.TgZ(4,"div",7)(5,"table",8),t.ynx(6,9),t.YNc(7,Ue,2,2,"th",10),t.YNc(8,Ie,2,1,"td",11),t.BQk(),t.ynx(9,12),t.YNc(10,Oe,1,0,"th",10),t.YNc(11,Fe,3,1,"td",13),t.BQk(),t.ynx(12,14),t.YNc(13,Me,3,3,"th",10),t.YNc(14,ke,8,5,"td",13),t.BQk(),t.ynx(15,15),t.YNc(16,Pe,3,3,"th",10),t.YNc(17,De,6,4,"td",13),t.BQk(),t.ynx(18,16),t.YNc(19,Ne,3,3,"th",10),t.YNc(20,Ee,7,8,"td",13),t.BQk(),t.ynx(21,17),t.YNc(22,Le,4,3,"th",10),t.YNc(23,Je,17,1,"td",13),t.BQk(),t.YNc(24,Ye,1,0,"tr",18),t.YNc(25,Qe,1,0,"tr",19),t.qZA()(),t._UZ(26,"app-empty-layout",20),t.TgZ(27,"mat-paginator",6),t.NdJ("page",function(a){return t.CHM(e),t.oxw().onPaginateChange(a)}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("length",e.inquiry.totalRows)("showFirstLastButtons",!0)("pageIndex",e.inquiry.currentPageIndex)("pageSize",e.inquiry.pageSize)("pageSizeOptions",e.inquiry.pageSizeOptions),t.xp6(1),t.Q6J("defaultElevation",2),t.xp6(1),t.Q6J("dataSource",e.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",e.inquiry.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.inquiry.displayedColumns),t.xp6(1),t.Q6J("lastRowIndex",e.lastRowIndex)("title","No record found")("message","click new button to add record"),t.xp6(1),t.Q6J("length",e.inquiry.totalRows)("showFirstLastButtons",!0)("pageIndex",e.inquiry.currentPageIndex)("pageSize",e.inquiry.pageSize)("pageSizeOptions",e.inquiry.pageSizeOptions)}}let Y=class{constructor(i,e,o,a,r,s,l,d,x){this.router=i,this.sessionService=e,this.httpService=o,this.toastrService=a,this.actionService=r,this.fileService=s,this.dialog=l,this.dialogService=d,this.appConfigService=x,this.title="Personal Inquiry",this.lastRowIndex=-1,this.loading=!0,this.color="bg-cyan-500",this.actionService.inquiryMode=!0,this.createNewEventSubscription=this.actionService.toggleCreateEvent.pipe((0,f.t)(this)).subscribe(C=>this.create(C)),this.refereshEventSubscription=this.actionService.toggleRefreshEvent.pipe((0,f.t)(this)).subscribe(C=>this.executeSearch()),this.searchEventSubscription=this.actionService.toggleSearchEvent.pipe((0,f.t)(this)).subscribe(C=>{this.dataSource.filter=C,this.search()}),this.downloadEventSubscription=this.actionService.toggleDownloadEvent.pipe((0,f.t)(this)).subscribe(C=>this.downloadPanel())}ngOnInit(){this.initializeSearch(),this.initializeToolbar(),this.executeSearch(),this.selection.changed.pipe((0,f.t)(this)).subscribe(i=>{this.toolbarModel.showDownloadPanel=0!==this.selection.selected.length,this.actionService.setToolbarSettings(this.toolbarModel)})}ngOnDestroy(){}initializeSearch(){this.dataSource=new u.by,this.selection=new et.Ov(!0,[]),this.inquiry=new k.U,this.inquiry.displayedColumns=["select","photo","name","customer","workPermitNumber","actions"],this.inquiry.sortExpression="name",this.lastSearchValue=""}initializeToolbar(){this.toolbarModel=new V.P,this.toolbarModel.showReferesh=!0,this.toolbarModel.showSearch=!0,this.toolbarModel.title=this.title,this.actionService.setToolbarSettings(this.toolbarModel)}executeSearch(){this.lastSearchValue=this.inquiry.filter,this.httpService.HttpPost(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"personal/Inquiry",this.inquiry).subscribe(e=>{this.inquirySuccess(e)},e=>this.inquiryFailed(e))}inquirySuccess(i){this.lastRowIndex=i.entity.length,i.entity.map(e=>e.photo=e.base64String?this.fileService.loadImage(e.base64String):this.appConfigService.getValue().avatar),this.dataSource.data=i.entity,this.dataSource._updateChangeSubscription(),this.inquiry.totalRows=i.totalRows,this.inquiry.totalPages=i.totalPages,this.loading=!1}inquiryFailed(i){this.loading=!1}onPaginateChange(i){this.inquiry.currentPageNumber=i.pageIndex+1,this.inquiry.pageSize=i.pageSize,this.executeSearch()}sortData(i){this.inquiry.currentPageNumber=1,this.inquiry.sortDirection=i.direction,this.inquiry.sortExpression=i.active,this.executeSearch()}resetSearch(){this.lastSearchValue="",this.inquiry.filter="",this.initializeSearch(),this.executeSearch()}edit(i){this.router.navigate(["/dormitorymanagement/personal/maintenance"],{queryParams:{id:i.id}})}delete(i,e){const o="Are you wants to delete this record "+i.name,a=new _.vA;a.autoFocus=!0,a.data=new H.B("Delete record?",o,"OK","Cancel",!1,null),this.dialog.open(G.z,a).afterClosed().subscribe(s=>{if(!0===s){const l=(new Z.LE).set("id",i.id);this.httpService.HttpDelete(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"personal/delete",l).subscribe(x=>{this.deleteSuccess(x,e)},x=>this.deleteFailed(x))}})}deleteSuccess(i,e){this.dataSource.data.splice(e,1),this.dataSource._updateChangeSubscription(),this.toastrService.ShowSuccessMessage(i.returnMessage[0])}deleteFailed(i){let e=i.error;i.status>0&&e.returnMessage&&this.toastrService.ShowErrorMessage(e.returnMessage[0])}create(i){this.router.navigate(["/dormitorymanagement/personal/maintenance"],{queryParams:{id:""}})}isAllSelected(){return this.selection.selected.length==this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(i=>{this.selection.select(i)})}downloadPanel(){this.dialogService.open(Ae.Y,{data:{format:[{description:"Personal Listing",name:"personalListing"},{description:"Personal Profile",name:"personalProfile"}]},autoFocus:!0,hasBackdrop:!0,disableClose:!0,panelClass:"search-panel-modal",backdropClass:"backDropClass",width:"250px",position:{top:"108px"}}).afterClosed().subscribe(o=>{o&&this.download(o.render,o.format)})}download(i,e){if(0===this.selection.selected.length)return;let o=this.selection.selected.map(s=>s.id);this.httpService.HttpPost(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"personal/downloadPersonal",JSON.stringify({renderType:i,guids:o,format:e})).subscribe(s=>{this.downloadSuccess(s.entity)},s=>this.downloadFailed(s))}downloadSuccess(i){this.fileService.convertToBlob(i.base64,i.fileName,bt.T[bt.T.base64]).then(e=>{this.fileService.downloadFile(e,i.fileName)})}downloadFailed(i){}optionsEvent(i){}toggleSearch(){}toggleSave(){}search(){this.dialogService.open(yt.g,{data:{searchItems:["Name","Id Number","Mobile","Work Permit Number","Passport Number","Customer Name"]},autoFocus:!0,hasBackdrop:!0,disableClose:!0,panelClass:"search-panel-modal",backdropClass:"backDropClass",position:{top:"108px"}}).afterClosed().subscribe(o=>{o&&(this.inquiry.filters=JSON.stringify({[o.selected]:o.searchValue}),this.executeSearch(),this.inquiry.filters=null)})}};Y.\u0275fac=function(i){return new(i||Y)(t.Y36(P.F0),t.Y36(p.mj),t.Y36(p.OE),t.Y36(p._W),t.Y36(p.cw),t.Y36(p.Ip),t.Y36(_.uw),t.Y36(lt.x),t.Y36(B._))},Y.\u0275cmp=t.Xpm({type:Y,selectors:[["app-personal-inquiry"]],decls:4,vars:2,consts:[[3,"width","loop","paddingTop",4,"ngIf"],[4,"ngIf"],[3,"optionsEvent"],[3,"width","loop","paddingTop"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","space-between center"],["fxFlex",""],[3,"length","showFirstLastButtons","pageIndex","pageSize","pageSizeOptions","page"],["appMaterialElevation","","raisedElevation","16",1,"matero-table-container",3,"defaultElevation"],["mat-table","",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","min-w-80",4,"matCellDef"],["matColumnDef","photo"],["mat-cell","",4,"matCellDef"],["matColumnDef","name","sticky",""],["matColumnDef","customer"],["matColumnDef","workPermitNumber"],["matColumnDef","actions","stickyEnd",""],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"lastRowIndex","title","message"],["mat-header-cell",""],[3,"checked","indeterminate","change"],["mat-cell","",1,"min-w-80"],[3,"checked","click","change"],["mat-cell",""],[2,"padding","5px 0px"],[1,"matListAvatar",3,"src"],[1,"allc"],["fxLayout","column","fxLayoutAlign","center center"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,e){1&i&&(t._UZ(0,"app-page-header"),t.YNc(1,we,1,3,"app-vertical-content-loading",0),t.YNc(2,Re,28,17,"div",1),t.TgZ(3,"app-float-button",2),t.NdJ("optionsEvent",function(a){return e.optionsEvent(a)}),t.qZA()),2&i&&(t.xp6(1),t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading))},directives:[X.q,h.O5,w,g.xw,g.Wh,g.yH,M.NW,$.F,u.BZ,u.w1,u.fO,u.ge,nt.oG,u.Dz,u.ev,D.lW,b.p6,A.Hw,b.VK,b.OP,u.as,u.XQ,u.nj,u.Gk,W.B,Ct.u],pipes:[h.gd,h.uU],styles:[".centered-element[_ngcontent-%COMP%]{height:100px;width:100px;position:absolute;left:50%;margin-left:-50px;top:50%;margin-top:-50px}.demo-secondary-text[_ngcontent-%COMP%]{color:#0000008a}.matListAvatar[_ngcontent-%COMP%]{height:100px;width:100px;border-radius:50px;-o-object-fit:cover;object-fit:cover}"]}),Y=(0,T.gn)([(0,f.c)()],Y);var He=c(2076),Be=c(4004);class St{constructor(){this.photo=null}}class Tt extends k.U{}var S=c(6856),dt=c(6744),at=c(9814),rt=c(3954);function ze(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Please enter date from "),t.qZA())}function je(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",28)(1,"div",29)(2,"mat-checkbox",30),t.NdJ("change",function(a){t.CHM(e);const r=t.oxw(2);return a?r.toggleAllRows():null}),t.qZA()(),t.TgZ(3,"div",31)(4,"mat-paginator",32),t.NdJ("page",function(a){return t.CHM(e),t.oxw(2).onPaginateChange(a)}),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected()),t.xp6(2),t.Q6J("length",e.inquiry.totalRows)("showFirstLastButtons",!0)("pageIndex",e.inquiry.currentPageIndex)("pageSize",e.inquiry.pageSize)("pageSizeOptions",e.inquiry.pageSizeOptions)}}const We=function(n){return["text-white",n]};function $e(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",33)(1,"mat-card",34)(2,"mat-checkbox",35),t.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const s=t.CHM(e).$implicit;return t.oxw(2).toggleSelection(a,s)}),t.qZA(),t.TgZ(3,"div",36),t._UZ(4,"img",37),t.TgZ(5,"h4",38),t._uU(6),t.qZA(),t.TgZ(7,"h5",39),t._uU(8),t.qZA(),t.TgZ(9,"h5",39),t._uU(10),t.qZA()(),t.TgZ(11,"mat-list",40)(12,"mat-list-item",41)(13,"p",42)(14,"mat-grid-list",43)(15,"mat-grid-tile",44),t._uU(16,"Company"),t.qZA(),t.TgZ(17,"mat-grid-tile",45),t._uU(18),t.qZA(),t.TgZ(19,"mat-grid-tile",44),t._uU(20,"Hire Date"),t.qZA(),t.TgZ(21,"mat-grid-tile",45),t._uU(22),t.ALo(23,"date"),t.qZA(),t.TgZ(24,"mat-grid-tile",44),t._uU(25,"Termination Date"),t.qZA(),t.TgZ(26,"mat-grid-tile",45),t._uU(27),t.ALo(28,"date"),t.qZA()()()(),t._UZ(29,"mat-divider",46),t.TgZ(30,"mat-list-item")(31,"p",42)(32,"mat-grid-list",43)(33,"mat-grid-tile",44),t._uU(34,"Permit No."),t.qZA(),t.TgZ(35,"mat-grid-tile",45),t._uU(36),t.qZA(),t.TgZ(37,"mat-grid-tile",44),t._uU(38,"Permit Expiry"),t.qZA(),t.TgZ(39,"mat-grid-tile",45),t._uU(40),t.ALo(41,"date"),t.qZA()()()()()()()}if(2&n){const e=i.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("defaultElevation",2)("ngClass",t.VKq(18,We,o.color)),t.xp6(1),t.Q6J("checked",o.selection.isSelected(e)),t.xp6(2),t.Q6J("src",e.photo,t.LSH),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.idNumber),t.xp6(2),t.Oqu(e.nationality),t.xp6(8),t.Oqu(e.customer),t.xp6(4),t.Oqu(t.lcZ(23,12,e.hireDate)),t.xp6(5),t.Oqu(t.lcZ(28,14,e.resignDate)),t.xp6(9),t.Oqu(e.workPermitNumber),t.xp6(4),t.Oqu(t.lcZ(41,16,e.workPermitExpiry))}}function Ve(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"form",9)(2,"div",10)(3,"mat-form-field",11)(4,"mat-label"),t._uU(5,"Name"),t.qZA(),t._UZ(6,"input",12),t.qZA(),t.TgZ(7,"mat-form-field",11)(8,"mat-label"),t._uU(9,"Checkin date"),t.qZA(),t._UZ(10,"input",13)(11,"mat-datepicker-toggle",14)(12,"mat-datepicker",null,15),t.YNc(14,ze,2,0,"mat-error",16),t.qZA(),t.TgZ(15,"div",17)(16,"mat-radio-group",18)(17,"mat-radio-button",19),t._uU(18,"Check In "),t.qZA(),t._UZ(19,"span",20),t.TgZ(20,"mat-radio-button",21),t._uU(21,"Transfer To "),t.qZA()()(),t.TgZ(22,"span",22)(23,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw().executeSearch()}),t.TgZ(24,"mat-icon"),t._uU(25,"search"),t.qZA()()()()(),t.YNc(26,je,5,7,"div",24),t.TgZ(27,"div",25),t.YNc(28,$e,42,20,"div",26),t.qZA(),t._UZ(29,"app-empty-layout",27),t.qZA()}if(2&n){const e=t.MAs(13),o=t.oxw();t.xp6(1),t.Q6J("formGroup",o.form),t.xp6(9),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e),t.xp6(3),t.Q6J("ngIf",o.form.get("dateFrom").invalid),t.xp6(9),t.Q6J("disabled",o.form.invalid),t.xp6(3),t.Q6J("ngIf",o.dataSource.data.length>0),t.xp6(2),t.Q6J("ngForOf",o.dataSource.data),t.xp6(1),t.Q6J("lastRowIndex",o.lastRowIndex)("title","No record found")("message","click search button for record")}}function Ge(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mat-list-item"),t._UZ(1,"img",48),t.TgZ(2,"h3",49),t._uU(3),t._UZ(4,"span",50),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"date"),t.qZA()(),t.TgZ(8,"p",51)(9,"span"),t._uU(10),t.qZA(),t._UZ(11,"span",50),t.TgZ(12,"span"),t._uU(13),t.qZA(),t._UZ(14,"span",50),t.TgZ(15,"span"),t._uU(16),t.ALo(17,"date"),t.qZA()(),t.TgZ(18,"button",52),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).remove(r)}),t.TgZ(19,"mat-icon"),t._uU(20,"delete"),t.qZA()()()}if(2&n){const e=i.$implicit;t.xp6(1),t.Q6J("src",e.photo,t.LSH),t.xp6(2),t.AsE(" ",e.name," (",e.customerCode,")"),t.xp6(3),t.hij("Hire: ",t.lcZ(7,7,e.hireDate),""),t.xp6(4),t.hij("Nationality: ",e.nationality,""),t.xp6(3),t.hij("WP: ",e.workPermitNumber,""),t.xp6(3),t.hij("WP Expiry: ",t.lcZ(17,9,e.workPermitExpiry),"")}}function Xe(n,i){if(1&n&&(t.TgZ(0,"mat-list"),t.YNc(1,Ge,21,11,"mat-list-item",47),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.selection.selected)}}let U=class{constructor(i,e,o,a,r,s,l,d){this.data=i,this.fb=e,this.sessionService=o,this.httpService=a,this.toastrService=r,this.fileService=s,this.dialogRef=l,this.appConfigService=d,this.color="bg-cyan-500",this.isEnquiry=!0,this.lastRowIndex=0}onKeyUp(){this.ngOnDestroy()}ngOnInit(){this.fullAddress="Check in to "+this.data.fullAddress,this.inquiry=new Tt,this.inquiry.tenantItemId=this.data.tenantItemId,this.inquiry.customerId=this.data.customerId,this.inquiry.roomId=this.data.roomId,this.inquiry.sortExpression="name",this.inquiry.action="checkin",this.initializeForm(),this.selection.isSelected=this.isChecked.bind(this)}ngOnDestroy(){}initializeForm(){this.form=this.fb.group({filter:[""],dateFrom:[new Date,m.kI.required],action:["checkin"]}),this.dataSource=new u.by,this.selection=new et.Ov(!0,[])}executeSearch(){this.inquiry.dateFrom=this.form.controls.dateFrom.value,this.inquiry.action=this.form.controls.action.value,this.inquiry.filter=this.form.controls.filter.value,this.httpService.HttpPost(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"occupancy/GetUnOccupiedPersonnel",this.inquiry).subscribe(e=>{this.inquirySuccess(e)},e=>this.inquiryFailed(e))}inquirySuccess(i){(0,He.D)(i.entity).pipe((0,Be.U)(e=>{e.photo=e.photo?this.fileService.loadImage(e.photo):this.appConfigService.getValue().avatar})).subscribe(),this.dataSource.data=i.entity,this.dataSource._updateChangeSubscription(),this.inquiry.totalRows=i.totalRows,this.inquiry.totalPages=i.totalPages,this.lastRowIndex=i.entity.length}inquiryFailed(i){this.lastRowIndex=0}done(){const i=Array();this.selection.selected.forEach(a=>{const r=new St;r.personalId=a.personalId,r.roomId=this.inquiry.roomId,r.dateFrom=this.inquiry.dateFrom,r.tenantItemId=this.inquiry.tenantItemId,i.push(r)}),this.httpService.HttpPost(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"occupancy/CheckIn",{entity:i}).subscribe(a=>{this.checkInSuccess(a)},a=>this.checkInFailed(a))}checkInSuccess(i){this.toastrService.ShowSuccessMessage(i.returnMessage[0]),this.close(!0)}checkInFailed(i){}onPaginateChange(i){this.inquiry.currentPageNumber=i.pageIndex+1,this.inquiry.pageSize=i.pageSize,this.executeSearch()}toggleSelection(i,e){return i?this.selection.toggle(e):null}isAllSelected(){return this.selection.selected.length==this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(i=>this.selection.select(i))}remove(i){let e=this.selection.selected.findIndex(o=>o.roomId===i.roomId);e>-1&&this.selection.deselect(this.selection.selected[e])}close(i){this.dialogRef.close(i)}isChecked(i){return!!this.selection.selected.find(o=>o.personalId===i.personalId)}};U.\u0275fac=function(i){return new(i||U)(t.Y36(_.WI),t.Y36(m.qu),t.Y36(p.mj),t.Y36(p.OE),t.Y36(p._W),t.Y36(p.Ip),t.Y36(_.so),t.Y36(B._))},U.\u0275cmp=t.Xpm({type:U,selectors:[["app-checkin"]],hostBindings:function(i,e){1&i&&t.NdJ("keyup.esc",function(){return e.onKeyUp()},!1,t.evT)},decls:21,vars:9,consts:[["fxFlexFill","","fxLayout","column"],["mat-dialog-title","","fxLayout","row","fxLayoutAlign","space-between center","fxFlex","50px",1,"m-l--16","m-r--16","m-t--16"],["mat-icon-button","",3,"mat-dialog-close"],["fxFlex","calc(100% - 100px)"],[4,"ngIf","ngIfElse"],["carts",""],["fxFlex","50px","align","end"],["mat-icon-button","",3,"fxHide","click"],["mat-icon-button","",3,"fxHide","disabled","click"],[3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","10px grid",1,"matero-mat-form-field"],["fxFlex","30","fxFlex.md","30","fxFlex.sm","50","fxFlex.xs","100"],["matInput","","formControlName","filter"],["matInput","","formControlName","dateFrom","appDatemask","",3,"matDatepicker"],["matSuffix","",3,"for"],["dateFrom",""],[4,"ngIf"],["fxFlex","30","fxFlex.md","30","fxFlex.sm","50","fxFlex.xs","100","fxLayout","row","fxLayoutAlign","center center",1,"f-s-14"],["formControlName","action"],["value","checkin"],["fxFlex","20px"],["value","transfer"],["fxFlex","10","fxFlex.md","10","fxFlex.sm","50","fxFlex.xs","100","fxLayout","row","fxLayoutAlign","center center"],["mat-icon-button","","color","primary","fxFlex","50","fxFlex.sm","100","fxFlex.md","50",3,"disabled","click"],["fxLayout","row wrap","fxLayoutAlign","space-between center",4,"ngIf"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutGap","12px grid","fxLayoutAlign","start stretch"],["fxFlex","25","fxFlex.md","33.33","fxFlex.sm","50","fxFlex.xs","100","fxFlexFill","",4,"ngFor","ngForOf"],[1,"m-t-16",3,"lastRowIndex","title","message"],["fxLayout","row wrap","fxLayoutAlign","space-between center"],["fxFlex.gt-xs","50","fxFlex","100"],[3,"checked","indeterminate","change"],["fxFlex.gt-xs","50","fxFlex","100",2,"display","block"],[3,"length","showFirstLastButtons","pageIndex","pageSize","pageSizeOptions","page"],["fxFlex","25","fxFlex.md","33.33","fxFlex.sm","50","fxFlex.xs","100","fxFlexFill",""],["appMaterialElevation","","raisedElevation","16",1,"r-0",3,"defaultElevation","ngClass"],[2,"position","absolute","right","8px",3,"checked","click","change"],[1,"text-center"],["alt","","width","64",1,"m-b-8","r-full",3,"src"],[1,"matero-user-panel-name"],[1,"matero-user-panel-email"],["role","list",1,"m-x--16","m-b--16","bg-white"],[1,"m-b-8"],["matLine","",1,"f-s-12","f-w-100"],["cols","2","rowHeight","20px"],[1,"flex-start"],[1,"flex-end"],["inset",""],[4,"ngFor","ngForOf"],["matListAvatar","","alt","","width","64",1,"m-b-8","r-full",3,"src"],["matLine","","fxLayout","row wrap","fxFlex.gt-sm","25","fxFlex.gt-xs","50","fxFlex","100","fxLayoutAlign","space-between center"],["fxFlex",""],["matLine","","fxLayout","row wrap","fxFlex.gt-sm","25","fxFlex.gt-xs","50","fxFlex","100","fxLayoutAlign","space-between center",1,"f-s-12","f-w-100"],["mat-icon-button","",2,"margin-left","20px",3,"click"]],template:function(i,e){if(1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"button",2)(5,"mat-icon"),t._uU(6,"close"),t.qZA()()(),t.TgZ(7,"mat-dialog-content",3),t.YNc(8,Ve,30,10,"div",4),t.YNc(9,Xe,2,1,"ng-template",null,5,t.W1O),t.qZA(),t.TgZ(11,"mat-dialog-actions",6)(12,"button",7),t.NdJ("click",function(){return e.isEnquiry=!e.isEnquiry}),t.TgZ(13,"mat-icon"),t._uU(14,"arrow_back"),t.qZA()(),t.TgZ(15,"button",8),t.NdJ("click",function(){return e.isEnquiry=!e.isEnquiry}),t.TgZ(16,"mat-icon"),t._uU(17,"arrow_forward"),t.qZA()(),t.TgZ(18,"button",8),t.NdJ("click",function(){return e.done()}),t.TgZ(19,"mat-icon"),t._uU(20,"done_all"),t.qZA()()()()),2&i){const o=t.MAs(10);t.xp6(3),t.Oqu(e.fullAddress),t.xp6(1),t.Q6J("mat-dialog-close",!1),t.xp6(4),t.Q6J("ngIf",e.isEnquiry)("ngIfElse",o),t.xp6(4),t.Q6J("fxHide",e.isEnquiry),t.xp6(3),t.Q6J("fxHide",!e.isEnquiry)("disabled",e.selection.selected.length<=0),t.xp6(3),t.Q6J("fxHide",e.isEnquiry)("disabled",e.selection.selected.length<=0)}},directives:[g.s9,g.xw,_.uh,g.Wh,g.yH,D.lW,_.ZT,A.Hw,_.xY,h.O5,m._Y,m.JL,m.sg,g.SQ,v.KE,v.hX,K.Nt,m.Fj,m.JJ,m.u,S.hl,dt.v,S.nW,v.R9,S.Mq,v.TO,at.VQ,at.U0,nt.oG,M.NW,h.sg,E.a8,$.F,h.mk,L.oO,y.i$,y.Tg,q.X2,rt.Il,rt.DX,ot.d,W.B,y.eA,_.H8,L.b8],pipes:[h.uU],styles:[".generation-wrap[_ngcontent-%COMP%]{text-align:center}.generation-code[_ngcontent-%COMP%]{padding:20px 0;font-size:20px}.generation-title[_ngcontent-%COMP%]{margin:0 0 16px;font-weight:500;font-size:16px;line-height:32px}.generation-message[_ngcontent-%COMP%]{margin:0 0 16px;font-weight:400;font-size:16px;line-height:28px}.fullscreen-height[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;top:0;bottom:0;left:0;right:0}.search[_ngcontent-%COMP%]{height:64px;display:flex;gap:10%;flex-direction:row;justify-content:center}.search[_ngcontent-%COMP%]   mat-radio-group[_ngcontent-%COMP%]{margin-top:20px}.search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px}@media screen and (max-width: 960px){.search[_ngcontent-%COMP%]{background-color:#0ff;display:grid;grid-gap:10%;gap:10%}}"]}),U=(0,T.gn)([(0,f.c)()],U);var I=c(1742),O=c(5439);function Ke(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Please enter check out date "),t.qZA())}function ti(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",24)(1,"div",25)(2,"mat-checkbox",26),t.NdJ("change",function(a){t.CHM(e);const r=t.oxw(2);return a?r.toggleAllRows():null}),t.qZA()(),t.TgZ(3,"div",25)(4,"mat-paginator",27),t.NdJ("page",function(a){return t.CHM(e),t.oxw(2).onPaginateChange(a)}),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected()),t.xp6(2),t.Q6J("length",e.inquiry.totalRows)("showFirstLastButtons",!0)("pageIndex",e.inquiry.currentPageIndex)("pageSize",e.inquiry.pageSize)("pageSizeOptions",e.inquiry.pageSizeOptions)}}const ei=function(n){return["text-white",n]};function ii(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",28)(1,"mat-card",29)(2,"mat-checkbox",30),t.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const s=t.CHM(e).$implicit;return t.oxw(2).toggleSelection(a,s)}),t.qZA(),t.TgZ(3,"div",31),t._UZ(4,"img",32),t.TgZ(5,"h4",33),t._uU(6),t.qZA(),t.TgZ(7,"h5",34),t._uU(8),t.qZA(),t.TgZ(9,"h5",34),t._uU(10),t.qZA()(),t.TgZ(11,"mat-list",35)(12,"mat-list-item",36)(13,"p",37)(14,"mat-grid-list",38)(15,"mat-grid-tile",39),t._uU(16,"Check in"),t.qZA(),t.TgZ(17,"mat-grid-tile",40),t._uU(18),t.ALo(19,"date"),t.qZA(),t.TgZ(20,"mat-grid-tile",41),t._uU(21,"Company"),t.qZA(),t.TgZ(22,"mat-grid-tile",42),t._uU(23),t.qZA(),t.TgZ(24,"mat-grid-tile",41),t._uU(25,"Hire Date"),t.qZA(),t.TgZ(26,"mat-grid-tile",42),t._uU(27),t.ALo(28,"date"),t.qZA(),t.TgZ(29,"mat-grid-tile",41),t._uU(30,"Termination Date"),t.qZA(),t.TgZ(31,"mat-grid-tile",42),t._uU(32),t.ALo(33,"date"),t.qZA()()()(),t._UZ(34,"mat-divider"),t.TgZ(35,"mat-list-item",43)(36,"p",37)(37,"mat-grid-list",38)(38,"mat-grid-tile",41),t._uU(39,"Permit No."),t.qZA(),t.TgZ(40,"mat-grid-tile",42),t._uU(41),t.qZA(),t.TgZ(42,"mat-grid-tile",41),t._uU(43,"Permit Expiry"),t.qZA(),t.TgZ(44,"mat-grid-tile",42),t._uU(45),t.ALo(46,"date"),t.qZA()()()()()()()}if(2&n){const e=i.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("defaultElevation",2)("ngClass",t.VKq(21,ei,o.color)),t.xp6(1),t.Q6J("checked",o.selection.isSelected(e)),t.xp6(2),t.Q6J("src",e.photo,t.LSH),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.idNumber),t.xp6(2),t.Oqu(e.nationality),t.xp6(8),t.Oqu(t.lcZ(19,13,e.dateFrom)),t.xp6(5),t.Oqu(e.customer),t.xp6(4),t.Oqu(t.lcZ(28,15,e.hireDate)),t.xp6(5),t.Oqu(t.lcZ(33,17,e.resignDate)),t.xp6(9),t.Oqu(e.workPermitNumber),t.xp6(4),t.Oqu(t.lcZ(46,19,e.workPermitExpiry))}}function ni(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"form",10)(2,"div",11)(3,"mat-form-field",12)(4,"mat-label"),t._uU(5,"Name"),t.qZA(),t._UZ(6,"input",13),t.qZA(),t.TgZ(7,"mat-form-field",12)(8,"mat-label"),t._uU(9,"Check out date"),t.qZA(),t._UZ(10,"input",14)(11,"mat-datepicker-toggle",15)(12,"mat-datepicker",null,16),t.YNc(14,Ke,2,0,"mat-error",17),t.qZA(),t.TgZ(15,"span",18)(16,"button",19),t.NdJ("click",function(){return t.CHM(e),t.oxw().executeSearch()}),t.TgZ(17,"mat-icon"),t._uU(18,"search"),t.qZA()()()()(),t.YNc(19,ti,5,7,"div",20),t.TgZ(20,"div",21),t.YNc(21,ii,47,23,"div",22),t.qZA(),t._UZ(22,"app-empty-layout",23),t.qZA()}if(2&n){const e=t.MAs(13),o=t.oxw();t.xp6(1),t.Q6J("formGroup",o.form),t.xp6(9),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e),t.xp6(3),t.Q6J("ngIf",o.form.get("dateTo").invalid),t.xp6(2),t.Q6J("disabled",o.form.invalid),t.xp6(3),t.Q6J("ngIf",o.dataSource.data.length>0),t.xp6(2),t.Q6J("ngForOf",o.dataSource.data),t.xp6(1),t.Q6J("lastRowIndex",o.lastRowIndex)("title","No record found")("message","click search button for record")}}function oi(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mat-list-item"),t._UZ(1,"img",45),t.TgZ(2,"h3",46),t._uU(3),t._UZ(4,"span",47),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"date"),t.qZA(),t._UZ(8,"span",47),t.TgZ(9,"span"),t._uU(10),t.ALo(11,"date"),t.qZA()(),t.TgZ(12,"p",48)(13,"span"),t._uU(14),t.qZA(),t._UZ(15,"span",47),t.TgZ(16,"span"),t._uU(17),t.qZA(),t._UZ(18,"span",47),t.TgZ(19,"span"),t._uU(20),t.ALo(21,"date"),t.qZA()(),t.TgZ(22,"button",49),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).remove(r)}),t.TgZ(23,"mat-icon"),t._uU(24,"delete"),t.qZA()()()}if(2&n){const e=i.$implicit;t.xp6(1),t.Q6J("src",e.photo,t.LSH),t.xp6(2),t.AsE(" ",e.name," (",e.customerCode,")"),t.xp6(3),t.hij("Check in: ",t.lcZ(7,8,e.dateFrom),""),t.xp6(4),t.hij("Hire date: ",t.lcZ(11,10,e.hireDate),""),t.xp6(4),t.hij("Nationality: ",e.nationality,""),t.xp6(3),t.hij("WP: ",e.workPermitNumber,""),t.xp6(3),t.hij("WP Expiry: ",t.lcZ(21,12,e.workPermitExpiry),"")}}function ai(n,i){if(1&n&&(t.TgZ(0,"mat-list"),t.YNc(1,oi,25,14,"mat-list-item",44),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.selection.selected)}}let F=class{constructor(i,e,o,a,r,s,l,d,x,C,mt){this.data=i,this.fb=e,this.router=o,this.activatedRoute=a,this.sessionService=r,this.httpService=s,this.toastrService=l,this.actionService=d,this.fileService=x,this.dialogRef=C,this.appConfigService=mt,this.isEnquiry=!0,this.color="bg-cyan-500",this.lastRowIndex=-1}onKeyUp(){this.ngOnDestroy()}ngOnInit(){new Date,this.inquiry=new Tt,this.inquiry.roomId=this.data.roomId,this.inquiry.action="checkout",this.inquiry.sortExpression="name",this.fullAddress="Check out occupant from "+this.data.fullAddress,this.initializeForm(),this.selection.isSelected=this.isChecked.bind(this),this.executeSearch()}ngOnDestroy(){}initializeForm(){this.form=this.fb.group({filter:[""],dateTo:[new Date,m.kI.required]}),this.dataSource=new u.by,this.selection=new et.Ov(!0,[])}executeSearch(){this.httpService.HttpPost(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"occupancy/GetActiveOccupantsByRoomId",this.inquiry).subscribe(e=>{this.inquirySuccess(e)},e=>this.inquiryFailed(e))}inquirySuccess(i){i.entity.map(e=>{e.photo=e.photo?this.fileService.loadImage(e.photo):this.appConfigService.getValue().avatar}),this.dataSource.data=i.entity,this.dataSource._updateChangeSubscription(),this.inquiry.totalRows=i.totalRows,this.inquiry.totalPages=i.totalPages,this.lastRowIndex=i.entity.length}inquiryFailed(i){this.lastRowIndex=0}done(){O(I.$.min,I.t.uk).toDate();let e=this.form.controls.dateTo.value;const o=new Array;let a=new Array;if(this.selection.selected.forEach(l=>{const d=new St;O(l.dateFrom).startOf("day")>=e&&a.push(l.name),d.roomId=this.inquiry.roomId,d.dateTo=e,d.tenantItemId=this.inquiry.tenantItemId,d.occupancyId=l.occupancyId,d.personalId=l.personalId,d.dateFrom=l.dateFrom,o.push(d)}),a.length>0){let l=a.join(", ");this.toastrService.ShowErrorMessage("Invalid check out date for "+l)}else this.httpService.HttpPost(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"occupancy/CheckOut",{entity:o}).subscribe(l=>{this.checkOutSuccess(l)},l=>this.checkOutFailed(l))}checkOutSuccess(i){this.toastrService.ShowSuccessMessage(i.returnMessage[0]),this.close(!0)}checkOutFailed(i){let e=i.error;i.status>0&&e.returnMessage&&this.toastrService.ShowErrorMessage(e.returnMessage[0])}onPaginateChange(i){this.inquiry.currentPageNumber=i.pageIndex+1,this.inquiry.pageSize=i.pageSize,this.executeSearch()}toggleSelection(i,e){return i?this.selection.toggle(e):null}isAllSelected(){return this.selection.selected.length==this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(i=>this.selection.select(i))}remove(i){let e=this.selection.selected.findIndex(o=>o.roomId===i.roomId);e>-1&&this.selection.deselect(this.selection.selected[e])}close(i){this.dialogRef.close(i)}get isOccupantStep(){return this.selection.selected.length>0}isChecked(i){return!!this.selection.selected.find(o=>o.personalId===i.personalId)}};function ri(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.dateTo))}}function si(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"present"),t.qZA())}function ci(n,i){if(1&n&&(t.TgZ(0,"mat-list-item")(1,"div",6)(2,"div",7),t._UZ(3,"img",8),t.qZA(),t.TgZ(4,"div",9)(5,"div",10)(6,"div",11)(7,"h3",12),t._uU(8),t.qZA(),t.TgZ(9,"span",13)(10,"span",14),t._uU(11," Nationality"),t.qZA(),t._uU(12),t.qZA(),t.TgZ(13,"span",13)(14,"span",14),t._uU(15," Race "),t.qZA(),t._uU(16),t.qZA(),t.TgZ(17,"span",13)(18,"span",14),t._uU(19," Country "),t.qZA(),t._uU(20),t.qZA(),t.TgZ(21,"h2",12),t._uU(22),t.qZA()(),t.TgZ(23,"div",15)(24,"h3",12)(25,"span"),t._uU(26),t.ALo(27,"date"),t.qZA(),t.YNc(28,ri,3,3,"span",16),t.YNc(29,si,2,0,"span",16),t.qZA(),t.TgZ(30,"span",13)(31,"span",14),t._uU(32," Hire Date"),t.qZA(),t._uU(33),t.ALo(34,"date"),t.qZA(),t.TgZ(35,"span",13)(36,"span",14),t._uU(37," Resign Date "),t.qZA(),t._uU(38),t.ALo(39,"date"),t.qZA()()()()()()),2&n){const e=i.$implicit;t.xp6(3),t.Q6J("src",e.photo,t.LSH),t.xp6(5),t.hij(" ",e.name," "),t.xp6(4),t.hij(" ",e.nationality," "),t.xp6(4),t.hij(" ",e.race," "),t.xp6(4),t.hij(" ",e.country," "),t.xp6(2),t.hij(" ",e.customer," "),t.xp6(4),t.hij("",t.lcZ(27,11,e.dateFrom)," - "),t.xp6(2),t.Q6J("ngIf",null!==e.dateTo),t.xp6(1),t.Q6J("ngIf",null===e.dateTo),t.xp6(4),t.hij(" ",t.lcZ(34,13,e.hireDate)," "),t.xp6(5),t.hij(" ",t.lcZ(39,15,e.resignDate)," ")}}F.\u0275fac=function(i){return new(i||F)(t.Y36(_.WI),t.Y36(m.qu),t.Y36(P.F0),t.Y36(P.gz),t.Y36(p.mj),t.Y36(p.OE),t.Y36(p._W),t.Y36(p.cw),t.Y36(p.Ip),t.Y36(_.so),t.Y36(B._))},F.\u0275cmp=t.Xpm({type:F,selectors:[["app-checkout"]],hostBindings:function(i,e){1&i&&t.NdJ("keyup.esc",function(){return e.onKeyUp()},!1,t.evT)},decls:21,vars:9,consts:[["fxLayout","column","fxFlexFill",""],["mat-dialog-title","","fxLayout","row","fxLayoutAlign","space-between center","fxFlex","50px"],["mat-icon-button","",3,"mat-dialog-close"],["fxFlex","calc(100% - 100px)"],[4,"ngIf","ngIfElse"],["carts",""],["fxFlex","50px","align","end"],["mat-icon-button","","matTooltip","back",3,"fxHide","click"],["mat-icon-button","","matTooltip","next",3,"fxHide","disabled","click"],["mat-icon-button","","matTooltip","check out",3,"fxHide","disabled","click"],[3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","10px grid",1,"matero-mat-form-field"],["fxFlex","45","fxFlex.md","45","fxFlex.sm","50","fxFlex.xs","100"],["matInput","","formControlName","filter"],["matInput","","formControlName","dateTo","appDatemask","",3,"matDatepicker"],["matSuffix","",3,"for"],["dateTo",""],[4,"ngIf"],["fxFlex","10","fxFlex.md","10","fxFlex.sm","50","fxFlex.xs","100","fxLayoutAlign","center center"],["mat-icon-button","","color","primary","fxFlex","50","fxFlex.sm","100","fxFlex.md","50",3,"disabled","click"],["fxLayout","row wrap","fxLayoutAlign","space-between center",4,"ngIf"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutGap","12px grid"],["fxFlex","25","fxFlex.md","33.33","fxFlex.sm","50","fxFlex.xs","100",4,"ngFor","ngForOf"],[1,"m-t-16",3,"lastRowIndex","title","message"],["fxLayout","row wrap","fxLayoutAlign","space-between center"],["fxFlex.gt-xs","50","fxFlex","100"],[3,"checked","indeterminate","change"],[3,"length","showFirstLastButtons","pageIndex","pageSize","pageSizeOptions","page"],["fxFlex","25","fxFlex.md","33.33","fxFlex.sm","50","fxFlex.xs","100"],["appMaterialElevation","","raisedElevation","16",1,"r-0",3,"defaultElevation","ngClass"],[2,"position","absolute","right","8px",3,"checked","click","change"],[1,"text-center"],["alt","","width","64",1,"m-b-8","r-full",3,"src"],[1,"matero-user-panel-name"],[1,"matero-user-panel-email"],[1,"m-x--16","m-b--16","bg-white"],[2,"height","fit-content","margin-bottom","5px"],["matLine","",1,"f-s-12","f-w-100"],["cols","2","rowHeight","20px"],[1,"f-s-12","f-w-600","flex-start"],[1,"f-s-12","f-w-600","flex-end"],[1,"flex-start"],[1,"flex-end"],[2,"height","fit-content","padding-top","5px","padding-bottom","5px"],[4,"ngFor","ngForOf"],["matListAvatar","","alt","","width","64",1,"m-b-8","r-full",3,"src"],["matLine","","fxLayout","row wrap","fxFlex.gt-sm","25","fxFlex.gt-xs","50","fxFlex","100","fxLayoutAlign","space-between center"],["fxFlex",""],["matLine","","fxLayout","row wrap","fxFlex.gt-sm","25","fxFlex.gt-xs","50","fxFlex","100","fxLayoutAlign","space-between center",1,"f-s-12","f-w-100"],["mat-icon-button","",2,"margin-left","20px",3,"click"]],template:function(i,e){if(1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"button",2)(5,"mat-icon"),t._uU(6,"close"),t.qZA()()(),t.TgZ(7,"mat-dialog-content",3),t.YNc(8,ni,23,10,"div",4),t.YNc(9,ai,2,1,"ng-template",null,5,t.W1O),t.qZA(),t.TgZ(11,"mat-dialog-actions",6)(12,"button",7),t.NdJ("click",function(){return e.isEnquiry=!e.isEnquiry}),t.TgZ(13,"mat-icon"),t._uU(14,"arrow_back"),t.qZA()(),t.TgZ(15,"button",8),t.NdJ("click",function(){return e.isEnquiry=!e.isEnquiry}),t.TgZ(16,"mat-icon"),t._uU(17,"arrow_forward"),t.qZA()(),t.TgZ(18,"button",9),t.NdJ("click",function(){return e.done()}),t.TgZ(19,"mat-icon"),t._uU(20,"done_all"),t.qZA()()()()),2&i){const o=t.MAs(10);t.xp6(3),t.Oqu(e.fullAddress),t.xp6(1),t.Q6J("mat-dialog-close",!1),t.xp6(4),t.Q6J("ngIf",e.isEnquiry)("ngIfElse",o),t.xp6(4),t.Q6J("fxHide",e.isEnquiry),t.xp6(3),t.Q6J("fxHide",!e.isEnquiry)("disabled",e.selection.selected.length<=0||e.form.get("dateTo").invalid),t.xp6(3),t.Q6J("fxHide",e.isEnquiry)("disabled",e.selection.selected.length<=0)}},directives:[g.xw,g.s9,_.uh,g.Wh,g.yH,D.lW,_.ZT,A.Hw,_.xY,h.O5,m._Y,m.JL,m.sg,g.SQ,v.KE,v.hX,K.Nt,m.Fj,m.JJ,m.u,S.hl,dt.v,S.nW,v.R9,S.Mq,v.TO,nt.oG,M.NW,h.sg,E.a8,$.F,h.mk,L.oO,y.i$,y.Tg,q.X2,rt.Il,rt.DX,ot.d,W.B,y.eA,_.H8,st.gM,L.b8],pipes:[h.uU],styles:[""]}),F=(0,T.gn)([(0,f.c)()],F);let Zt=(()=>{class n{constructor(e,o,a,r,s,l,d){this.data=e,this.dialogRef=o,this.sessionService=a,this.httpService=r,this.fileService=s,this.toastrService=l,this.appConfigService=d,this.title=""}ngOnInit(){this.title=this.data.fullAddress,this.inquiry=new k.U,this.inquiry.sortExpression="dateFrom",this.inquiry.sortDirection="DESC",this.dataSource=new u.by,this.executeSearch()}ngAfterViewInit(){}executeSearch(){let e=JSON.stringify(this.inquiry),o=JSON.parse(e);o.roomId=this.data.roomId,o.status="advanceCheckOut",this.httpService.HttpPost(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"occupancy/GetActiveOccupantsByRoomIDWithDate",JSON.stringify(o)).subscribe(r=>{this.getSuccess(r)},r=>this.getFailed(r))}getSuccess(e){e.entity.map(o=>{o.photo=o.base64String&&null!==o.base64String?this.fileService.loadImage(o.base64String):this.appConfigService.getValue().avatar}),this.dataSource.data=e.entity,this.inquiry.totalPages=e.totalPages,this.inquiry.totalRows=e.totalRows,this.dataSource._updateChangeSubscription()}getFailed(e){}onPaginateChange(e){this.inquiry.currentPageNumber=e.pageIndex+1,this.inquiry.pageSize=e.pageSize,this.executeSearch()}resetSearch(){this.inquiry.currentPageNumber=1,this.inquiry.filter="",this.executeSearch()}sortData(e){this.inquiry.currentPageNumber=1,this.inquiry.sortDirection=e.direction,this.inquiry.sortExpression=e.active,this.executeSearch()}close(e){this.dialogRef.close(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.WI),t.Y36(_.so),t.Y36(p.mj),t.Y36(p.OE),t.Y36(p.Ip),t.Y36(p._W),t.Y36(B._))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-occupant"]],decls:10,vars:3,consts:[["fxLayout","column"],["mat-dialog-title","","fxLayout","row","fxLayoutAlign","space-between center","fxFlex","50px",1,"m-l--16","m-r--16","m-t--16"],["mat-icon-button","",3,"mat-dialog-close"],["fxFlex","calc(100% - 50px)"],[1,"app-list"],[4,"ngFor","ngForOf"],["fxLayout","row wrap","fxFlexFill",""],["fxFlex","15","fxFlex.xs","20","fxFlex.sm","20","fxFlex.md","20","fxLayout","row","fxLayoutAlign","center center"],["matListAvatar","",3,"src"],["fxFlex","85","fxFlex.xs","80","fxFlex.sm","80","fxFlex.md","80"],["fxLayout","row wrap","fxLayout.sm","column","fxLayout.xs","column"],["fxFlex","60"],["matLine",""],["matLine","",1,"f-s-14","f-w-600"],[1,"f-s-14","f-w-200"],["fxFlex","40"],[4,"ngIf"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"button",2)(5,"mat-icon"),t._uU(6,"close"),t.qZA()()(),t.TgZ(7,"mat-dialog-content",3)(8,"mat-list",4),t.YNc(9,ci,40,17,"mat-list-item",5),t.qZA()()()),2&e&&(t.xp6(3),t.Oqu(o.title),t.xp6(1),t.Q6J("mat-dialog-close",!1),t.xp6(5),t.Q6J("ngForOf",o.dataSource.data))},directives:[g.xw,_.uh,g.Wh,g.yH,D.lW,_.ZT,A.Hw,_.xY,y.i$,h.sg,y.Tg,g.s9,y.eA,q.X2,h.O5],pipes:[h.uU],styles:[".app-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{height:auto;width:100%;border-top:1px solid #e0e0e0;border-left:1px solid #e0e0e0;border-right:1px solid #e0e0e0}.app-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]:last-child{border-bottom:1px solid #e0e0e0}.mat-list-item[_ngcontent-%COMP%]   .mat-list-avatar[_ngcontent-%COMP%]{height:100px;width:100px;-o-object-fit:cover;object-fit:cover}"]}),n})();function li(n,i){1&n&&(t.TgZ(0,"th",37),t._uU(1," company"),t.qZA())}function di(n,i){if(1&n&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.customerCode," ")}}function ui(n,i){1&n&&(t.TgZ(0,"th",39),t._uU(1,"Unit"),t.qZA())}function pi(n,i){if(1&n&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.fullAddress," ")}}function mi(n,i){1&n&&(t.TgZ(0,"th",41),t._uU(1,"category"),t.qZA())}function hi(n,i){if(1&n&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.category," ")}}function gi(n,i){1&n&&(t.TgZ(0,"th",42),t._uU(1,"location"),t.qZA())}function _i(n,i){if(1&n&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.location," ")}}function fi(n,i){1&n&&(t.TgZ(0,"th",43),t._uU(1,"lease from"),t.qZA())}function xi(n,i){if(1&n&&(t.TgZ(0,"td",40),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.dateFrom)," ")}}function yi(n,i){1&n&&(t.TgZ(0,"th",44),t._uU(1,"lease to"),t.qZA())}function vi(n,i){if(1&n&&(t.TgZ(0,"td",40),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.dateTo)," ")}}function Ci(n,i){1&n&&(t.TgZ(0,"th",45),t._uU(1,"Occupancy"),t.qZA())}const qt=function(n){return{disabled:n}};function bi(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",46)(1,"span",47),t.NdJ("click",function(){const a=t.CHM(e),r=a.$implicit,s=a.index;return t.oxw(2).checkOut(r,s)}),t._uU(2),t.qZA()()}if(2&n){const e=i.$implicit;t.xp6(1),t.Q6J("ngClass",t.VKq(2,qt,e.totalOccupant<=0)),t.xp6(1),t.hij(" ",e.totalOccupant," ")}}function Si(n,i){1&n&&(t.TgZ(0,"th",48),t._uU(1,"Advance check out"),t.qZA())}function Ti(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",46)(1,"span",49),t.NdJ("click",function(){const a=t.CHM(e),r=a.$implicit,s=a.index;return t.oxw(2).getAdvanceCheckOut(r,s)}),t._uU(2),t.qZA()()}if(2&n){const e=i.$implicit;t.xp6(1),t.Q6J("ngClass",t.VKq(2,qt,e.totalAdvanceCheckOut<=0)),t.xp6(1),t.hij(" ",e.totalAdvanceCheckOut," ")}}function Zi(n,i){1&n&&(t.TgZ(0,"th",50),t._uU(1,"Vacant"),t.qZA())}function qi(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",46)(1,"span",51),t.NdJ("click",function(){const a=t.CHM(e),r=a.$implicit,s=a.index;return t.oxw(2).checkIn(r,s)}),t._uU(2),t.qZA()()}if(2&n){const e=i.$implicit;t.xp6(2),t.hij(" ",e.totalVacant," ")}}function Ai(n,i){1&n&&t._UZ(0,"tr",52)}function wi(n,i){1&n&&t._UZ(0,"tr",53)}function Ui(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",3)(2,"div",4)(3,"mat-radio-group",5),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().selection=a})("change",function(a){return t.CHM(e),t.oxw().radioChange(a)}),t.TgZ(4,"label",6),t._uU(5," Status"),t.qZA(),t.TgZ(6,"mat-radio-button",7),t._uU(7,"Active "),t.qZA(),t.TgZ(8,"mat-radio-button",8),t._uU(9,"Expiry"),t.qZA(),t.TgZ(10,"mat-radio-button",9),t._uU(11,"Future"),t.qZA()()(),t.TgZ(12,"div",4)(13,"mat-paginator",10),t.NdJ("page",function(a){return t.CHM(e),t.oxw().onPaginateChange(a)}),t.qZA()()(),t.TgZ(14,"div",11)(15,"table",12),t.NdJ("matSortChange",function(a){return t.CHM(e),t.oxw().sortData(a)}),t.ynx(16,13),t.YNc(17,li,2,0,"th",14),t.YNc(18,di,2,1,"td",15),t.BQk(),t.ynx(19,16),t.YNc(20,ui,2,0,"th",17),t.YNc(21,pi,2,1,"td",18),t.BQk(),t.ynx(22,19),t.YNc(23,mi,2,0,"th",20),t.YNc(24,hi,2,1,"td",18),t.BQk(),t.ynx(25,21),t.YNc(26,gi,2,0,"th",22),t.YNc(27,_i,2,1,"td",18),t.BQk(),t.ynx(28,23),t.YNc(29,fi,2,0,"th",24),t.YNc(30,xi,3,3,"td",18),t.BQk(),t.ynx(31,25),t.YNc(32,yi,2,0,"th",26),t.YNc(33,vi,3,3,"td",18),t.BQk(),t.ynx(34,27),t.YNc(35,Ci,2,0,"th",28),t.YNc(36,bi,3,4,"td",29),t.BQk(),t.ynx(37,30),t.YNc(38,Si,2,0,"th",31),t.YNc(39,Ti,3,4,"td",29),t.BQk(),t.ynx(40,32),t.YNc(41,Zi,2,0,"th",33),t.YNc(42,qi,3,1,"td",29),t.BQk(),t.YNc(43,Ai,1,0,"tr",34),t.YNc(44,wi,1,0,"tr",35),t.qZA()(),t.TgZ(45,"mat-paginator",36),t.NdJ("page",function(a){return t.CHM(e),t.oxw().onPaginateChange(a)}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.selection),t.xp6(10),t.Q6J("length",e.inquiry.totalRows)("showFirstLastButtons",!0)("pageIndex",e.inquiry.currentPageIndex)("pageSize",e.inquiry.pageSize)("pageSizeOptions",e.inquiry.pageSizeOptions),t.xp6(1),t.Q6J("defaultElevation",2),t.xp6(1),t.Q6J("dataSource",e.dataSource),t.xp6(28),t.Q6J("matHeaderRowDef",e.inquiry.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.inquiry.displayedColumns),t.xp6(1),t.Q6J("length",e.inquiry.totalRows)("showFirstLastButtons",!0)("pageSize",e.inquiry.pageSize)("pageIndex",e.inquiry.currentPageIndex)("pageSizeOptions",e.inquiry.pageSizeOptions)}}let Q=class{constructor(i,e,o,a,r,s,l,d){this.router=i,this.sessionService=e,this.httpService=o,this.toastrService=a,this.actionService=r,this.fileService=s,this.dialog=l,this.dialogService=d,this.selection="active",this.title="Occupany Inquiry",this.lastRowIndex=null,this.lastSearchValue="",this.actionService.inquiryMode=!0,this.refereshEventSubscription=this.actionService.toggleRefreshEvent.pipe((0,f.t)(this)).subscribe(x=>this.executeSearch()),this.searchEventSubscription=this.actionService.toggleSearchEvent.pipe((0,f.t)(this)).subscribe(x=>{this.executeSearch()})}ngOnInit(){this.inquiry=new k.U,this.inquiry.displayedColumns=["customerCode","fullAddress","category","dateFrom","dateTo","totalOccupant","totalAdvanceCheckOut","totalVacant"],this.inquiry.sortExpression="dateFrom",this.dataSource=new u.by,this.initializeToolbar(),this.executeSearch()}ngOnDestroy(){}initializeToolbar(){const i=new V.P;i.showReferesh=!0,i.title=this.title,this.actionService.setToolbarSettings(i)}executeSearch(){this.lastSearchValue=this.inquiry.filter;let i=Object.assign(this.inquiry,{selection:this.selection}),e=JSON.stringify(i);this.httpService.HttpPost(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"occupancy/inquiry",e).subscribe(a=>{this.inquirySuccess(a)},a=>this.inquiryFailed(a))}inquirySuccess(i){this.dataSource.data=i.entity,this.dataSource._updateChangeSubscription(),this.inquiry.totalRows=i.totalRows,this.inquiry.totalPages=i.totalPages,this.lastRowIndex=i.entity.length}inquiryFailed(i){}onPaginateChange(i){this.inquiry.currentPageNumber=i.pageIndex+1,this.inquiry.pageSize=i.pageSize,this.executeSearch()}sortData(i){this.inquiry.currentPageNumber=1,this.inquiry.sortDirection=i.direction,this.inquiry.sortExpression=i.active,this.executeSearch()}resetSearch(){this.lastSearchValue="",this.inquiry.filter="",this.executeSearch()}checkIn(i,e){const o=new _.vA;o.autoFocus=!0,o.height="80%",o.width="100%",o.panelClass="matero-dialog",o.data={tenantItemId:i.tenantItemId,fullAddress:i.fullAddress,roomId:i.roomId,customerId:i.customerId,customerCode:i.customerCode},this.dialog.open(U,o).afterClosed().subscribe(r=>{r&&this.executeSearch()})}checkOut(i,e){if(i.totalOccupant<=0)return;const o=new _.vA;o.autoFocus=!0,o.height="80%",o.width="95%",o.panelClass="matero-dialog",o.data={tenantItemId:i.tenantItemId,fullAddress:i.fullAddress,roomId:i.roomId,customerId:i.customerId},this.dialog.open(F,o).afterClosed().subscribe(r=>{r&&this.executeSearch()})}getAdvanceCheckOut(i,e){if(i.totalAdvanceCheckOut<=0)return;const o=new _.vA;o.autoFocus=!0,o.height="80%",o.width="95%",o.panelClass="matero-dialog",o.data={tenantItemId:i.tenantItemId,fullAddress:i.fullAddress,roomId:i.roomId,customerId:i.customerId},this.dialog.open(Zt,o).afterClosed().subscribe(r=>{})}editLineItem(i,e){this.router.navigate(["/dormitorymanagement",{outlets:{aside:["occupancy",{id:i.tenantItemId,fullAddress:i.fullAddress,roomId:i.roomId,customerId:i.customerId}]}}],{skipLocationChange:!0}),this.actionService.toggleAsideOpenEvent.emit()}getTenant(i,e){this.router.navigate(["/dormitorymanagement/tenant/maintenance"],{queryParams:{id:i.tenantId}})}optionsEvent(i){}radioChange(i){i.value!==this.selection&&this.executeSearch()}};Q.\u0275fac=function(i){return new(i||Q)(t.Y36(P.F0),t.Y36(p.mj),t.Y36(p.OE),t.Y36(p._W),t.Y36(p.cw),t.Y36(p.Ip),t.Y36(_.uw),t.Y36(lt.x))},Q.\u0275cmp=t.Xpm({type:Q,selectors:[["app-occupancy-inquiry"]],decls:3,vars:4,consts:[[3,"title"],[4,"ngIf"],[3,"lastRowIndex","title","message"],["fxLayout","row wrap","fxLayoutAlign","space-between center"],["fxFlex.gt-xs","50","fxFlex","100"],[2,"margin-left","0px",3,"ngModel","ngModelChange","change"],[1,"f-s-12","f-w-100"],["value","active",1,"f-s-12","f-w-100"],["value","expiry",1,"f-s-12","f-w-100"],["value","future",1,"f-s-12","f-w-100"],[3,"length","showFirstLastButtons","pageIndex","pageSize","pageSizeOptions","page"],["appMaterialElevation","","raisedElevation","16",1,"matero-table-container",3,"defaultElevation"],["mat-table","","matSort","",3,"dataSource","matSortChange"],["matColumnDef","customerCode","sticky",""],["mat-header-cell","","mat-sort-header","customerCode",4,"matHeaderCellDef"],["mat-cell","","data-label","code",4,"matCellDef"],["matColumnDef","fullAddress"],["mat-header-cell","","mat-sort-header","fullAddress",4,"matHeaderCellDef"],["mat-cell","","data-label","Unit",4,"matCellDef"],["matColumnDef","category"],["mat-header-cell","","mat-sort-header","category",4,"matHeaderCellDef"],["matColumnDef","location"],["mat-header-cell","","mat-sort-header","location",4,"matHeaderCellDef"],["matColumnDef","dateFrom"],["mat-header-cell","","mat-sort-header","dateFrom",4,"matHeaderCellDef"],["matColumnDef","dateTo"],["mat-header-cell","","mat-sort-header","dateTo",4,"matHeaderCellDef"],["matColumnDef","totalOccupant"],["mat-header-cell","","mat-sort-header","totalOccupant",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","totalAdvanceCheckOut"],["mat-header-cell","","mat-sort-header","totalAdvanceCheckOut",4,"matHeaderCellDef"],["matColumnDef","totalVacant"],["mat-header-cell","","mat-sort-header","totalVacant",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","showFirstLastButtons","pageSize","pageIndex","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header","customerCode"],["mat-cell","","data-label","code"],["mat-header-cell","","mat-sort-header","fullAddress"],["mat-cell","","data-label","Unit"],["mat-header-cell","","mat-sort-header","category"],["mat-header-cell","","mat-sort-header","location"],["mat-header-cell","","mat-sort-header","dateFrom"],["mat-header-cell","","mat-sort-header","dateTo"],["mat-header-cell","","mat-sort-header","totalOccupant"],["mat-cell",""],[1,"menu-badge","bg-green-500",2,"cursor","pointer",3,"ngClass","click"],["mat-header-cell","","mat-sort-header","totalAdvanceCheckOut"],[1,"menu-badge","bg-orange-500",2,"cursor","pointer",3,"ngClass","click"],["mat-header-cell","","mat-sort-header","totalVacant"],[1,"menu-badge","bg-cyan-500",2,"cursor","pointer",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,e){1&i&&(t._UZ(0,"app-page-header",0),t.YNc(1,Ui,46,15,"div",1),t._UZ(2,"app-empty-layout",2)),2&i&&(t.Q6J("title",e.title),t.xp6(1),t.Q6J("ngIf",e.lastRowIndex>0),t.xp6(1),t.Q6J("lastRowIndex",e.lastRowIndex)("title","No record found"))},directives:[X.q,h.O5,g.xw,g.Wh,g.yH,at.VQ,m.JJ,m.On,at.U0,M.NW,$.F,u.BZ,it.YE,u.w1,u.fO,u.ge,it.nU,u.Dz,u.ev,h.mk,L.oO,u.as,u.XQ,u.nj,u.Gk,W.B],pipes:[h.uU],styles:[".menu-badge[_ngcontent-%COMP%]{margin-left:20px;font-size:12px;color:#fff;padding:5px 6px}.menu-badge[_ngcontent-%COMP%]{border-radius:10px}th.mat-column-customerCode[_ngcontent-%COMP%]   td.mat-column-customerCode[_ngcontent-%COMP%]{padding-left:8px}th.mat-column-actions[_ngcontent-%COMP%]   td.mat-column-actions[_ngcontent-%COMP%]{padding-right:8px}mat-radio-button[_ngcontent-%COMP%]{margin-left:10px}"]}),Q=(0,T.gn)([(0,f.c)()],Q);class Ii extends k.U{}var Oi=c(2231),Fi=c(4652);function Mi(n,i){1&n&&t._UZ(0,"app-vertical-content-loading",4),2&n&&t.Q6J("width",100)("loop",6)("paddingTop",50)}function ki(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.dateTo))}}function Pi(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"present"),t.qZA())}function Di(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mat-list-item")(1,"div",9)(2,"div",10),t._UZ(3,"img",11),t.qZA(),t.TgZ(4,"div",12)(5,"div",13)(6,"div",14)(7,"h3",15),t._uU(8),t.qZA(),t.TgZ(9,"p",15)(10,"span"),t._uU(11),t.qZA()(),t.TgZ(12,"h2",15)(13,"span"),t._uU(14),t.ALo(15,"date"),t.qZA(),t.YNc(16,ki,3,3,"span",3),t.YNc(17,Pi,2,0,"span",3),t.qZA()(),t.TgZ(18,"div",16)(19,"h3",15),t._uU(20),t.qZA(),t.TgZ(21,"p",15)(22,"span"),t._uU(23),t.qZA()(),t.TgZ(24,"p",15)(25,"span"),t._uU(26),t.qZA()()()()(),t.TgZ(27,"div",17)(28,"button",18),t.NdJ("click",function(){const a=t.CHM(e),r=a.$implicit,s=a.index;return t.oxw(3).delete(r,s)}),t.TgZ(29,"mat-icon"),t._uU(30,"delete"),t.qZA()(),t.TgZ(31,"button",18),t.NdJ("click",function(){const a=t.CHM(e),r=a.$implicit,s=a.index;return t.oxw(3).edit(r,s)}),t.TgZ(32,"mat-icon"),t._uU(33,"keyboard_arrow_right"),t.qZA()()()(),t._UZ(34,"mat-divider",19),t.qZA()}if(2&n){const e=i.$implicit;t.xp6(3),t.Q6J("src",e.photo,t.LSH),t.xp6(5),t.hij(" ",e.name," "),t.xp6(3),t.hij("",e.fullAddress," "),t.xp6(3),t.hij("",t.lcZ(15,10,e.dateFrom)," - "),t.xp6(2),t.Q6J("ngIf",null!==e.dateTo),t.xp6(1),t.Q6J("ngIf",null===e.dateTo),t.xp6(3),t.hij(" ",e.customer," "),t.xp6(3),t.hij("",e.category," "),t.xp6(3),t.hij("",e.location," "),t.xp6(8),t.Q6J("inset",!0)}}function Ni(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"mat-paginator",5),t.NdJ("page",function(a){return t.CHM(e),t.oxw(2).onPaginateChange(a)}),t.qZA(),t.TgZ(2,"mat-list",6),t.YNc(3,Di,35,12,"mat-list-item",7),t.qZA(),t._UZ(4,"app-empty-layout",8),t.TgZ(5,"mat-paginator",5),t.NdJ("page",function(a){return t.CHM(e),t.oxw(2).onPaginateChange(a)}),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("length",e.inquiry.totalRows)("showFirstLastButtons",!0)("pageSize",e.inquiry.pageSize)("pageIndex",e.inquiry.currentPageIndex)("pageSizeOptions",e.inquiry.pageSizeOptions),t.xp6(2),t.Q6J("ngForOf",e.dataSource.data),t.xp6(1),t.Q6J("lastRowIndex",e.lastRowIndex)("title","No record found"),t.xp6(1),t.Q6J("length",e.inquiry.totalRows)("showFirstLastButtons",!0)("pageSize",e.inquiry.pageSize)("pageIndex",e.inquiry.currentPageIndex)("pageSizeOptions",e.inquiry.pageSizeOptions)}}function Ei(n,i){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-page-header"),t.YNc(2,Mi,1,3,"app-vertical-content-loading",2),t.YNc(3,Ni,6,13,"div",3),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading)}}function Li(n,i){1&n&&(t.TgZ(0,"th",39),t._uU(1,"Unit"),t.qZA())}function Ji(n,i){if(1&n&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("formGroup",e),t.xp6(1),t.hij(" ",e.get("fullAddress").value," ")}}function Yi(n,i){1&n&&(t.TgZ(0,"th",41),t._uU(1,"From"),t.qZA())}const At=function(){return{color:"red"}};function Qi(n,i){if(1&n&&(t.TgZ(0,"td",42)(1,"mat-form-field",43),t._UZ(2,"input",44)(3,"mat-datepicker-toggle",45)(4,"mat-datepicker",46,47),t.qZA()()),2&n){const e=i.$implicit,o=i.index,a=t.MAs(5),r=t.oxw(2);t.Q6J("formGroup",e),t.xp6(1),t.Q6J("ngStyle",r.occupancyItems.at(o).get("dateFrom").invalid&&(r.occupancyItems.at(o).get("dateFrom").dirty||r.occupancyItems.at(o).get("dateFrom").touched)&&t.DdM(7,At)),t.xp6(1),t.Q6J("matDatepicker",a)("min",r.minTripDate)("max",r.maxTripDate),t.xp6(1),t.Q6J("for",a),t.xp6(1),t.Q6J("startAt",r.startTripDate)}}function Ri(n,i){1&n&&(t.TgZ(0,"th",41),t._uU(1,"To"),t.qZA())}function Hi(n,i){if(1&n&&(t.TgZ(0,"td",42)(1,"mat-form-field",43),t._UZ(2,"input",48)(3,"mat-datepicker-toggle",45)(4,"mat-datepicker",46,49),t.qZA()()),2&n){const e=i.$implicit,o=i.index,a=t.MAs(5),r=t.oxw(2);t.Q6J("formGroup",e),t.xp6(1),t.Q6J("ngStyle",r.occupancyItems.at(o).get("dateTo").invalid&&(r.occupancyItems.at(o).get("dateTo").dirty||r.occupancyItems.at(o).get("dateTo").touched)&&t.DdM(7,At)),t.xp6(1),t.Q6J("matDatepicker",a)("min",e.controls.dateFrom.value||r.minTripDate)("max",r.maxTripDate),t.xp6(1),t.Q6J("for",a),t.xp6(1),t.Q6J("startAt",r.startTripDate)}}function Bi(n,i){1&n&&(t.TgZ(0,"th",50),t._uU(1,"Actions "),t.qZA())}function zi(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",42)(1,"button",51)(2,"mat-icon"),t._uU(3,"more_vert"),t.qZA()(),t.TgZ(4,"mat-menu",null,52)(6,"button",53),t.NdJ("click",function(){const a=t.CHM(e),r=a.index,s=a.$implicit;return t.oxw(2).editLineItem(r,s)}),t.TgZ(7,"mat-icon"),t._uU(8,"edit"),t.qZA(),t.TgZ(9,"span"),t._uU(10,"Edit"),t.qZA()(),t.TgZ(11,"button",53),t.NdJ("click",function(){const a=t.CHM(e),r=a.index,s=a.$implicit;return t.oxw(2).cancelEditLineItem(r,s)}),t.TgZ(12,"mat-icon"),t._uU(13,"undo"),t.qZA(),t.TgZ(14,"span"),t._uU(15,"Cancel"),t.qZA()(),t.TgZ(16,"button",53),t.NdJ("click",function(){const a=t.CHM(e),r=a.index,s=a.$implicit;return t.oxw(2).updateLineItem(r,s)}),t.TgZ(17,"mat-icon"),t._uU(18,"save"),t.qZA(),t.TgZ(19,"span"),t._uU(20,"Save"),t.qZA()()()()}if(2&n){const e=i.$implicit,o=t.MAs(5);t.Q6J("formGroup",e),t.xp6(1),t.Q6J("matMenuTriggerFor",o),t.xp6(5),t.Q6J("disabled",e.controls.disableEditButton.value),t.xp6(5),t.Q6J("disabled",e.controls.disableCancelButton.value),t.xp6(5),t.Q6J("disabled",e.controls.disableSaveButton.value)}}function ji(n,i){1&n&&t._UZ(0,"tr",54)}function Wi(n,i){1&n&&t._UZ(0,"tr",55)}function $i(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",20)(1,"div",21)(2,"div",22)(3,"button",18),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return a.isEnquiry=!a.isEnquiry}),t.TgZ(4,"mat-icon",23),t._uU(5,"arrow_back"),t.qZA()(),t._UZ(6,"span",24),t.TgZ(7,"h4"),t._uU(8),t.qZA()()()(),t.TgZ(9,"form",25)(10,"div",26)(11,"table",27),t.ynx(12,28),t.YNc(13,Li,2,0,"th",29),t.YNc(14,Ji,2,2,"td",30),t.BQk(),t.ynx(15,31),t.YNc(16,Yi,2,0,"th",32),t.YNc(17,Qi,6,8,"td",33),t.BQk(),t.ynx(18,34),t.YNc(19,Ri,2,0,"th",32),t.YNc(20,Hi,6,8,"td",33),t.BQk(),t.ynx(21,35),t.YNc(22,Bi,2,0,"th",36),t.YNc(23,zi,21,5,"td",33),t.BQk(),t.YNc(24,ji,1,0,"tr",37),t.YNc(25,Wi,1,0,"tr",38),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(8),t.hij(" ",e.name," "),t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(1),t.Q6J("defaultElevation",2),t.xp6(1),t.Q6J("dataSource",e.occupancyDataSource),t.xp6(13),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}let ut=(()=>{class n{constructor(e,o,a,r,s,l,d,x,C,mt){this.router=e,this.sessionService=o,this.httpService=a,this.toastrService=r,this.actionService=s,this.fb=l,this.dialog=d,this.fileService=x,this.reactiveformService=C,this.appConfigService=mt,this.title="Occupancy Maintenance",this.lastRowIndex=-1,this.dataSource=new u.by(null),this.displayedColumns=["fullAddress","dateFrom","dateTo","actions"],this.isEnquiry=!0,this.name="",this.loading=!0}ngOnInit(){this.initializeToolbar(),this.initialize(),this.executeSearch()}ngOnDestroy(){}initializeToolbar(){const e=new V.P;e.showReferesh=!0,e.title=this.title,this.actionService.setToolbarSettings(e)}initialize(){this.lastSearchValue="",this.inquiry=new Ii,this.inquiry.selection="category",this.inquiry.displayedColumns=["name","fullAddress","category","location","dateFrom","dateTo","actions"],this.inquiry.sortExpression="dateFrom",this.minTripDate=O(I.$.min,I.t.uk).toDate(),this.maxTripDate=O(I.$.max,I.t.uk).toDate(),this.startTripDate=new Date,this.displayedColumns=["fullAddress","dateFrom","dateTo","actions"]}initializeForm(){this.form=this.fb.group({occupancyItems:this.fb.array([])}),this.occupancyTransactionInquiry=new Oi.yR,this.occupancyTransactionInquiry.sortExpression="dateFrom",this.occupancyTransactionInquiry.sortDirection="DESC",this.occupancyTransactionInquiry.pageSize=999,this.occupancyDataSource=new u.by(this.occupancyItems.controls)}executeSearch(){this.lastSearchValue=this.inquiry.filter,this.httpService.HttpPost(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"occupancy/occupantInquiry",this.inquiry).subscribe(o=>{this.inquirySuccess(o)},o=>this.inquiryFailed(o))}inquirySuccess(e){this.lastRowIndex=e.entity.length,this.inquiry.totalPages=e.totalPages,this.inquiry.totalRows=e.totalRows,e.entity.map(o=>o.photo=o.photo&&null!==o.photo?this.fileService.loadImage(o.photo):this.appConfigService.getValue().avatar),this.dataSource.data=e.entity,this.dataSource._updateChangeSubscription(),this.loading=!1}inquiryFailed(e){this.loading=!1}onPaginateChange(e){this.inquiry.currentPageNumber=e.pageIndex+1,this.inquiry.pageSize=e.pageSize,this.executeSearch()}sortData(e){this.inquiry.currentPageNumber=1,this.inquiry.sortDirection=e.direction,this.inquiry.sortExpression=e.active,this.executeSearch()}resetSearch(){this.lastSearchValue="",this.inquiry.filter="",this.executeSearch()}change(e){this.inquiry.selection=e}delete(e,o){const a="Are you wants to delete this record "+e.name+"/"+e.fullAddress,r=new _.vA;r.autoFocus=!0,r.data=new H.B("Delete record?",a,"OK","Cancel",!1,null),this.dialog.open(G.z,r).afterClosed().subscribe(l=>{if(!0===l){const d=(new Z.LE).set("id",e.id);this.httpService.HttpDelete(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"occupancy/delete",d).subscribe(C=>{this.deleteSuccess(o)},C=>this.deleteFailed(C))}})}deleteSuccess(e){this.dataSource.data.splice(e,1)}deleteFailed(e){let o=e.error;e.status>0&&o.returnMessage&&this.toastrService.ShowErrorMessage(o.returnMessage[0])}updateSuccess(e){this.dataSource.data.splice(e,1)}showError(e){}get occupancyItems(){return this.form.get("occupancyItems")}edit(e,o){this.initializeForm(),this.occupancyTransactionInquiry.personalId=e.personalId,this.httpService.HttpPost(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"occupancy/GetOccupancyByPersonId",this.occupancyTransactionInquiry).subscribe(r=>{this.getSuccess(r,e)},r=>this.getFailed(r))}addItem(e,o){return this.fb.group({id:[e.id],roomId:[e.roomId],personalId:[e.personalId],fullAddress:[{value:e.fullAddress,disabled:!0}],dateFrom:[{value:e.dateFrom,disabled:!o},[Fi.O.isValidDate(),m.kI.required]],dateTo:[{value:e.dateTo,disabled:!o}],disableSaveButton:[!o],disableCancelButton:[!o],disableEditButton:[o]})}getSuccess(e,o){this.lastRowIndex+=1,this.occupancyItems.clear(),e.entity.forEach((r,s)=>{this.occupancyItems.push(this.addItem(r,!1)),this.occupancyItems.at(s).get("id").patchValue(r.occupancyId)}),this.occupancyItems.disable({onlySelf:!0,emitEvent:!1}),this.occupancyDataSource._updateChangeSubscription(),this.isEnquiry=!this.isEnquiry,this.name="Occupancy for "+o.name}getFailed(e){}editLineItem(e,o){this.setFormArrayMenuButton(e,!0),this.backUpLineItem=o.value}updateLineItem(e,o){if(console.log(this.occupancyItems.at(e).value),this.occupancyItems.at(e).invalid)return void this.toastrService.ShowErrorMessage("Invalid input, please try again");let a=this.reactiveformService.getReactiveFormObject(o);this.httpService.HttpPost(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"occupancy/update",a).subscribe(s=>{this.updateLineItemSuccess(s,e,o)},s=>this.updateLineItemFailed(s))}updateLineItemSuccess(e,o,a){this.form.enable(),this.setFormArrayMenuButton(o,!1),this.toastrService.ShowSuccessMessage("Line Item successfully updated."),this.executeSearch()}updateLineItemFailed(e){}cancelEditLineItem(e,o){this.form.enable(),this.actionService.formDirty=!1,this.backUpLineItem.id===o.get("id").value&&(this.reactiveformService.setReactiveFormObject(this.occupancyItems.at(e),this.backUpLineItem),this.backUpLineItem=null),this.setFormArrayMenuButton(e,!1)}setFormArrayMenuButton(e,o){this.occupancyItems.disable();const a=o?"enable":"disable";this.occupancyItems.at(e)[a]({onlySelf:!0,emitEvent:!1}),this.occupancyItems.at(e).get("disableSaveButton").patchValue(!o),this.occupancyItems.at(e).get("disableCancelButton").patchValue(!o),this.occupancyItems.at(e).get("disableEditButton").patchValue(o)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(P.F0),t.Y36(p.mj),t.Y36(p.OE),t.Y36(p._W),t.Y36(p.cw),t.Y36(m.qu),t.Y36(_.uw),t.Y36(p.Ip),t.Y36(p.xd),t.Y36(B._))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-occupancy-maintenance"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["transaction",""],[3,"width","loop","paddingTop",4,"ngIf"],[4,"ngIf"],[3,"width","loop","paddingTop"],[3,"length","showFirstLastButtons","pageSize","pageIndex","pageSizeOptions","page"],[1,"app-list"],[4,"ngFor","ngForOf"],[3,"lastRowIndex","title","message"],["fxLayout","row wrap",2,"width","100%"],["fxFlex","15","fxFlex.xs","25","fxFlex.sm","20","fxLayout","row","fxLayoutAlign","center center"],["matListAvatar","",3,"src"],["fxFlex","80","fxFlex.xs","60","fxFlex.sm","66"],["fxLayout","row wrap","fxLayout.sm","column","fxLayout.xs","column"],["fxFlex","60"],["matLine",""],["fxFlex","40"],["fxFlex","5","fxFlex.xs","15","fxFlex.sm","12","fxLayout","row","fxLayoutAlign","center center"],["mat-icon-button","",3,"click"],[3,"inset"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","space-between center"],[1,"matero-group-button"],["fxLayout","row","fxLayoutAlign","center center"],["aria-label","label"],["fxFlex",""],["autocomplete","off",3,"formGroup"],["formArrayName","occupancyItems","appMaterialElevation","","raisedElevation","16",1,"matero-table-container","mat-form-field-no-label",3,"defaultElevation"],["mat-table","",3,"dataSource"],["matColumnDef","fullAddress"],["mat-header-cell","","style","width:60%","class","min-w-400",4,"matHeaderCellDef"],["mat-cell","","class","min-w-400",3,"formGroup",4,"matCellDef"],["matColumnDef","dateFrom"],["mat-header-cell","","style","width:15%",4,"matHeaderCellDef"],["mat-cell","",3,"formGroup",4,"matCellDef"],["matColumnDef","dateTo"],["matColumnDef","actions"],["mat-header-cell","","style","width:10%",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"min-w-400",2,"width","60%"],["mat-cell","",1,"min-w-400",3,"formGroup"],["mat-header-cell","",2,"width","15%"],["mat-cell","",3,"formGroup"],[1,"max-w-150","min-w-100",3,"ngStyle"],["matInput","","tabindex","4","formControlName","dateFrom","appDatemask","",3,"matDatepicker","min","max"],["matSuffix","",3,"for"],[3,"startAt"],["dateFromPicker",""],["matInput","","tabindex","5","formControlName","dateTo","appDatemask","",3,"matDatepicker","min","max"],["dateToPicker",""],["mat-header-cell","",2,"width","10%"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"disabled","click"],["mat-header-row",""],["mat-row",""]],template:function(e,o){if(1&e&&(t.YNc(0,Ei,4,2,"div",0),t.YNc(1,$i,26,6,"ng-template",null,1,t.W1O)),2&e){const a=t.MAs(2);t.Q6J("ngIf",o.isEnquiry)("ngIfElse",a)}},directives:[h.O5,X.q,w,M.NW,y.i$,h.sg,y.Tg,g.xw,g.yH,g.Wh,y.eA,q.X2,D.lW,A.Hw,ot.d,W.B,m._Y,m.JL,m.sg,m.CE,$.F,u.BZ,u.w1,u.fO,u.ge,u.Dz,u.ev,v.KE,h.PC,L.Zl,K.Nt,m.Fj,S.hl,m.JJ,m.u,dt.v,S.nW,v.R9,S.Mq,b.p6,b.VK,b.OP,u.as,u.XQ,u.nj,u.Gk],pipes:[h.uU],styles:['*[_ngcontent-%COMP%]{box-sizing:border-box}form.inputSearch[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:1px solid #bdb8b8;height:46px;background:#f1f1f1;border-radius:30px}form.inputSearch[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{padding:5px;font-size:14px;float:left;width:70%;border-right:none}form.inputSearch[_ngcontent-%COMP%]   button.filter[_ngcontent-%COMP%]{float:left;width:25%;padding:5px;background:#f1f1f1;color:gray;font-size:14px;cursor:pointer;border-top-left-radius:30px;border-bottom-left-radius:30px}form.inputSearch[_ngcontent-%COMP%]   button.action[_ngcontent-%COMP%]{width:8%;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;background:#f1f1f1;color:gray;cursor:pointer;border-radius:unset;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;align-items:center;border-right:none;border-left:none}form.inputSearch[_ngcontent-%COMP%]:after{content:"";clear:both;display:table}.mat-menu-panel.full-width-menu[_ngcontent-%COMP%]{max-width:none;width:100vw;margin-left:-8px;margin-top:24px;font-size:14px}td.mat-cell[_ngcontent-%COMP%]{white-space:normal;word-break:normal;overflow:hidden;text-overflow:ellipsis;padding-top:2px;padding-bottom:2px}.app-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-list-avatar[_ngcontent-%COMP%]{height:100px;width:100px;border-radius:50%;-o-object-fit:cover;object-fit:cover}.app-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]:first-child{border-top:1px solid #e0e0e0}']}),n})();var wt=c(3170),Vi=c(7567),pt=c(4566);const Gi=["fullcalendar"],Xi=function(n){return["text-white",n]};function Ki(n,i){if(1&n&&(t.TgZ(0,"div",15)(1,"mat-card",16)(2,"mat-card-content")(3,"div",17)(4,"span",18),t._uU(5),t.qZA(),t.TgZ(6,"h2"),t._uU(7),t.qZA()()()()()),2&n){const e=i.$implicit,o=i.index,a=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(3,Xi,a.color[o])),t.xp6(4),t.Oqu(e.title),t.xp6(2),t.Oqu(e.count)}}function tn(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij("- ",t.xi3(2,1,e.dateTo,"dd/MM/yyyy"),"")}}function en(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"- present"),t.qZA())}const nn=function(n){return[n]};function on(n,i){if(1&n&&(t.TgZ(0,"mat-list-item"),t._UZ(1,"img",24),t.TgZ(2,"p",25)(3,"span",26),t._uU(4),t.qZA(),t.TgZ(5,"span",27),t._uU(6),t.qZA(),t.TgZ(7,"span",28)(8,"span"),t._uU(9),t.ALo(10,"date"),t.qZA(),t.YNc(11,tn,3,4,"span",29),t.YNc(12,en,2,0,"span",29),t.qZA()()()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("src",e.img,t.LSH),t.xp6(3),t.hij("",e.name," "),t.xp6(2),t.Oqu(e.fullAddress),t.xp6(1),t.Q6J("ngClass",t.VKq(10,nn,"i"===e.activity?"text-green-500":"text-blue-500")),t.xp6(2),t.hij("",t.xi3(10,7,e.dateFrom,"dd/MM/yyyy")," "),t.xp6(2),t.Q6J("ngIf",e.dateTo),t.xp6(1),t.Q6J("ngIf",!e.dateTo)}}function an(n,i){if(1&n&&(t.TgZ(0,"mat-card",19)(1,"mat-card-title",20),t._uU(2,"Occupant Listing"),t.qZA(),t.TgZ(3,"mat-card-content",21)(4,"mat-list",22),t.YNc(5,on,13,12,"mat-list-item",23),t.qZA()()()),2&n){const e=t.oxw();t.xp6(5),t.Q6J("ngForOf",e.occupants)}}let R=class{constructor(i,e,o,a){this.sessionService=i,this.httpService=e,this.appConfigService=o,this.fileService=a,this.events=[],this.summary=[],this.color=["bg-green-500","bg-blue-500"],this.occupants=[],this.isReload=!0}ngOnInit(){this.date=new m.NI(O(),m.kI.required),this.calendarOptions={editable:!0,initialView:"dayGridMonth",dateClick:this.dateClick.bind(this),eventClick:this.eventClick.bind(this),events:this.events,headerToolbar:{right:"prev,next today",left:"title"},height:"auto",eventContent:this.renderEventContent,eventReceive:i=>{i.event.setAllDay(!1,{maintainDuration:!1})}},setTimeout(()=>{this.calendarApi=this.calendarComponent.getApi(),this.getEvents()})}ngAfterViewChecked(){}ngAfterViewInit(){}renderEventContent(i,e){let o="";return o=i.event._def.title,o.indexOf("checkin")>0?{html:'<div class="text-green-600 f-s-14 f-w-600">'+o+"</div>"}:{html:'<div class="text-blue-600 f-s-14 f-w-600">'+o+"</div>"}}setMonthAndYear(i,e){const o=this.date.value;o.month(i.month()),o.year(i.year()),this.date.patchValue(o),e.close()}handleDatesRender(i){console.log(i)}gotoDate(){const i=this.date.value.format("YYYY-MM-DD");this.calendarApi.gotoDate(i),this.isReload=!0,this.getEvents()}getEvents(){let i=this.calendarApi.view.activeStart,e=this.calendarApi.view.activeEnd;const o=(new Z.LE).set("start",i.toDateString()).set("end",e.toDateString());return this.httpService.HttpGetWithParams(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"analysis/GetEventByMonth",o).subscribe(r=>{this.getSuccess(r,"io",i,e)},r=>(0,ct.of)(null))}getSuccess(i,e,o,a){i.entity.map(l=>l.className=l.title.indexOf("checkin")>0?"checkin":"checkout"),this.events=i.entity,this.calendarOptions.events=this.events;const{checkin:r,checkout:s}=i.entity.reduce((l,d)=>(d.title.indexOf("checkin")>0&&(l.checkin=d.eventCount),d.title.indexOf("checkout")>0&&(l.checkout=d.eventCount),l),{checkin:0,checkout:0});this.summary=[],this.summary.push({title:`Total check IN for ${this.calendarApi.view.title}`,count:r},{title:`Total check OUT for ${this.calendarApi.view.title}`,count:s}),0!==i.entity.length?i.entity.length>0&&setTimeout(()=>{this.getOccupancyByDate(e,o,a),this.isReload=!1},2e3):this.occupants=[]}dateClick(i){}eventClick(i){let s,l,o=O(i.event.startStr,I.t.reverse).toDate(),r="";s=l=null,O(o).isValid()&&(i.event.title.indexOf("checkin")>0?(r="i",s=o,l=o):(r="o",s=o,l=o),this.getOccupancyByDate(r,s,l))}getOccupancyByDate(i,e,o){let a=new k.U;a.sortExpression="name";let r=JSON.stringify(a),s=JSON.parse(r);return s.activity=i,s.dateFrom=e,s.dateTo=o,this.httpService.HttpPost(this.sessionService.urlSetting.dormitoryManagementWebApiUrl+"analysis/GetOccupancyByDate",JSON.stringify(s)).subscribe(d=>{this.getOccupancyByDateSuccess(d)},d=>(0,ct.of)(null))}getOccupancyByDateSuccess(i){let e=i.entity;e.map(o=>{o.img=o.base64String&&o.base64String.length>0?this.fileService.loadImage(o.base64String):this.appConfigService.getValue().avatar,o.dateFrom=O(o.dateFrom,I.t.reverse).toDate(),o.dateTo=null!=o.dateTo?O(o.dateTo,I.t.reverse).toDate():null}),this.occupants=e}};R.\u0275fac=function(i){return new(i||R)(t.Y36(p.mj),t.Y36(p.OE),t.Y36(B._),t.Y36(p.Ip))},R.\u0275cmp=t.Xpm({type:R,selectors:[["app-calender"]],viewQuery:function(i,e){if(1&i&&t.Gf(Gi,5),2&i){let o;t.iGM(o=t.CRH())&&(e.calendarComponent=o.first)}},inputs:{eventData:"eventData"},features:[t._Bn([{provide:q._A,useClass:wt.t7,deps:[q.Ad,wt.o8]},{provide:q.sG,useValue:{parse:{dateInput:"MM/YYYY"},display:{dateInput:"MM/YYYY",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}}}])],decls:17,vars:7,consts:[["fxLayout","row wrap","fxLayoutAlign","stretch"],["fxFlex","75","fxFlex.xs","100","fxFlex.sm","100","fxFlex.md","75","fxLayout","column"],["fxLayout","row","fxLayoutAlign","start center"],["matInput","","placeholder","Month and Year","appMonthYearMask","",3,"matDatepicker","formControl"],["matSuffix","",3,"for"],["startView","multi-year","panelClass","example-month-picker",3,"monthSelected"],["dp",""],["mat-icon-button","",3,"click"],["aria-label","label"],["appMaterialElevation","","raisedElevation","16",3,"options","defaultElevation"],["fullcalendar",""],["fxFlex","25","fxFlex.xs","100","fxFlex.sm","100","fxFlex.md","25"],["fxLayout","row wrap","fxLayoutGap","5px grid"],["fxFlex.sm","50","fxFlex.md","100","fxFlex.xs","100","fxFlex","100",4,"ngFor","ngForOf"],["style","border-radius:0px ;",4,"ngIf"],["fxFlex.sm","50","fxFlex.md","100","fxFlex.xs","100","fxFlex","100"],[3,"ngClass"],["fxLayout","row","fxLayoutAlign","space-between center"],["matLine","",1,"f-s-12","f-w-100"],[2,"border-radius","0px"],[1,"f-s-14","f-w-100"],[2,"margin","-16px","margin-top","8px","border-top","0.5px solid #e0e0e0"],[1,"app-class"],[4,"ngFor","ngForOf"],["matListAvatar","","alt","",3,"src"],["matLine","","fxLayout","column"],[1,"f-s-12","f-w-500"],[1,"f-s-12","f-w-100",2,"word-break","normal","white-space","normal"],["fxLayout","row",1,"f-s-12","f-w-600",3,"ngClass"],[4,"ngIf"]],template:function(i,e){if(1&i){const o=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-form-field"),t._UZ(4,"input",3)(5,"mat-datepicker-toggle",4),t.TgZ(6,"mat-datepicker",5,6),t.NdJ("monthSelected",function(r){t.CHM(o);const s=t.MAs(7);return e.setMonthAndYear(r,s)}),t.qZA()(),t.TgZ(8,"button",7),t.NdJ("click",function(){return e.gotoDate()}),t.TgZ(9,"mat-icon",8),t._uU(10,"search"),t.qZA()()(),t._UZ(11,"full-calendar",9,10),t.qZA(),t.TgZ(13,"div",11)(14,"div",12),t.YNc(15,Ki,8,5,"div",13),t.qZA(),t.YNc(16,an,6,1,"mat-card",14),t.qZA()()}if(2&i){const o=t.MAs(7);t.xp6(4),t.Q6J("matDatepicker",o)("formControl",e.date),t.xp6(1),t.Q6J("for",o),t.xp6(6),t.Q6J("options",e.calendarOptions)("defaultElevation",2),t.xp6(4),t.Q6J("ngForOf",e.summary),t.xp6(1),t.Q6J("ngIf",e.occupants.length>0)}},directives:[g.xw,g.Wh,g.yH,v.KE,K.Nt,S.hl,m.Fj,Vi.$,m.JJ,m.oH,S.nW,v.R9,S.Mq,D.lW,A.Hw,pt.woE,$.F,g.SQ,h.sg,E.a8,h.mk,L.oO,E.dn,q.X2,h.O5,E.n5,y.i$,y.Tg,y.eA],pipes:[h.uU],styles:["full-calendar[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;padding:20px;color:#378006}.example-month-picker[_ngcontent-%COMP%]   .mat-calendar-period-button[_ngcontent-%COMP%]{pointer-events:none}.example-month-picker[_ngcontent-%COMP%]   .mat-calendar-arrow[_ngcontent-%COMP%]{display:none}mat-form-field[_ngcontent-%COMP%], .note[_ngcontent-%COMP%]{padding:30px}.app-class[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{height:auto;padding-top:8px;padding-bottom:8px;border-bottom:1px solid #e0e0e0}"]}),R=(0,T.gn)([(0,f.c)()],R);const sn=[{path:"dashboard",component:gt},{path:"reference/locations",component:xt},{path:"reference/categories",component:ft},{path:"occupancy/inquiry",component:Q},{path:"occupancy/maintenance",component:ut},{path:"occupancy/calender",component:(()=>{class n{constructor(e,o,a,r,s){this.ngZone=e,this.sessionService=o,this.itemsService=a,this.httpService=r,this.dateService=s}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.R0b),t.Y36(p.mj),t.Y36(p.Ll),t.Y36(p.OE),t.Y36(p.Ru))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-occupancy-calendar"]],decls:2,vars:1,consts:[[3,"eventData"]],template:function(e,o){1&e&&(t.TgZ(0,"div"),t._UZ(1,"app-calender",0),t.qZA()),2&e&&(t.xp6(1),t.Q6J("eventData",o.eventData))},directives:[R],styles:[""]}),n})()},{path:"personal/inquiry",component:Y},{path:"personal",loadChildren:()=>c.e(229).then(c.bind(c,2229)).then(n=>n.PersonalModule),data:{title:"Profile",titleI18n:"profile"}},{path:"personal/personalUpload",component:N},{path:"room/inquiry",component:J},{path:"room",loadChildren:()=>c.e(645).then(c.bind(c,645)).then(n=>n.RoomModule),data:{title:"Room",titleI18n:"room"}},{path:"tenant",loadChildren:()=>c.e(489).then(c.bind(c,489)).then(n=>n.TenantModule),data:{title:"Tenant",titleI18n:"tenant"}},{path:"checkin",component:U,outlet:"aside"},{path:"checkout",component:F,outlet:"aside"},{path:"occupancy",component:ut,outlet:"aside"},{path:"**",redirectTo:"dashboard"}];let cn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[h.ez,P.Bz.forChild(sn)]]}),n})();var ln=c(1470),dn=c(5518),un=c(7524),pn=c(9112),mn=c(3559),hn=c(4130),gn=c(2013);pt.z1U.registerPlugins([mn.ZP,hn.ZP]);const _n=[cn,le.m,de.O,ln.yI.forRoot(dn.ik),un.S,pn.I$,pt.z1U,gn.C];let fn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[..._n]]}),n})()},2231:(It,tt,c)=>{c.d(tt,{yR:()=>Z});var T=c(5101),H=c(2062);class Z extends T.U{constructor(){super(),this.personalId=H.i.empty}}}}]);